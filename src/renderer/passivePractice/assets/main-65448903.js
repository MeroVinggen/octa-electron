var os=Object.defineProperty;var as=(t,e,n)=>e in t?os(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var An=(t,e,n)=>(as(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function J(){}const It=t=>t;function oe(t,e){for(const n in e)t[n]=e[n];return t}function fi(t){return t()}function jr(){return Object.create(null)}function he(t){t.forEach(fi)}function Qe(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ls(t){return Object.keys(t).length===0}function di(t,...e){if(t==null){for(const r of e)r(void 0);return J}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function hr(t){let e;return di(t,n=>e=n)(),e}function hi(t,e,n){t.$$.on_destroy.push(di(e,n))}function yn(t,e,n,r){if(t){const i=mi(t,e,n,r);return t[0](i)}}function mi(t,e,n,r){return t[1]&&r?oe(n.ctx.slice(),t[1](r(e))):n.ctx}function pn(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|i[a];return s}return e.dirty|i}return e.dirty}function bn(t,e,n,r,i,s){if(i){const o=mi(e,n,r,s);t.p(o,i)}}function vn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function je(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function en(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function us(t){const e={};for(const n in t)e[n]=!0;return e}const gi=typeof window<"u";let _n=gi?()=>window.performance.now():()=>Date.now(),mr=gi?t=>requestAnimationFrame(t):J;const st=new Set;function yi(t){st.forEach(e=>{e.c(t)||(st.delete(e),e.f())}),st.size!==0&&mr(yi)}function wn(t){let e;return st.size===0&&mr(yi),{promise:new Promise(n=>{st.add(e={c:t,f:n})}),abort(){st.delete(e)}}}function B(t,e){t.appendChild(e)}function pi(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function cs(t){const e=R("style");return e.textContent="/* empty */",fs(pi(t),e),e.sheet}function fs(t,e){return B(t.head||t,e),e.sheet}function F(t,e,n){t.insertBefore(e,n||null)}function M(t){t.parentNode&&t.parentNode.removeChild(t)}function R(t){return document.createElement(t)}function be(t){return document.createTextNode(t)}function Z(){return be(" ")}function ds(){return be("")}function V(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function E(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const hs=["width","height"];function tn(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set&&hs.indexOf(r)===-1?t[r]=e[r]:E(t,r,e[r])}function ms(t){let e;return{p(...n){e=n,e.forEach(r=>t.push(r))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function gs(t){return Array.from(t.childNodes)}function gr(t,e){e=""+e,t.data!==e&&(t.data=e)}function re(t,e,n){t.classList.toggle(e,!!n)}function bi(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}const nn=new Map;let rn=0;function ys(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ps(t,e){const n={stylesheet:cs(e),rules:{}};return nn.set(t,n),n}function St(t,e,n,r,i,s,o,a=0){const l=16.666/r;let f=`{
`;for(let b=0;b<=1;b+=l){const m=e+(n-e)*s(b);f+=b*100+`%{${o(m,1-m)}}
`}const c=f+`100% {${o(n,1-n)}}
}`,u=`__svelte_${ys(c)}_${a}`,d=pi(t),{stylesheet:h,rules:y}=nn.get(d)||ps(d,t);y[u]||(y[u]=!0,h.insertRule(`@keyframes ${u} ${c}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${u} ${r}ms linear ${i}ms 1 both`,rn+=1,u}function Et(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),rn-=i,rn||bs())}function bs(){mr(()=>{rn||(nn.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&M(e)}),nn.clear())})}function vs(t,e,n,r){if(!e)return J;const i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return J;const{delay:s=0,duration:o=300,easing:a=It,start:l=_n()+s,end:f=l+o,tick:c=J,css:u}=n(t,{from:e,to:i},r);let d=!0,h=!1,y;function g(){u&&(y=St(t,0,1,o,s,a,u)),s||(h=!0)}function b(){u&&Et(t,y),d=!1}return wn(m=>{if(!h&&m>=l&&(h=!0),h&&m>=f&&(c(1,0),b()),!d)return!1;if(h){const p=m-l,w=0+1*a(p/o);c(w,1-w)}return!0}),g(),c(0,1),b}function _s(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,vi(t,i)}}function vi(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let xt;function bt(t){xt=t}function kn(){if(!xt)throw new Error("Function called outside component initialization");return xt}function ws(t){kn().$$.on_mount.push(t)}function ks(){const t=kn();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=bi(e,n,{cancelable:r});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function Je(t,e){return kn().$$.context.set(t,e),e}function Ze(t){return kn().$$.context.get(t)}function se(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const rt=[],Ye=[];let ot=[];const Nn=[],Ps=Promise.resolve();let Fn=!1;function Ss(){Fn||(Fn=!0,Ps.then(_i))}function Ie(t){ot.push(t)}function sn(t){Nn.push(t)}const On=new Set;let $e=0;function _i(){if($e!==0)return;const t=xt;do{try{for(;$e<rt.length;){const e=rt[$e];$e++,bt(e),Es(e.$$)}}catch(e){throw rt.length=0,$e=0,e}for(bt(null),rt.length=0,$e=0;Ye.length;)Ye.pop()();for(let e=0;e<ot.length;e+=1){const n=ot[e];On.has(n)||(On.add(n),n())}ot.length=0}while(rt.length);for(;Nn.length;)Nn.pop()();Fn=!1,On.clear(),bt(t)}function Es(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ie)}}function xs(t){const e=[],n=[];ot.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),ot=e}let mt;function yr(){return mt||(mt=Promise.resolve(),mt.then(()=>{mt=null})),mt}function Le(t,e,n){t.dispatchEvent(bi(`${e?"intro":"outro"}${n}`))}const Vt=new Set;let ye;function Pn(){ye={r:0,c:[],p:ye}}function Sn(){ye.r||he(ye.c),ye=ye.p}function z(t,e){t&&t.i&&(Vt.delete(t),t.i(e))}function Y(t,e,n,r){if(t&&t.o){if(Vt.has(t))return;Vt.add(t),ye.c.push(()=>{Vt.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const pr={duration:0};function Cs(t,e,n){const r={direction:"in"};let i=e(t,n,r),s=!1,o,a,l=0;function f(){o&&Et(t,o)}function c(){const{delay:d=0,duration:h=300,easing:y=It,tick:g=J,css:b}=i||pr;b&&(o=St(t,0,1,h,d,y,b,l++)),g(0,1);const m=_n()+d,p=m+h;a&&a.abort(),s=!0,Ie(()=>Le(t,!0,"start")),a=wn(w=>{if(s){if(w>=p)return g(1,0),Le(t,!0,"end"),f(),s=!1;if(w>=m){const k=y((w-m)/h);g(k,1-k)}}return s})}let u=!1;return{start(){u||(u=!0,Et(t),Qe(i)?(i=i(r),yr().then(c)):c())},invalidate(){u=!1},end(){s&&(f(),s=!1)}}}function As(t,e,n){const r={direction:"out"};let i=e(t,n,r),s=!0,o;const a=ye;a.r+=1;let l;function f(){const{delay:c=0,duration:u=300,easing:d=It,tick:h=J,css:y}=i||pr;y&&(o=St(t,1,0,u,c,d,y));const g=_n()+c,b=g+u;Ie(()=>Le(t,!1,"start")),"inert"in t&&(l=t.inert,t.inert=!0),wn(m=>{if(s){if(m>=b)return h(0,1),Le(t,!1,"end"),--a.r||he(a.c),!1;if(m>=g){const p=d((m-g)/u);h(1-p,p)}}return s})}return Qe(i)?yr().then(()=>{i=i(r),f()}):f(),{end(c){c&&"inert"in t&&(t.inert=l),c&&i.tick&&i.tick(1,0),s&&(o&&Et(t,o),s=!1)}}}function Ir(t,e,n,r){let s=e(t,n,{direction:"both"}),o=r?0:1,a=null,l=null,f=null,c;function u(){f&&Et(t,f)}function d(y,g){const b=y.b-o;return g*=Math.abs(b),{a:o,b:y.b,d:b,duration:g,start:y.start,end:y.start+g,group:y.group}}function h(y){const{delay:g=0,duration:b=300,easing:m=It,tick:p=J,css:w}=s||pr,k={start:_n()+g,b:y};y||(k.group=ye,ye.r+=1),"inert"in t&&(y?c!==void 0&&(t.inert=c):(c=t.inert,t.inert=!0)),a||l?l=k:(w&&(u(),f=St(t,o,y,b,g,m,w)),y&&p(0,1),a=d(k,b),Ie(()=>Le(t,y,"start")),wn(P=>{if(l&&P>l.start&&(a=d(l,b),l=null,Le(t,a.b,"start"),w&&(u(),f=St(t,o,a.b,a.duration,0,m,s.css))),a){if(P>=a.end)p(o=a.b,1-o),Le(t,a.b,"end"),l||(a.b?u():--a.group.r||he(a.group.c)),a=null;else if(P>=a.start){const v=P-a.start;o=a.a+a.d*m(v/a.duration),p(o,1-o)}}return!!(a||l)}))}return{run(y){Qe(s)?yr().then(()=>{s=s({direction:y?"in":"out"}),h(y)}):h(y)},end(){u(),a=l=null}}}function on(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Os(t,e){t.d(1),e.delete(t.key)}function Ds(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function Ts(t,e){t.f(),Ds(t,e)}function wi(t,e,n,r,i,s,o,a,l,f,c,u){let d=t.length,h=s.length,y=d;const g={};for(;y--;)g[t[y].key]=y;const b=[],m=new Map,p=new Map,w=[];for(y=h;y--;){const _=u(i,s,y),x=n(_);let S=o.get(x);S?r&&w.push(()=>S.p(_,e)):(S=f(x,_),S.c()),m.set(x,b[y]=S),x in g&&p.set(x,Math.abs(y-g[x]))}const k=new Set,P=new Set;function v(_){z(_,1),_.m(a,c),o.set(_.key,_),c=_.first,h--}for(;d&&h;){const _=b[h-1],x=t[d-1],S=_.key,j=x.key;_===x?(c=_.first,d--,h--):m.has(j)?!o.has(S)||k.has(S)?v(_):P.has(j)?d--:p.get(S)>p.get(j)?(P.add(S),v(_)):(k.add(j),d--):(l(x,o),d--)}for(;d--;){const _=t[d];m.has(_.key)||l(_,o)}for(;h;)v(b[h-1]);return he(w),b}function ki(t,e){const n={},r={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],a=e[s];if(a){for(const l in o)l in a||(r[l]=1);for(const l in a)i[l]||(n[l]=a[l],i[l]=1);t[s]=a}else for(const l in o)i[l]=1}for(const o in r)o in n||(n[o]=void 0);return n}function an(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function pe(t){t&&t.c()}function ce(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ie(()=>{const s=t.$$.on_mount.map(fi).filter(Qe);t.$$.on_destroy?t.$$.on_destroy.push(...s):he(s),t.$$.on_mount=[]}),i.forEach(Ie)}function fe(t,e){const n=t.$$;n.fragment!==null&&(xs(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ks(t,e){t.$$.dirty[0]===-1&&(rt.push(t),Ss(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ae(t,e,n,r,i,s,o,a=[-1]){const l=xt;bt(t);const f=t.$$={fragment:null,ctx:[],props:s,update:J,not_equal:i,bound:jr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:jr(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(f.root);let c=!1;if(f.ctx=n?n(t,e.props||{},(u,d,...h)=>{const y=h.length?h[0]:d;return f.ctx&&i(f.ctx[u],f.ctx[u]=y)&&(!f.skip_bound&&f.bound[u]&&f.bound[u](y),c&&Ks(t,u)),d}):[],f.update(),c=!0,he(f.before_update),f.fragment=r?r(f.ctx):!1,e.target){if(e.hydrate){const u=gs(e.target);f.fragment&&f.fragment.l(u),u.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&z(t.$$.fragment),ce(t,e.target,e.anchor),_i()}bt(l)}class Oe{constructor(){An(this,"$$");An(this,"$$set")}$destroy(){fe(this,1),this.$destroy=J}$on(e,n){if(!Qe(n))return J;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!ls(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const js="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(js);const et=[];function br(t,e=J){let n;const r=new Set;function i(a){if(ve(t,a)&&(t=a,n)){const l=!et.length;for(const f of r)f[1](),et.push(f,t);if(l){for(let f=0;f<et.length;f+=2)et[f][0](et[f+1]);et.length=0}}}function s(a){i(a(t))}function o(a,l=J){const f=[a,l];return r.add(f),r.size===1&&(n=e(i,s)||J),a(t),()=>{r.delete(f),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}const Is={message:"Missing Toast Message",autohide:!0,timeout:5e3};function Rs(){const t=Math.random();return Number(t).toString(32)}function Rr(t){if(t.autohide===!0)return setTimeout(()=>{Fe.close(t.id)},t.timeout)}function Bs(){const{subscribe:t,set:e,update:n}=br([]);return{subscribe:t,trigger:r=>{const i=Rs();return n(s=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const o={...Is,...r,id:i};return o.timeoutId=Rr(o),s.push(o),s}),i},close:r=>n(i=>{if(i.length>0){const s=i.findIndex(a=>a.id===r),o=i[s];o&&(o.callback&&o.callback({id:r,status:"closed"}),o.timeoutId&&clearTimeout(o.timeoutId),i.splice(s,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=Rr(i[r])),i)),clear:()=>e([])}}const Fe=Bs(),Dn={};function Br(t){return t==="local"?localStorage:sessionStorage}function vr(t,e,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function s(o,a){Br(i).setItem(o,r.stringify(a))}if(!Dn[t]){const o=br(e,f=>{const c=Br(i).getItem(t);c&&f(r.parse(c));{const u=d=>{d.key===t&&f(d.newValue?r.parse(d.newValue):null)};return window.addEventListener("storage",u),()=>window.removeEventListener("storage",u)}}),{subscribe:a,set:l}=o;Dn[t]={set(f){s(t,f),l(f)},update(f){const c=f(hr(o));s(t,c),l(c)},subscribe:a}}return Dn[t]}vr("modeOsPrefers",!1);vr("modeUserPrefers",void 0);vr("modeCurrent",!1);function Ms(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function Pi(t){const e=t-1;return e*e*e+1}function Mr(t,{delay:e=0,duration:n=400,easing:r=It}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:s=>`opacity: ${s*i}`}}function Ns({fallback:t,...e}){const n=new Map,r=new Map;function i(o,a,l){const{delay:f=0,duration:c=v=>Math.sqrt(v)*30,easing:u=Pi}=oe(oe({},e),l),d=o.getBoundingClientRect(),h=a.getBoundingClientRect(),y=d.left-h.left,g=d.top-h.top,b=d.width/h.width,m=d.height/h.height,p=Math.sqrt(y*y+g*g),w=getComputedStyle(a),k=w.transform==="none"?"":w.transform,P=+w.opacity;return{delay:f,duration:Qe(c)?c(p):c,easing:u,css:(v,_)=>`
				opacity: ${v*P};
				transform-origin: top left;
				transform: ${k} translate(${_*y}px,${_*g}px) scale(${v+(1-v)*b}, ${v+(1-v)*m});
			`}}function s(o,a,l){return(f,c)=>(o.set(c.key,f),()=>{if(a.has(c.key)){const u=a.get(c.key);return a.delete(c.key),i(u,f,c)}return o.delete(c.key),t&&t(f,c,l)})}return[s(r,n,!1),s(n,r,!0)]}function Fs(t,{from:e,to:n},r={}){const i=getComputedStyle(t),s=i.transform==="none"?"":i.transform,[o,a]=i.transformOrigin.split(" ").map(parseFloat),l=e.left+e.width*o/n.width-(n.left+o),f=e.top+e.height*a/n.height-(n.top+a),{delay:c=0,duration:u=h=>Math.sqrt(h)*120,easing:d=Pi}=r;return{delay:c,duration:Qe(u)?u(Math.sqrt(l*l+f*f)):u,easing:d,css:(h,y)=>{const g=y*l,b=y*f,m=h+y*e.width/n.width,p=h+y*e.height/n.height;return`transform: ${s} translate(${g}px, ${b}px) scale(${m}, ${p});`}}}function qs(t){let e,n,r;const i=t[13].default,s=yn(i,t,t[12],null);return{c(){e=R("div"),s&&s.c(),E(e,"class",n="radio-group "+t[1]),E(e,"data-testid","radio-group"),E(e,"role","radiogroup"),E(e,"aria-labelledby",t[0])},m(o,a){F(o,e,a),s&&s.m(e,null),r=!0},p(o,[a]){s&&s.p&&(!r||a&4096)&&bn(s,i,o,o[12],r?pn(i,o[12],a,null):vn(o[12]),null),(!r||a&2&&n!==(n="radio-group "+o[1]))&&E(e,"class",n),(!r||a&1)&&E(e,"aria-labelledby",o[0])},i(o){r||(z(s,o),r=!0)},o(o){Y(s,o),r=!1},d(o){o&&M(e),s&&s.d(o)}}}const Ls="p-1";function zs(t,e,n){let r,{$$slots:i={},$$scope:s}=e,{display:o="inline-flex"}=e,{background:a="bg-surface-200-700-token"}=e,{border:l="border-token border-surface-400-500-token"}=e,{spacing:f=""}=e,{rounded:c="rounded-token"}=e,{padding:u="px-4 py-1"}=e,{active:d="variant-filled"}=e,{hover:h="hover:variant-soft"}=e,{color:y=""}=e,{fill:g=""}=e,{labelledby:b=""}=e;return Je("rounded",c),Je("padding",u),Je("active",d),Je("hover",h),Je("color",y),Je("fill",g),t.$$set=m=>{n(14,e=oe(oe({},e),je(m))),"display"in m&&n(3,o=m.display),"background"in m&&n(4,a=m.background),"border"in m&&n(5,l=m.border),"spacing"in m&&n(2,f=m.spacing),"rounded"in m&&n(6,c=m.rounded),"padding"in m&&n(7,u=m.padding),"active"in m&&n(8,d=m.active),"hover"in m&&n(9,h=m.hover),"color"in m&&n(10,y=m.color),"fill"in m&&n(11,g=m.fill),"labelledby"in m&&n(0,b=m.labelledby),"$$scope"in m&&n(12,s=m.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&n(2,f=`${o.includes("flex-col")?"":"space-x-1"}`),n(1,r=`${Ls} ${o} ${a} ${l} ${f} ${c} ${e.class??""}`)},e=je(e),[b,r,f,o,a,l,c,u,d,h,y,g,s,i]}class Us extends Oe{constructor(e){super(),Ae(this,e,zs,qs,ve,{display:3,background:4,border:5,spacing:2,rounded:6,padding:7,active:8,hover:9,color:10,fill:11,labelledby:0})}}function Ws(t){let e,n,r,i,s,o,a,l,f,c,u=[{type:"radio"},{name:t[1]},{__value:t[2]},t[9](),{tabindex:"-1"}],d={};for(let g=0;g<u.length;g+=1)d=oe(d,u[g]);const h=t[19].default,y=yn(h,t,t[18],null);return l=ms(t[27][0]),{c(){e=R("label"),n=R("div"),r=R("div"),i=R("input"),s=Z(),y&&y.c(),tn(i,d),E(r,"class","h-0 w-0 overflow-hidden"),E(n,"class",o="radio-item "+t[7]),E(n,"data-testid","radio-item"),E(n,"role","radio"),E(n,"aria-checked",t[5]),E(n,"aria-label",t[4]),E(n,"tabindex","0"),E(n,"title",t[3]),l.p(i)},m(g,b){F(g,e,b),B(e,n),B(n,r),B(r,i),i.autofocus&&i.focus(),t[25](i),i.checked=i.__value===t[0],B(n,s),y&&y.m(n,null),a=!0,f||(c=[V(i,"change",t[26]),V(i,"click",t[23]),V(i,"change",t[24]),V(n,"keydown",t[8]),V(n,"keydown",t[20]),V(n,"keyup",t[21]),V(n,"keypress",t[22])],f=!0)},p(g,[b]){tn(i,d=ki(u,[{type:"radio"},(!a||b&2)&&{name:g[1]},(!a||b&4)&&{__value:g[2]},g[9](),{tabindex:"-1"}])),b&1&&(i.checked=i.__value===g[0]),y&&y.p&&(!a||b&262144)&&bn(y,h,g,g[18],a?pn(h,g[18],b,null):vn(g[18]),null),(!a||b&128&&o!==(o="radio-item "+g[7]))&&E(n,"class",o),(!a||b&32)&&E(n,"aria-checked",g[5]),(!a||b&16)&&E(n,"aria-label",g[4]),(!a||b&8)&&E(n,"title",g[3])},i(g){a||(z(y,g),a=!0)},o(g){Y(y,g),a=!1},d(g){g&&M(e),t[25](null),y&&y.d(g),l.r(),f=!1,he(c)}}}const Vs="flex-auto text-base text-center cursor-pointer",Ys="opacity-50 cursor-not-allowed";function Hs(t,e,n){let r,i,s,o;const a=["group","name","value","title","label","rounded","padding","active","hover","color","fill"];let l=en(e,a),{$$slots:f={},$$scope:c}=e,{group:u}=e,{name:d}=e,{value:h}=e,{title:y=""}=e,{label:g=""}=e,{rounded:b=Ze("rounded")}=e,{padding:m=Ze("padding")}=e,{active:p=Ze("active")}=e,{hover:w=Ze("hover")}=e,{color:k=Ze("color")}=e,{fill:P=Ze("fill")}=e,v;function _(O){["Enter","Space"].includes(O.code)&&(O.preventDefault(),v.click())}function x(){return delete l.class,l}const S=[[]];function j(O){se.call(this,t,O)}function I(O){se.call(this,t,O)}function H(O){se.call(this,t,O)}function W(O){se.call(this,t,O)}function N(O){se.call(this,t,O)}function le(O){Ye[O?"unshift":"push"](()=>{v=O,n(6,v)})}function ue(){u=this.__value,n(0,u)}return t.$$set=O=>{n(29,e=oe(oe({},e),je(O))),n(28,l=en(e,a)),"group"in O&&n(0,u=O.group),"name"in O&&n(1,d=O.name),"value"in O&&n(2,h=O.value),"title"in O&&n(3,y=O.title),"label"in O&&n(4,g=O.label),"rounded"in O&&n(10,b=O.rounded),"padding"in O&&n(11,m=O.padding),"active"in O&&n(12,p=O.active),"hover"in O&&n(13,w=O.hover),"color"in O&&n(14,k=O.color),"fill"in O&&n(15,P=O.fill),"$$scope"in O&&n(18,c=O.$$scope)},t.$$.update=()=>{t.$$.dirty&5&&n(5,r=h===u),t.$$.dirty&61472&&n(17,i=r?`${p} ${k} ${P}`:w),n(16,s=e.disabled?Ys:""),n(7,o=`${Vs} ${m} ${b} ${i} ${s} ${e.class??""}`)},e=je(e),[u,d,h,y,g,r,v,o,_,x,b,m,p,w,k,P,s,i,c,f,j,I,H,W,N,le,ue,S]}class Nr extends Oe{constructor(e){super(),Ae(this,e,Hs,Ws,ve,{group:0,name:1,value:2,title:3,label:4,rounded:10,padding:11,active:12,hover:13,color:14,fill:15})}}function Fr(t){let e,n;const r=t[22].default,i=yn(r,t,t[21],null);return{c(){e=R("div"),i&&i.c(),E(e,"class","slide-toggle-text ml-3")},m(s,o){F(s,e,o),i&&i.m(e,null),n=!0},p(s,o){i&&i.p&&(!n||o[0]&2097152)&&bn(i,r,s,s[21],n?pn(r,s[21],o,null):vn(s[21]),null)},i(s){n||(z(i,s),n=!0)},o(s){Y(i,s),n=!1},d(s){s&&M(e),i&&i.d(s)}}}function Gs(t){let e,n,r,i,s,o,a,l,f,c,u,d,h,y,g,b=[{type:"checkbox"},{class:"slide-toggle-input hidden"},{name:t[1]},t[8](),{disabled:i=t[9].disabled}],m={};for(let w=0;w<b.length;w+=1)m=oe(m,b[w]);let p=t[10].default&&Fr(t);return{c(){e=R("div"),n=R("label"),r=R("input"),s=Z(),o=R("div"),a=R("div"),c=Z(),p&&p.c(),tn(r,m),E(a,"class",l="slide-toggle-thumb "+t[3]),re(a,"cursor-not-allowed",t[9].disabled),E(o,"class",f="slide-toggle-track "+t[4]),re(o,"cursor-not-allowed",t[9].disabled),E(n,"class",u="slide-toggle-label "+t[5]),E(e,"id",t[2]),E(e,"class",d="slide-toggle "+t[6]),E(e,"data-testid","slide-toggle"),E(e,"role","switch"),E(e,"aria-label",t[2]),E(e,"aria-checked",t[0]),E(e,"tabindex","0")},m(w,k){F(w,e,k),B(e,n),B(n,r),r.autofocus&&r.focus(),r.checked=t[0],B(n,s),B(n,o),B(o,a),B(n,c),p&&p.m(n,null),h=!0,y||(g=[V(r,"change",t[31]),V(r,"click",t[23]),V(r,"keydown",t[24]),V(r,"keyup",t[25]),V(r,"keypress",t[26]),V(r,"mouseover",t[27]),V(r,"change",t[28]),V(r,"focus",t[29]),V(r,"blur",t[30]),V(e,"keydown",t[7])],y=!0)},p(w,k){tn(r,m=ki(b,[{type:"checkbox"},{class:"slide-toggle-input hidden"},(!h||k[0]&2)&&{name:w[1]},w[8](),(!h||k[0]&512&&i!==(i=w[9].disabled))&&{disabled:i}])),k[0]&1&&(r.checked=w[0]),(!h||k[0]&8&&l!==(l="slide-toggle-thumb "+w[3]))&&E(a,"class",l),(!h||k[0]&520)&&re(a,"cursor-not-allowed",w[9].disabled),(!h||k[0]&16&&f!==(f="slide-toggle-track "+w[4]))&&E(o,"class",f),(!h||k[0]&528)&&re(o,"cursor-not-allowed",w[9].disabled),w[10].default?p?(p.p(w,k),k[0]&1024&&z(p,1)):(p=Fr(w),p.c(),z(p,1),p.m(n,null)):p&&(Pn(),Y(p,1,1,()=>{p=null}),Sn()),(!h||k[0]&32&&u!==(u="slide-toggle-label "+w[5]))&&E(n,"class",u),(!h||k[0]&4)&&E(e,"id",w[2]),(!h||k[0]&64&&d!==(d="slide-toggle "+w[6]))&&E(e,"class",d),(!h||k[0]&4)&&E(e,"aria-label",w[2]),(!h||k[0]&1)&&E(e,"aria-checked",w[0])},i(w){h||(z(p),h=!0)},o(w){Y(p),h=!1},d(w){w&&M(e),p&&p.d(),y=!1,he(g)}}}const Qs="inline-block",Xs="unstyled flex items-center",Js="flex transition-all duration-[200ms] cursor-pointer",Zs="w-[50%] h-full scale-[0.8] transition-all duration-[200ms] shadow";function $s(t,e,n){let r,i,s,o,a,l,f,c;const u=["name","checked","size","background","active","border","rounded","label"];let d=en(e,u),{$$slots:h={},$$scope:y}=e;const g=us(h),b=ks();let{name:m}=e,{checked:p=!1}=e,{size:w="md"}=e,{background:k="bg-surface-400 dark:bg-surface-700"}=e,{active:P="bg-surface-900 dark:bg-surface-300"}=e,{border:v=""}=e,{rounded:_="rounded-full"}=e,{label:x=""}=e,S;switch(w){case"sm":S="w-12 h-6";break;case"lg":S="w-20 h-10";break;default:S="w-16 h-8"}function j(K){["Enter","Space"].includes(K.code)&&(K.preventDefault(),b("keyup",K),K.currentTarget.firstChild.click())}function I(){return delete d.class,d}function H(K){se.call(this,t,K)}function W(K){se.call(this,t,K)}function N(K){se.call(this,t,K)}function le(K){se.call(this,t,K)}function ue(K){se.call(this,t,K)}function O(K){se.call(this,t,K)}function A(K){se.call(this,t,K)}function Q(K){se.call(this,t,K)}function me(){p=this.checked,n(0,p)}return t.$$set=K=>{n(9,e=oe(oe({},e),je(K))),n(33,d=en(e,u)),"name"in K&&n(1,m=K.name),"checked"in K&&n(0,p=K.checked),"size"in K&&n(11,w=K.size),"background"in K&&n(12,k=K.background),"active"in K&&n(13,P=K.active),"border"in K&&n(14,v=K.border),"rounded"in K&&n(15,_=K.rounded),"label"in K&&n(2,x=K.label),"$$scope"in K&&n(21,y=K.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&12289&&n(19,r=p?P:`${k} cursor-pointer`),t.$$.dirty[0]&1&&n(18,i=p?"bg-white/75":"bg-white"),t.$$.dirty[0]&1&&n(17,s=p?"translate-x-full":""),n(20,o=e.disabled===!0?"opacity-50":"hover:brightness-[105%] dark:hover:brightness-110 cursor-pointer"),n(6,a=`${Qs} ${_} ${o} ${e.class??""}`),t.$$.dirty[0]&638976&&n(4,f=`${Js} ${v} ${_} ${S} ${r}`),t.$$.dirty[0]&425984&&n(3,c=`${Zs} ${_} ${i} ${s}`)},n(5,l=`${Xs}`),e=je(e),[p,m,x,c,f,l,a,j,I,e,g,w,k,P,v,_,S,s,i,r,o,y,h,H,W,N,le,ue,O,A,Q,me]}class eo extends Oe{constructor(e){super(),Ae(this,e,$s,Gs,ve,{name:1,checked:0,size:11,background:12,active:13,border:14,rounded:15,label:2},null,[-1,-1])}}function qr(t,e,n){const r=t.slice();return r[32]=e[n],r[34]=n,r}function Lr(t){let e,n,r=[],i=new Map,s,o,a,l=on(t[6]);const f=c=>c[32];for(let c=0;c<l.length;c+=1){let u=qr(t,l,c),d=f(u);i.set(d,r[c]=Vr(d,u))}return{c(){e=R("div"),n=R("div");for(let c=0;c<r.length;c+=1)r[c].c();E(n,"class",s="snackbar "+t[8]),E(e,"class",o="snackbar-wrapper "+t[9]),E(e,"data-testid","snackbar-wrapper")},m(c,u){F(c,e,u),B(e,n);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(n,null);a=!0},p(c,u){if(u[0]&7390){l=on(c[6]),Pn();for(let d=0;d<r.length;d+=1)r[d].r();r=wi(r,u,f,1,c,l,i,n,Ts,Vr,null,qr);for(let d=0;d<r.length;d+=1)r[d].a();Sn()}(!a||u[0]&256&&s!==(s="snackbar "+c[8]))&&E(n,"class",s),(!a||u[0]&512&&o!==(o="snackbar-wrapper "+c[9]))&&E(e,"class",o)},i(c){if(!a){for(let u=0;u<l.length;u+=1)z(r[u]);a=!0}},o(c){for(let u=0;u<r.length;u+=1)Y(r[u]);a=!1},d(c){c&&M(e);for(let u=0;u<r.length;u+=1)r[u].d()}}}function zr(t){let e,n,r=t[32].action&&Ur(t),i=!t[32].hideDismiss&&Wr(t);return{c(){e=R("div"),r&&r.c(),n=Z(),i&&i.c(),E(e,"class","toast-actions "+so)},m(s,o){F(s,e,o),r&&r.m(e,null),B(e,n),i&&i.m(e,null)},p(s,o){s[32].action?r?r.p(s,o):(r=Ur(s),r.c(),r.m(e,n)):r&&(r.d(1),r=null),s[32].hideDismiss?i&&(i.d(1),i=null):i?i.p(s,o):(i=Wr(s),i.c(),i.m(e,null))},d(s){s&&M(e),r&&r.d(),i&&i.d()}}}function Ur(t){let e,n=t[32].action.label+"",r,i;function s(){return t[26](t[34])}return{c(){e=R("button"),E(e,"class",t[2])},m(o,a){F(o,e,a),e.innerHTML=n,r||(i=V(e,"click",s),r=!0)},p(o,a){t=o,a[0]&64&&n!==(n=t[32].action.label+"")&&(e.innerHTML=n),a[0]&4&&E(e,"class",t[2])},d(o){o&&M(e),r=!1,i()}}}function Wr(t){let e,n,r,i;function s(){return t[27](t[32])}return{c(){e=R("button"),n=be(t[4]),E(e,"class",t[3]),E(e,"aria-label","Dismiss toast")},m(o,a){F(o,e,a),B(e,n),r||(i=V(e,"click",s),r=!0)},p(o,a){t=o,a[0]&16&&gr(n,t[4]),a[0]&8&&E(e,"class",t[3])},d(o){o&&M(e),r=!1,i()}}}function Vr(t,e){let n,r,i,s=e[32].message+"",o,a,l,f,c,u,d,h=J,y,g,b,m=(e[32].action||!e[32].hideDismiss)&&zr(e);function p(){return e[28](e[34])}function w(){return e[29](e[34])}return{key:t,first:null,c(){n=R("div"),r=R("div"),i=R("div"),o=Z(),m&&m.c(),l=Z(),E(i,"class","text-base"),E(r,"class",a="toast "+e[7]+" "+(e[32].background??e[1])+" "+(e[32].classes??"")),E(r,"data-testid","toast"),E(n,"role",f=e[32].hideDismiss?"alert":"alertdialog"),E(n,"aria-live","polite"),this.first=n},m(k,P){F(k,n,P),B(n,r),B(r,i),i.innerHTML=s,B(r,o),m&&m.m(r,null),B(n,l),y=!0,g||(b=[V(n,"mouseenter",p),V(n,"mouseleave",w)],g=!0)},p(k,P){e=k,(!y||P[0]&64)&&s!==(s=e[32].message+"")&&(i.innerHTML=s),e[32].action||!e[32].hideDismiss?m?m.p(e,P):(m=zr(e),m.c(),m.m(r,null)):m&&(m.d(1),m=null),(!y||P[0]&194&&a!==(a="toast "+e[7]+" "+(e[32].background??e[1])+" "+(e[32].classes??"")))&&E(r,"class",a),(!y||P[0]&64&&f!==(f=e[32].hideDismiss?"alert":"alertdialog"))&&E(n,"role",f)},r(){d=n.getBoundingClientRect()},f(){_s(n),h(),vi(n,d)},a(){h(),h=vs(n,d,Fs,{duration:e[0]})},i(k){y||(Ie(()=>{y&&(u&&u.end(1),c=Cs(n,e[14],{key:e[32].id}),c.start())}),y=!0)},o(k){c&&c.invalidate(),u=As(n,e[13],{key:e[32].id}),y=!1},d(k){k&&M(n),m&&m.d(),k&&u&&u.end(),g=!1,he(b)}}}function to(t){let e,n,r=t[5].length&&Lr(t);return{c(){r&&r.c(),e=ds()},m(i,s){r&&r.m(i,s),F(i,e,s),n=!0},p(i,s){i[5].length?r?(r.p(i,s),s[0]&32&&z(r,1)):(r=Lr(i),r.c(),z(r,1),r.m(e.parentNode,e)):r&&(Pn(),Y(r,1,1,()=>{r=null}),Sn())},i(i){n||(z(r),n=!0)},o(i){Y(r),n=!1},d(i){i&&M(e),r&&r.d(i)}}}const no="flex fixed top-0 left-0 right-0 bottom-0 pointer-events-none",ro="flex flex-col gap-y-2",io="flex justify-between items-center pointer-events-auto",so="flex items-center space-x-2";function oo(t,e,n){let r,i,s,o,a;hi(t,Fe,A=>n(5,a=A));let{position:l="b"}=e,{max:f=3}=e,{duration:c=250}=e,{background:u="variant-filled-secondary"}=e,{width:d="max-w-[640px]"}=e,{color:h=""}=e,{padding:y="p-4"}=e,{spacing:g="space-x-4"}=e,{rounded:b="rounded-container-token"}=e,{shadow:m="shadow-lg"}=e,{zIndex:p="z-[888]"}=e,{buttonAction:w="btn variant-filled"}=e,{buttonDismiss:k="btn-icon btn-icon-sm variant-filled"}=e,{buttonDismissLabel:P="âœ•"}=e,v,_,x={x:0,y:0};switch(l){case"t":v="justify-center items-start",_="items-center",x={x:0,y:-100};break;case"b":v="justify-center items-end",_="items-center",x={x:0,y:100};break;case"l":v="justify-start items-center",_="items-start",x={x:-100,y:0};break;case"r":v="justify-end items-center",_="items-end",x={x:100,y:0};break;case"tl":v="justify-start items-start",_="items-start",x={x:-100,y:0};break;case"tr":v="justify-end items-start",_="items-end",x={x:100,y:0};break;case"bl":v="justify-start items-end",_="items-start",x={x:-100,y:0};break;case"br":v="justify-end items-end",_="items-end",x={x:100,y:0};break}function S(A){var Q,me;(me=(Q=a[A])==null?void 0:Q.action)==null||me.response(),Fe.close(a[A].id)}function j(A){var Q;(Q=a[A])!=null&&Q.hoverable&&(Fe.freeze(A),n(8,i+=" scale-[105%]"))}function I(A){var Q;(Q=a[A])!=null&&Q.hoverable&&(Fe.unfreeze(A),n(8,i=i.replace(" scale-[105%]","")))}const[H,W]=Ns({duration:A=>Math.sqrt(A*c),fallback(A){const Q=getComputedStyle(A),me=Q.transform==="none"?"":Q.transform;return{duration:c,easing:Ms,css:(K,Cn)=>`
					transform: ${me} scale(${K}) translate(${Cn*x.x}%, ${Cn*x.y}%);
					opacity: ${K}
				`}}}),N=A=>S(A),le=A=>Fe.close(A.id),ue=A=>j(A),O=A=>I(A);return t.$$set=A=>{n(31,e=oe(oe({},e),je(A))),"position"in A&&n(15,l=A.position),"max"in A&&n(16,f=A.max),"duration"in A&&n(0,c=A.duration),"background"in A&&n(1,u=A.background),"width"in A&&n(17,d=A.width),"color"in A&&n(18,h=A.color),"padding"in A&&n(19,y=A.padding),"spacing"in A&&n(20,g=A.spacing),"rounded"in A&&n(21,b=A.rounded),"shadow"in A&&n(22,m=A.shadow),"zIndex"in A&&n(23,p=A.zIndex),"buttonAction"in A&&n(2,w=A.buttonAction),"buttonDismiss"in A&&n(3,k=A.buttonDismiss),"buttonDismissLabel"in A&&n(4,P=A.buttonDismissLabel)},t.$$.update=()=>{n(9,r=`${no} ${v} ${p} ${e.class||""}`),t.$$.dirty[0]&34078720&&n(8,i=`${ro} ${_} ${y}`),t.$$.dirty[0]&8257536&&n(7,s=`${io} ${d} ${h} ${y} ${g} ${b} ${m}`),t.$$.dirty[0]&65568&&n(6,o=Array.from(a).slice(0,f))},e=je(e),[c,u,w,k,P,a,o,s,i,r,S,j,I,H,W,l,f,d,h,y,g,b,m,p,v,_,N,le,ue,O]}class ao extends Oe{constructor(e){super(),Ae(this,e,oo,to,ve,{position:15,max:16,duration:0,background:1,width:17,color:18,padding:19,spacing:20,rounded:21,shadow:22,zIndex:23,buttonAction:2,buttonDismiss:3,buttonDismissLabel:4},null,[-1,-1])}}function Yr(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Hr(t,e){let n,r,i,s,o,a=e[7]+"",l,f;return{key:t,first:null,c(){n=R("span"),r=R("span"),i=be("?"),o=Z(),l=be(a),f=Z(),E(r,"class",s=`${e[3]} ${e[6][e[9]]}`),re(r,"translate-y-full",e[5]),re(r,"h-full",e[4]),re(r,"hidden",!e[4]),E(n,"class",e[2]),this.first=n},m(c,u){F(c,n,u),B(n,r),B(r,i),B(n,o),B(n,l),B(n,f)},p(c,u){e=c,u&9&&s!==(s=`${e[3]} ${e[6][e[9]]}`)&&E(r,"class",s),u&41&&re(r,"translate-y-full",e[5]),u&25&&re(r,"h-full",e[4]),u&25&&re(r,"hidden",!e[4]),u&1&&a!==(a=e[7]+"")&&gr(l,a),u&4&&E(n,"class",e[2])},d(c){c&&M(n)}}}function lo(t){let e,n=[],r=new Map,i=on(t[0]);const s=o=>o[7];for(let o=0;o<i.length;o+=1){let a=Yr(t,i,o),l=s(a);r.set(l,n[o]=Hr(l,a))}return{c(){e=R("div");for(let o=0;o<n.length;o+=1)n[o].c();E(e,"class",t[1])},m(o,a){F(o,e,a);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null)},p(o,[a]){a&125&&(i=on(o[0]),n=wi(n,a,s,1,o,i,r,e,Os,Hr,null,Yr)),a&2&&E(e,"class",o[1])},i:J,o:J,d(o){o&&M(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function uo(t,e,n){let{data:r}=e,{wrapStyles:i}=e,{chipStyles:s}=e,{coverStyles:o}=e,{hide:a=!1}=e,{show:l=!1}=e;const f=["delay-0","delay-75","delay-100","delay-150","delay-200","delay-300","delay-500","delay-700","delay-1000"];return t.$$set=c=>{"data"in c&&n(0,r=c.data),"wrapStyles"in c&&n(1,i=c.wrapStyles),"chipStyles"in c&&n(2,s=c.chipStyles),"coverStyles"in c&&n(3,o=c.coverStyles),"hide"in c&&n(4,a=c.hide),"show"in c&&n(5,l=c.show)},[r,i,s,o,a,l,f]}class Gr extends Oe{constructor(e){super(),Ae(this,e,uo,lo,ve,{data:0,wrapStyles:1,chipStyles:2,coverStyles:3,hide:4,show:5})}}function co(t){let e,n,r,i,s,o,a,l;function f(u){t[1](u)}let c={name:"slide",class:"bg-slate-500 hover:brightness-95 focus:brightness-95 align-middle mx-2 ",active:"bg-pink-500",size:"sm"};return t[0]!==void 0&&(c.checked=t[0]),i=new eo({props:c}),Ye.push(()=>an(i,"checked",f)),{c(){e=R("div"),n=R("span"),n.textContent="hide",r=Z(),pe(i.$$.fragment),o=Z(),a=R("span"),a.textContent="show",E(n,"class","chip bg-slate-500 text-white cursor-default !filter-none"),re(n,"opacity-30",t[0]),E(a,"class","chip bg-pink-500 text-white cursor-default !filter-none"),re(a,"opacity-30",!t[0])},m(u,d){F(u,e,d),B(e,n),B(e,r),ce(i,e,null),B(e,o),B(e,a),l=!0},p(u,[d]){(!l||d&1)&&re(n,"opacity-30",u[0]);const h={};!s&&d&1&&(s=!0,h.checked=u[0],sn(()=>s=!1)),i.$set(h),(!l||d&1)&&re(a,"opacity-30",!u[0])},i(u){l||(z(i.$$.fragment,u),l=!0)},o(u){Y(i.$$.fragment,u),l=!1},d(u){u&&M(e),fe(i)}}}function fo(t,e,n){let{showPracticeTarget:r}=e;function i(s){r=s,n(0,r)}return t.$$set=s=>{"showPracticeTarget"in s&&n(0,r=s.showPracticeTarget)},[r,i]}class ho extends Oe{constructor(e){super(),Ae(this,e,fo,co,ve,{showPracticeTarget:0})}}const L=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,G=Object.keys,ee=Array.isArray;function ne(t,e){return typeof e!="object"||G(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||L.Promise||(L.Promise=Promise);const Ct=Object.getPrototypeOf,mo={}.hasOwnProperty;function ae(t,e){return mo.call(t,e)}function ct(t,e){typeof e=="function"&&(e=e(Ct(t))),(typeof Reflect>"u"?G:Reflect.ownKeys)(e).forEach(n=>{Ee(t,n,e[n])})}const Si=Object.defineProperty;function Ee(t,e,n,r){Si(t,e,ne(n&&ae(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function at(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ee(t.prototype,"constructor",t),{extend:ct.bind(null,t.prototype)}}}}const go=Object.getOwnPropertyDescriptor;function _r(t,e){let n;return go(t,e)||(n=Ct(t))&&_r(n,e)}const yo=[].slice;function ln(t,e,n){return yo.call(t,e,n)}function Ei(t,e){return e(t)}function yt(t){if(!t)throw new Error("Assertion Failed")}function xi(t){L.setImmediate?setImmediate(t):setTimeout(t,0)}function Ci(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function xe(t,e){if(ae(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=xe(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:xe(a,e.substr(o+1))}}function de(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){yt(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)de(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?ee(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&ae(t,o)||(l=t[o]={}),de(l,a,n)}}else n===void 0?ee(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Ai(t){var e={};for(var n in t)ae(t,n)&&(e[n]=t[n]);return e}const po=[].concat;function Oi(t){return po.apply([],t)}const Di="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Oi([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>L[t]),bo=Di.map(t=>L[t]);Ci(Di,t=>[t,!0]);let Te=null;function Rt(t){Te=typeof WeakMap<"u"&&new WeakMap;const e=qn(t);return Te=null,e}function qn(t){if(!t||typeof t!="object")return t;let e=Te&&Te.get(t);if(e)return e;if(ee(t)){e=[],Te&&Te.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(qn(t[n]))}else if(bo.indexOf(t.constructor)>=0)e=t;else{const s=Ct(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Te&&Te.set(t,e),t)ae(t,i)&&(e[i]=qn(t[i]))}return e}const{toString:vo}={};function Ln(t){return vo.call(t).slice(8,-1)}const zn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_o=typeof zn=="symbol"?function(t){var e;return t!=null&&(e=t[zn])&&e.apply(t)}:function(){return null},it={};function Pe(t){var e,n,r,i;if(arguments.length===1){if(ee(t))return t.slice();if(this===it&&typeof t=="string")return[t];if(i=_o(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const wr=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var _e=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ti(t,e){_e=t,Ki=e}var Ki=()=>!0;const wo=!new Error("").stack;function Xe(){if(wo)try{throw Xe.arguments,new Error}catch(t){return t}return new Error}function Un(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(Ki).map(r=>`
`+r).join("")):""}var ji=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],kr=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ji),ko={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function lt(t,e){this._e=Xe(),this.name=t,this.message=e}function Ii(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function un(t,e,n,r){this._e=Xe(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=Ii(t,e)}function vt(t,e){this._e=Xe(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=Ii(t,e)}at(lt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Un(this._e,2))}},toString:function(){return this.name+": "+this.message}}),at(un).from(lt),at(vt).from(lt);var Pr=kr.reduce((t,e)=>(t[e]=e+"Error",t),{});const Po=lt;var T=kr.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=Xe(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=ko[e]||n,this.inner=null)}return at(r).from(Po),t[e]=r,t},{});T.Syntax=SyntaxError,T.Type=TypeError,T.Range=RangeError;var Qr=ji.reduce((t,e)=>(t[e+"Error"]=T[e],t),{}),Yt=kr.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=T[e]),t),{});function q(){}function At(t){return t}function So(t,e){return t==null||t===At?e:function(n){return e(t(n))}}function He(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Eo(t,e){return t===q?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?He(r,this.onsuccess):r),i&&(this.onerror=this.onerror?He(i,this.onerror):i),s!==void 0?s:n}}function xo(t,e){return t===q?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?He(n,this.onsuccess):n),r&&(this.onerror=this.onerror?He(r,this.onerror):r)}}function Co(t,e){return t===q?e:function(n){var r=t.apply(this,arguments);ne(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?He(i,this.onsuccess):i),s&&(this.onerror=this.onerror?He(s,this.onerror):s),r===void 0?o===void 0?void 0:o:ne(r,o)}}function Ao(t,e){return t===q?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Sr(t,e){return t===q?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}Yt.ModifyError=un,Yt.DexieError=lt,Yt.BulkError=vt;var Ot={};const Ri=100,[Wn,cn,Vn]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Ct(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Ct(e),t]})(),Bi=cn&&cn.then,Ht=Wn&&Wn.constructor,Er=!!Vn;var Yn=!1,Oo=Vn?()=>{Vn.then(Nt)}:L.setImmediate?setImmediate.bind(null,Nt):L.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{Nt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(Nt,0)},_t=function(t,e){pt.push([t,e]),fn&&(Oo(),fn=!1)},Hn=!0,fn=!0,ze=[],Gt=[],Gn=null,Qn=At,ut={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Zr,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{Zr(t[0],t[1])}catch{}})}},D=ut,pt=[],Ue=0,Qt=[];function C(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=q,this._lib=!1;var e=this._PSD=D;if(_e&&(this._stackHolder=Xe(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ot)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Jn(this,this._value))}this._state=null,this._value=null,++e.ref,Ni(this,t)}const Xn={get:function(){var t=D,e=dn;function n(r,i){var s=!t.global&&(t!==D||e!==dn);const o=s&&!Ce();var a=new C((l,f)=>{xr(this,new Mi(hn(r,t,s,o),hn(i,t,s,o),l,f,t))});return _e&&Li(a,this),a}return n.prototype=Ot,n},set:function(t){Ee(this,"then",t&&t.prototype===Ot?Xn:{get:function(){return t},set:Xn.set})}};function Mi(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function Ni(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Bt();n&&typeof n.then=="function"?Ni(t,(i,s)=>{n instanceof C?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,Fi(t)),r&&Mt()}},Jn.bind(null,t))}catch(n){Jn(t,n)}}function Jn(t,e){if(Gt.push(e),t._state===null){var n=t._lib&&Bt();e=Qn(e),t._state=!1,t._value=e,_e&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=_r(e,"stack");e._promise=t,Ee(e,"stack",{get:()=>Yn?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){ze.some(i=>i._value===r._value)||ze.push(r)}(t),Fi(t),n&&Mt()}}function Fi(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)xr(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),Ue===0&&(++Ue,_t(()=>{--Ue==0&&Cr()},[]))}function xr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ue,_t(Do,[n,t,e])}else t._listeners.push(e)}function Do(t,e,n){try{Gn=e;var r,i=e._value;e._state?r=t(i):(Gt.length&&(Gt=[]),r=t(i),Gt.indexOf(i)===-1&&function(s){for(var o=ze.length;o;)if(ze[--o]._value===s._value)return void ze.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{Gn=null,--Ue==0&&Cr(),--n.psd.ref||n.psd.finalize()}}function qi(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=Un(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return _e&&((r=Un(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&qi(t._prev,e,n)),e}function Li(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Nt(){Bt()&&Mt()}function Bt(){var t=Hn;return Hn=!1,fn=!1,t}function Mt(){var t,e,n;do for(;pt.length>0;)for(t=pt,pt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(pt.length>0);Hn=!0,fn=!0}function Cr(){var t=ze;ze=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=Qt.slice(0),n=e.length;n;)e[--n]()}function Ft(t){return new C(Ot,!1,t)}function U(t,e){var n=D;return function(){var r=Bt(),i=D;try{return Be(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Be(i,!1),r&&Mt()}}}ct(C.prototype,{then:Xn,_then:function(t,e){xr(this,new Mi(null,null,t,e,D))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):Ft(r)):this.then(null,r=>r&&r.name===e?n(r):Ft(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),Ft(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Yn=!0;var t=qi(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Yn=!1}}},timeout:function(t,e){return t<1/0?new C((n,r)=>{var i=setTimeout(()=>r(new T.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ee(C.prototype,Symbol.toStringTag,"Dexie.Promise"),ut.env=zi(),ct(C,{all:function(){var t=Pe.apply(null,arguments).map(qt);return new C(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>C.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof C)return t;if(t&&typeof t.then=="function")return new C((n,r)=>{t.then(n,r)});var e=new C(Ot,!0,t);return Li(e,Gn),e},reject:Ft,race:function(){var t=Pe.apply(null,arguments).map(qt);return new C((e,n)=>{t.map(r=>C.resolve(r).then(e,n))})},PSD:{get:()=>D,set:t=>D=t},totalEchoes:{get:()=>dn},newPSD:Re,usePSD:dt,scheduler:{get:()=>_t,set:t=>{_t=t}},rejectionMapper:{get:()=>Qn,set:t=>{Qn=t}},follow:(t,e)=>new C((n,r)=>Re((i,s)=>{var o=D;o.unhandleds=[],o.onunhandled=s,o.finalize=He(function(){(function(a){function l(){a(),Qt.splice(Qt.indexOf(l),1)}Qt.push(l),++Ue,_t(()=>{--Ue==0&&Cr()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),Ht&&(Ht.allSettled&&Ee(C,"allSettled",function(){const t=Pe.apply(null,arguments).map(qt);return new C(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>C.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),Ht.any&&typeof AggregateError<"u"&&Ee(C,"any",function(){const t=Pe.apply(null,arguments).map(qt);return new C((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>C.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const $={awaits:0,echoes:0,id:0};var To=0,Xt=[],Tn=0,dn=0,Ko=0;function Re(t,e,n,r){var i=D,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++Ko;var o=ut.env;s.env=Er?{Promise:C,PromiseProp:{value:C,configurable:!0,writable:!0},all:C.all,race:C.race,allSettled:C.allSettled,any:C.any,resolve:C.resolve,reject:C.reject,nthen:Xr(o.nthen,s),gthen:Xr(o.gthen,s)}:{},e&&ne(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=dt(s,t,n,r);return s.ref===0&&s.finalize(),a}function ft(){return $.id||($.id=++To),++$.awaits,$.echoes+=Ri,$.id}function Ce(){return!!$.awaits&&(--$.awaits==0&&($.id=0),$.echoes=$.awaits*Ri,!0)}function qt(t){return $.echoes&&t&&t.constructor===Ht?(ft(),t.then(e=>(Ce(),e),e=>(Ce(),X(e)))):t}function jo(t){++dn,$.echoes&&--$.echoes!=0||($.echoes=$.id=0),Xt.push(D),Be(t,!0)}function Io(){var t=Xt[Xt.length-1];Xt.pop(),Be(t,!1)}function Be(t,e){var n=D;if((e?!$.echoes||Tn++&&t===D:!Tn||--Tn&&t===D)||Ui(e?jo.bind(null,t):Io),t!==D&&(D=t,n===ut&&(ut.env=zi()),Er)){var r=ut.env.Promise,i=t.env;cn.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(L,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function zi(){var t=L.Promise;return Er?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(L,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:cn.then,gthen:t.prototype.then}:{}}function dt(t,e,n,r,i){var s=D;try{return Be(t,!0),e(n,r,i)}finally{Be(s,!1)}}function Ui(t){Bi.call(Wn,t)}function hn(t,e,n,r){return typeof t!="function"?t:function(){var i=D;n&&ft(),Be(e,!0);try{return t.apply(this,arguments)}finally{Be(i,!1),r&&Ui(Ce)}}}function Xr(t,e){return function(n,r){return t.call(this,hn(n,e),hn(r,e))}}(""+Bi).indexOf("[native code]")===-1&&(ft=Ce=q);const Jr="unhandledrejection";function Zr(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(L.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(Jr,!0,!0),ne(r,i)):L.CustomEvent&&ne(r=new CustomEvent(Jr,{detail:i}),i),r&&L.dispatchEvent&&(dispatchEvent(r),!L.PromiseRejectionEvent&&L.onunhandledrejection))try{L.onunhandledrejection(r)}catch{}_e&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var X=C.reject;function Zn(t,e,n,r){if(t.idbdb&&(t._state.openComplete||D.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Zn(t,e,n,r))):X(s)}return i._promise(e,(s,o)=>Re(()=>(D.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return X(new T.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return X(new T.DatabaseClosed);t.open().catch(q)}return t._state.dbReadyPromise.then(()=>Zn(t,e,n,r))}const $r="3.2.4",qe=String.fromCharCode(65535),$n=-1/0,we="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wi="String expected.",wt=[],En=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ro=En,Bo=En,Vi=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),xn="__dbnames",Kn="readonly",jn="readwrite";function Ge(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Yi={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Lt(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=Rt(e))[t],e)}class Mo{_trans(e,n,r){const i=this._tx||D.trans,s=this.name;function o(l,f,c){if(!c.schema[s])throw new T.NotFound("Table "+s+" not part of transaction");return n(c.idbtrans,c)}const a=Bt();try{return i&&i.db===this.db?i===D.trans?i._promise(e,o,r):Re(()=>i._promise(e,o,r),{trans:i,transless:D.transless||D}):Zn(this.db,e,[this.name],o)}finally{a&&Mt()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ee(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=G(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(f=>f.compound&&n.every(c=>f.keyPath.indexOf(c)>=0)&&f.keyPath.every(c=>n.indexOf(c)>=0))[0];if(r&&this.db._maxKey!==qe)return this.where(r.name).equals(r.keyPath.map(f=>e[f]));!r&&_e&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(f,c){try{return s.cmp(f,c)===0}catch{return!1}}const[a,l]=n.reduce(([f,c],u)=>{const d=i[u],h=e[u];return[f||d,f||!d?Ge(c,d&&d.multi?y=>{const g=xe(y,u);return ee(g)&&g.some(b=>o(h,b))}:y=>o(h,xe(y,u))):c]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ee(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(ae(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){ne(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Lt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?C.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{de(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||ee(e))return this.where(":id").equals(e).modify(n);{const r=xe(e,this.schema.primKey.keyPath);if(r===void 0)return X(new T.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?G(n).forEach(i=>{de(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Lt(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?C.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{de(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?C.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Yi})).then(e=>e.numFailures?C.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let c=l&&a?e.map(Lt(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:c,wantResults:s}).then(({numFailures:u,results:d,lastResult:h,failures:y})=>{if(u===0)return s?d:h;throw new vt(`${this.name}.bulkAdd(): ${u} of ${f} operations failed`,y)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let c=l&&a?e.map(Lt(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:c,wantResults:s}).then(({numFailures:u,results:d,lastResult:h,failures:y})=>{if(u===0)return s?d:h;throw new vt(`${this.name}.bulkPut(): ${u} of ${f} operations failed`,y)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new vt(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function kt(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,f=new Array(l-1);--l;)f[l-1]=arguments[l];return e[o].subscribe.apply(null,f),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var f;a||(a=Ao),l||(l=q);var c={subscribers:[],fire:l,subscribe:function(u){c.subscribers.indexOf(u)===-1&&(c.subscribers.push(u),c.fire=a(c.fire,u))},unsubscribe:function(u){c.subscribers=c.subscribers.filter(function(d){return d!==u}),c.fire=c.subscribers.reduce(a,l)}};return e[o]=n[o]=c,c}G(f=o).forEach(function(u){var d=f[u];if(ee(d))s(u,f[u][0],f[u][1]);else{if(d!=="asap")throw new T.InvalidArgument("Invalid event config");var h=s(u,At,function(){for(var y=arguments.length,g=new Array(y);y--;)g[y]=arguments[y];h.subscribers.forEach(function(b){xi(function(){b.apply(null,g)})})})}})}}function gt(t,e){return at(e).from({prototype:t}),e}function tt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function In(t,e){t.filter=Ge(t.filter,e)}function Rn(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>Ge(r(),e()):e,t.justLimit=n&&!r}function Jt(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new T.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function ei(t,e,n){const r=Jt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function zt(t,e,n,r){const i=t.replayFilter?Ge(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,f)=>{if(!i||i(l,f,d=>l.stop(d),d=>l.fail(d))){var c=l.primaryKey,u=""+c;u==="[object ArrayBuffer]"&&(u=""+new Uint8Array(c)),ae(s,u)||(s[u]=!0,e(a,l,f))}};return Promise.all([t.or._iterate(o,n),ti(ei(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return ti(ei(t,r,n),Ge(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function ti(t,e,n,r){var i=U(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=q},a=>{s.fail(a),o=q})||i(s.value,s,a=>o=a),o()})})}function te(t,e){try{const n=ni(t),r=ni(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let f=0;f<l;++f)if(i[f]!==s[f])return i[f]<s[f]?-1:1;return o===a?0:o<a?-1:1}(ri(t),ri(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let f=0;f<l;++f){const c=te(i[f],s[f]);if(c!==0)return c}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function ni(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Ln(t);return n==="ArrayBuffer"?"binary":n}function ri(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class No{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,X.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,X.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=Ge(n.algorithm,e)}_iterate(e,n){return zt(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ne(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>zt(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(tt(r,!0))return i.count({trans:n,query:{index:Jt(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return zt(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(f,c){return c?o(f[r[c]],c-1):f[i]}var a=this._ctx.dir==="next"?1:-1;function l(f,c){var u=o(f,s),d=o(c,s);return u<d?-a:u>d?a:0}return this.toArray(function(f){return f.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&tt(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=Jt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return zt(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,tt(n)?Rn(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):Rn(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Rn(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return In(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return In(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=Ge(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&tt(n,!0)&&n.limit>0)return this._read(i=>{var s=Jt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return In(this._ctx,function(i){var s=i.primaryKey.toString(),o=ae(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=G(e),o=s.length;i=function(g){for(var b=!1,m=0;m<o;++m){var p=s[m],w=e[p];xe(g,p)!==w&&(de(g,p,w),b=!0)}return b}}const a=n.table.core,{outbound:l,extractKey:f}=a.schema.primaryKey,c=this.db._options.modifyChunkSize||200,u=[];let d=0;const h=[],y=(g,b)=>{const{failures:m,numFailures:p}=b;d+=g-p;for(let w of G(m))u.push(m[w])};return this.clone().primaryKeys().then(g=>{const b=m=>{const p=Math.min(c,g.length-m);return a.getMany({trans:r,keys:g.slice(m,m+p),cache:"immutable"}).then(w=>{const k=[],P=[],v=l?[]:null,_=[];for(let S=0;S<p;++S){const j=w[S],I={value:Rt(j),primKey:g[m+S]};i.call(I,I.value,I)!==!1&&(I.value==null?_.push(g[m+S]):l||te(f(j),f(I.value))===0?(P.push(I.value),l&&v.push(g[m+S])):(_.push(g[m+S]),k.push(I.value)))}const x=tt(n)&&n.limit===1/0&&(typeof e!="function"||e===Bn)&&{index:n.index,range:n.range};return Promise.resolve(k.length>0&&a.mutate({trans:r,type:"add",values:k}).then(S=>{for(let j in S.failures)_.splice(parseInt(j),1);y(k.length,S)})).then(()=>(P.length>0||x&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:v,values:P,criteria:x,changeSpec:typeof e!="function"&&e}).then(S=>y(P.length,S))).then(()=>(_.length>0||x&&e===Bn)&&a.mutate({trans:r,type:"delete",keys:_,criteria:x}).then(S=>y(_.length,S))).then(()=>g.length>m+p&&b(m+c))})};return b(0).then(()=>{if(u.length>0)throw new un("Error modifying one or more objects",u,d,h);return g.length})})})}delete(){var e=this._ctx,n=e.range;return tt(e)&&(e.isPrimKey&&!Bo||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:f,numFailures:c})=>{if(c)throw new un("Could not delete some values",Object.keys(a).map(u=>a[u]),o-c);return o-c}))}):this.modify(Bn)}}const Bn=(t,e)=>e.value=null;function Fo(t,e){return t<e?-1:t===e?0:1}function qo(t,e){return t>e?-1:t===e?0:1}function ie(t,e,n){var r=t instanceof Gi?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function nt(t){return new t.Collection(t,()=>Hi("")).limit(0)}function Lo(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var f=e[l];if(f!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],f)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Ut(t,e,n,r){var i,s,o,a,l,f,c,u=n.length;if(!n.every(g=>typeof g=="string"))return ie(t,Wi);function d(g){i=function(m){return m==="next"?p=>p.toUpperCase():p=>p.toLowerCase()}(g),s=function(m){return m==="next"?p=>p.toLowerCase():p=>p.toUpperCase()}(g),o=g==="next"?Fo:qo;var b=n.map(function(m){return{lower:s(m),upper:i(m)}}).sort(function(m,p){return o(m.lower,p.lower)});a=b.map(function(m){return m.upper}),l=b.map(function(m){return m.lower}),f=g,c=g==="next"?"":r}d("next");var h=new t.Collection(t,()=>De(a[0],l[u-1]+r));h._ondirectionchange=function(g){d(g)};var y=0;return h._addAlgorithm(function(g,b,m){var p=g.key;if(typeof p!="string")return!1;var w=s(p);if(e(w,l,y))return!0;for(var k=null,P=y;P<u;++P){var v=Lo(p,w,a[P],l[P],o,f);v===null&&k===null?y=P+1:(k===null||o(k,v)>0)&&(k=v)}return b(k!==null?function(){g.continue(k+c)}:m),!1}),h}function De(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Hi(t){return{type:1,lower:t,upper:t}}class Gi{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?nt(this):new this.Collection(this,()=>De(e,n,!r,!i))}catch{return ie(this,we)}}equals(e){return e==null?ie(this,we):new this.Collection(this,()=>Hi(e))}above(e){return e==null?ie(this,we):new this.Collection(this,()=>De(e,void 0,!0))}aboveOrEqual(e){return e==null?ie(this,we):new this.Collection(this,()=>De(e,void 0,!1))}below(e){return e==null?ie(this,we):new this.Collection(this,()=>De(void 0,e,!1,!0))}belowOrEqual(e){return e==null?ie(this,we):new this.Collection(this,()=>De(void 0,e))}startsWith(e){return typeof e!="string"?ie(this,Wi):this.between(e,e+qe,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Ut(this,(n,r)=>n.indexOf(r[0])===0,[e],qe)}equalsIgnoreCase(e){return Ut(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=Pe.apply(it,arguments);return e.length===0?nt(this):Ut(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Pe.apply(it,arguments);return e.length===0?nt(this):Ut(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,qe)}anyOf(){const e=Pe.apply(it,arguments);let n=this._cmp;try{e.sort(n)}catch{return ie(this,we)}if(e.length===0)return nt(this);const r=new this.Collection(this,()=>De(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[$n,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Pe.apply(it,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return ie(this,we)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[$n,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return nt(this);if(!e.every(p=>p[0]!==void 0&&p[1]!==void 0&&i(p[0],p[1])<=0))return ie(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);const l=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;let c,u=i;function d(p,w){return u(p[0],w[0])}try{c=e.reduce(function(p,w){let k=0,P=p.length;for(;k<P;++k){const v=p[k];if(r(w[0],v[1])<0&&r(w[1],v[0])>0){v[0]=o(v[0],w[0]),v[1]=a(v[1],w[1]);break}}return k===P&&p.push(w),p},[]),c.sort(d)}catch{return ie(this,we)}let h=0;const y=f?p=>i(p,c[h][1])>0:p=>i(p,c[h][1])>=0,g=l?p=>s(p,c[h][0])>0:p=>s(p,c[h][0])>=0;let b=y;const m=new this.Collection(this,()=>De(c[0][0],c[c.length-1][1],!l,!f));return m._ondirectionchange=p=>{p==="next"?(b=y,u=i):(b=g,u=s),c.sort(d)},m._addAlgorithm((p,w,k)=>{for(var P=p.key;b(P);)if(++h,h===c.length)return w(k),!1;return!!function(v){return!y(v)&&!g(v)}(P)||(this._cmp(P,c[h][1])===0||this._cmp(P,c[h][0])===0||w(()=>{u===i?p.continue(c[h][0]):p.continue(c[h][1])}),!1)}),m}startsWithAnyOf(){const e=Pe.apply(it,arguments);return e.every(n=>typeof n=="string")?e.length===0?nt(this):this.inAnyRange(e.map(n=>[n,n+qe])):ie(this,"startsWithAnyOf() only works with strings")}}function ge(t){return U(function(e){return Dt(e),t(e.target.error),!1})}function Dt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Tt="storagemutated",Ke="x-storagemutated-1",Me=kt(null,Tt);class zo{_lock(){return yt(!D.global),++this._reculock,this._reculock!==1||D.global||(D.lockOwnerFor=this),this}_unlock(){if(yt(!D.global),--this._reculock==0)for(D.global||(D.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{dt(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&D.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(yt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new T.DatabaseClosed(r);case"MissingAPIError":throw new T.MissingAPI(r.message,r);default:throw new T.OpenFailed(r)}if(!this.active)throw new T.TransactionInactive;return yt(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=U(i=>{Dt(i),this._reject(e.error)}),e.onabort=U(i=>{Dt(i),this.active&&this._reject(new T.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=U(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return X(new T.ReadOnly("Transaction is readonly"));if(!this.active)return X(new T.TransactionInactive);if(this._locked())return new C((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},D])});if(r)return Re(()=>{var s=new C((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new C((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=C.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new C((o,a)=>{r.then(l=>n._waitingQueue.push(U(o.bind(null,l))),l=>n._waitingQueue.push(U(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(ae(n,e))return n[e];const r=this.schema[e];if(!r)throw new T.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}}function er(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Qi(e)}}function Qi(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Xi(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:Ci(n,r=>[r.name,r])}}let Kt=t=>{try{return t.only([[]]),Kt=()=>[[]],[[]]}catch{return Kt=()=>qe,qe}};function tr(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>xe(r,e)}(t):e=>xe(e,t)}function ii(t){return[].slice.call(t)}let Uo=0;function Pt(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Wo(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:f,upper:c,lowerOpen:u,upperOpen:d}=l;return f===void 0?c===void 0?null:e.upperBound(c,!!d):c===void 0?e.lowerBound(f,!!u):e.bound(f,c,!!u,!!d)}const{schema:i,hasGetAll:s}=function(l,f){const c=ii(l.objectStoreNames);return{schema:{name:l.name,tables:c.map(u=>f.objectStore(u)).map(u=>{const{keyPath:d,autoIncrement:h}=u,y=ee(d),g=d==null,b={},m={name:u.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:y,keyPath:d,autoIncrement:h,unique:!0,extractKey:tr(d)},indexes:ii(u.indexNames).map(p=>u.index(p)).map(p=>{const{name:w,unique:k,multiEntry:P,keyPath:v}=p,_={name:w,compound:ee(v),keyPath:v,unique:k,multiEntry:P,extractKey:tr(v)};return b[Pt(v)]=_,_}),getIndexByKeyPath:p=>b[Pt(p)]};return b[":id"]=m.primaryKey,d!=null&&(b[Pt(d)]=m.primaryKey),m})},hasGetAll:c.length>0&&"getAll"in f.objectStore(c[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(f){const c=f.name;return{name:c,schema:f,mutate:function({trans:u,type:d,keys:h,values:y,range:g}){return new Promise((b,m)=>{b=U(b);const p=u.objectStore(c),w=p.keyPath==null,k=d==="put"||d==="add";if(!k&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:P}=h||y||{length:1};if(h&&y&&h.length!==y.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});let v;const _=[],x=[];let S=0;const j=H=>{++S,Dt(H)};if(d==="deleteRange"){if(g.type===4)return b({numFailures:S,failures:x,results:[],lastResult:void 0});g.type===3?_.push(v=p.clear()):_.push(v=p.delete(r(g)))}else{const[H,W]=k?w?[y,h]:[y,null]:[h,null];if(k)for(let N=0;N<P;++N)_.push(v=W&&W[N]!==void 0?p[d](H[N],W[N]):p[d](H[N])),v.onerror=j;else for(let N=0;N<P;++N)_.push(v=p[d](H[N])),v.onerror=j}const I=H=>{const W=H.target.result;_.forEach((N,le)=>N.error!=null&&(x[le]=N.error)),b({numFailures:S,failures:x,results:d==="delete"?h:_.map(N=>N.result),lastResult:W})};v.onerror=H=>{j(H),I(H)},v.onsuccess=I})},getMany:({trans:u,keys:d})=>new Promise((h,y)=>{h=U(h);const g=u.objectStore(c),b=d.length,m=new Array(b);let p,w=0,k=0;const P=_=>{const x=_.target;m[x._pos]=x.result,++k===w&&h(m)},v=ge(y);for(let _=0;_<b;++_)d[_]!=null&&(p=g.get(d[_]),p._pos=_,p.onsuccess=P,p.onerror=v,++w);w===0&&h(m)}),get:({trans:u,key:d})=>new Promise((h,y)=>{h=U(h);const g=u.objectStore(c).get(d);g.onsuccess=b=>h(b.target.result),g.onerror=ge(y)}),query:function(u){return d=>new Promise((h,y)=>{h=U(h);const{trans:g,values:b,limit:m,query:p}=d,w=m===1/0?void 0:m,{index:k,range:P}=p,v=g.objectStore(c),_=k.isPrimaryKey?v:v.index(k.name),x=r(P);if(m===0)return h({result:[]});if(u){const S=b?_.getAll(x,w):_.getAllKeys(x,w);S.onsuccess=j=>h({result:j.target.result}),S.onerror=ge(y)}else{let S=0;const j=b||!("openKeyCursor"in _)?_.openCursor(x):_.openKeyCursor(x),I=[];j.onsuccess=H=>{const W=j.result;return W?(I.push(b?W.value:W.primaryKey),++S===m?h({result:I}):void W.continue()):h({result:I})},j.onerror=ge(y)}})}(s),openCursor:function({trans:u,values:d,query:h,reverse:y,unique:g}){return new Promise((b,m)=>{b=U(b);const{index:p,range:w}=h,k=u.objectStore(c),P=p.isPrimaryKey?k:k.index(p.name),v=y?g?"prevunique":"prev":g?"nextunique":"next",_=d||!("openKeyCursor"in P)?P.openCursor(r(w),v):P.openKeyCursor(r(w),v);_.onerror=ge(m),_.onsuccess=U(x=>{const S=_.result;if(!S)return void b(null);S.___id=++Uo,S.done=!1;const j=S.continue.bind(S);let I=S.continuePrimaryKey;I&&(I=I.bind(S));const H=S.advance.bind(S),W=()=>{throw new Error("Cursor not stopped")};S.trans=u,S.stop=S.continue=S.continuePrimaryKey=S.advance=()=>{throw new Error("Cursor not started")},S.fail=U(m),S.next=function(){let N=1;return this.start(()=>N--?this.continue():this.stop()).then(()=>this)},S.start=N=>{const le=new Promise((O,A)=>{O=U(O),_.onerror=ge(A),S.fail=A,S.stop=Q=>{S.stop=S.continue=S.continuePrimaryKey=S.advance=W,O(Q)}}),ue=()=>{if(_.result)try{N()}catch(O){S.fail(O)}else S.done=!0,S.start=()=>{throw new Error("Cursor behind last entry")},S.stop()};return _.onsuccess=U(O=>{_.onsuccess=ue,ue()}),S.continue=j,S.continuePrimaryKey=I,S.advance=H,ue(),le},b(S)},m)})},count({query:u,trans:d}){const{index:h,range:y}=u;return new Promise((g,b)=>{const m=d.objectStore(c),p=h.isPrimaryKey?m:m.index(h.name),w=r(y),k=w?p.count(w):p.count();k.onsuccess=U(P=>g(P.target.result)),k.onerror=ge(b)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:Kt(e),schema:i}}function nr({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(c,u){return u.reduce((d,{create:h})=>({...d,...h(d)}),c)}(Wo(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function mn({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=_r(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Ee(o,i,{get(){return this.table(i)},set(l){Si(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function rr({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function Vo(t,e){return t._cfg.version-e._cfg.version}function Yo(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=D.transless||D;Re(()=>{D.trans=s,D.transless=a,e===0?(G(i).forEach(l=>{Mn(n,l,i[l].primKey,i[l].indexes)}),nr(t,n),C.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},f,c,u){const d=[],h=l._versions;let y=l._dbSchema=sr(l,l.idbdb,u),g=!1;const b=h.filter(p=>p._cfg.version>=f);function m(){return d.length?C.resolve(d.shift()(c.idbtrans)).then(m):C.resolve()}return b.forEach(p=>{d.push(()=>{const w=y,k=p._cfg.dbschema;or(l,w,u),or(l,k,u),y=l._dbSchema=k;const P=Ji(w,k);P.add.forEach(_=>{Mn(u,_[0],_[1].primKey,_[1].indexes)}),P.change.forEach(_=>{if(_.recreate)throw new T.Upgrade("Not yet support for changing primary key");{const x=u.objectStore(_.name);_.add.forEach(S=>ir(x,S)),_.change.forEach(S=>{x.deleteIndex(S.name),ir(x,S)}),_.del.forEach(S=>x.deleteIndex(S))}});const v=p._cfg.contentUpgrade;if(v&&p._cfg.version>f){nr(l,u),c._memoizedTables={},g=!0;let _=Ai(k);P.del.forEach(I=>{_[I]=w[I]}),rr(l,[l.Transaction.prototype]),mn(l,[l.Transaction.prototype],G(_),_),c.schema=_;const x=wr(v);let S;x&&ft();const j=C.follow(()=>{if(S=v(c),S&&x){var I=Ce.bind(null,null);S.then(I,I)}});return S&&typeof S.then=="function"?C.resolve(S):j.then(()=>S)}}),d.push(w=>{(!g||!Ro)&&function(k,P){[].slice.call(P.db.objectStoreNames).forEach(v=>k[v]==null&&P.db.deleteObjectStore(v))}(p._cfg.dbschema,w),rr(l,[l.Transaction.prototype]),mn(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),c.schema=l._dbSchema})}),m().then(()=>{var p,w;w=u,G(p=y).forEach(k=>{w.db.objectStoreNames.contains(k)||Mn(w,k,p[k].primKey,p[k].indexes)})})}(t,e,s,n).catch(o)})}function Ji(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!En)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let f;for(f in a)l[f]||o.del.push(f);for(f in l){const c=a[f],u=l[f];c?c.src!==u.src&&o.change.push(u):o.add.push(u)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function Mn(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>ir(i,s)),i}function ir(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function sr(t,e,n){const r={};return ln(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=er(Qi(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let c=0;c<s.indexNames.length;++c){const u=s.index(s.indexNames[c]);o=u.keyPath;var f=er(u.name,o,!!u.unique,!!u.multiEntry,!1,o&&typeof o!="string",!1);l.push(f)}r[i]=Xi(i,a,l)}),r}function or({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],f=o.index(l).keyPath,c=typeof f=="string"?f:"["+ln(f).join("+")+"]";if(e[s]){const u=e[s].idxByName[c];u&&(u.name=l,delete e[s].idxByName[c],e[s].idxByName[l]=u)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&L.WorkerGlobalScope&&L instanceof L.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class Ho{_parseStoresSpec(e,n){G(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return er(l,f||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),ee(f),a===0)}),s=i.shift();if(s.multi)throw new T.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),n[r]=Xi(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?ne(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{ne(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,rr(n,[n._allTables,n,n.Transaction.prototype]),mn(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],G(s),s),n._storeNames=G(s),this}upgrade(e){return this._cfg.contentUpgrade=Sr(this._cfg.contentUpgrade||q,e),this}}function Ar(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new We(xn,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Or(t){return t&&typeof t.databases=="function"}function ar(t){return Re(function(){return D.letThrough=!0,t()})}function Go(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Qo(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?X(e.dbOpenError):t);_e&&(e.openCanceller._stackHolder=Xe()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;return C.race([r,(typeof navigator>"u"?C.resolve():Go()).then(()=>new C((l,f)=>{if(i(),!n)throw new T.MissingAPI;const c=t.name,u=e.autoSchema?n.open(c):n.open(c,Math.round(10*t.verno));if(!u)throw new T.MissingAPI;u.onerror=ge(f),u.onblocked=U(t._fireOnBlocked),u.onupgradeneeded=U(d=>{if(o=u.transaction,e.autoSchema&&!t._options.allowEmptyDB){u.onerror=Dt,o.abort(),u.result.close();const y=n.deleteDatabase(c);y.onsuccess=y.onerror=U(()=>{f(new T.NoSuchDatabase(`Database ${c} doesnt exist`))})}else{o.onerror=ge(f);var h=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;a=h<1,t._novip.idbdb=u.result,Yo(t,h/10,o,f)}},f),u.onsuccess=U(()=>{o=null;const d=t._novip.idbdb=u.result,h=ln(d.objectStoreNames);if(h.length>0)try{const g=d.transaction((y=h).length===1?y[0]:y,"readonly");e.autoSchema?function({_novip:b},m,p){b.verno=m.version/10;const w=b._dbSchema=sr(0,m,p);b._storeNames=ln(m.objectStoreNames,0),mn(b,[b._allTables],G(w),w)}(t,d,g):(or(t,t._dbSchema,g),function(b,m){const p=Ji(sr(0,b.idbdb,m),b._dbSchema);return!(p.add.length||p.change.some(w=>w.add.length||w.change.length))}(t,g)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),nr(t,g)}catch{}var y;wt.push(t),d.onversionchange=U(g=>{e.vcFired=!0,t.on("versionchange").fire(g)}),d.onclose=U(g=>{t.on("close").fire(g)}),a&&function({indexedDB:g,IDBKeyRange:b},m){!Or(g)&&m!==xn&&Ar(g,b).put({name:m}).catch(q)}(t._deps,c),l()},f)}))]).then(()=>(i(),e.onReadyBeingFired=[],C.resolve(ar(()=>t.on.ready.fire(t.vip))).then(function l(){if(e.onReadyBeingFired.length>0){let f=e.onReadyBeingFired.reduce(Sr,q);return e.onReadyBeingFired=[],C.resolve(ar(()=>f(t.vip))).then(l)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(l=>{e.dbOpenError=l;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),X(l)}).finally(()=>{e.openComplete=!0,s()})}function lr(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):ee(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function Xo(t,e,n){var r=arguments.length;if(r<2)throw new T.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,Oi(i),n]}function Zi(t,e,n,r,i){return C.resolve().then(()=>{const s=D.transless||D,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(u){return u.name===Pr.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Zi(t,e,n,null,i))):X(u)}const l=wr(i);let f;l&&ft();const c=C.follow(()=>{if(f=i.call(o,o),f)if(l){var u=Ce.bind(null,null);f.then(u,u)}else typeof f.next=="function"&&typeof f.throw=="function"&&(f=lr(f))},a);return(f&&typeof f.then=="function"?C.resolve(f).then(u=>o.active?u:X(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):c.then(()=>f)).then(u=>(r&&o._resolve(),o._completion.then(()=>u))).catch(u=>(o._reject(u),X(u)))})}function Wt(t,e,n){const r=ee(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Jo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(c,u,d){const h=Pt(c),y=i[h]=i[h]||[],g=c==null?0:typeof c=="string"?1:c.length,b=u>0,m={...d,isVirtual:b,keyTail:u,keyLength:g,extractKey:tr(c),unique:!b&&d.unique};return y.push(m),m.isPrimaryKey||s.push(m),g>1&&o(g===2?c[0]:c.slice(0,g-1),u+1,d),y.sort((p,w)=>p.keyTail-w.keyTail),m}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const c of r.indexes)o(c.keyPath,0,c);function l(c){const u=c.query.index;return u.isVirtual?{...c,query:{index:u,range:(d=c.query.range,h=u.keyTail,{type:d.type===1?2:d.type,lower:Wt(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,h),lowerOpen:!0,upper:Wt(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,h),upperOpen:!0})}}:c;var d,h}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(c){const u=i[Pt(c)];return u&&u[0]}},count:c=>n.count(l(c)),query:c=>n.query(l(c)),openCursor(c){const{keyTail:u,isVirtual:d,keyLength:h}=c.query.index;return d?n.openCursor(l(c)).then(y=>y&&function(g){return Object.create(g,{continue:{value:function(m){m!=null?g.continue(Wt(m,c.reverse?t.MAX_KEY:t.MIN_KEY,u)):c.unique?g.continue(g.key.slice(0,h).concat(c.reverse?t.MIN_KEY:t.MAX_KEY,u)):g.continue()}},continuePrimaryKey:{value(m,p){g.continuePrimaryKey(Wt(m,t.MAX_KEY,u),p)}},primaryKey:{get:()=>g.primaryKey},key:{get(){const m=g.key;return h===1?m[0]:m.slice(0,h)}},value:{get:()=>g.value}})}(y)):n.openCursor(c)}}}}}};function Dr(t,e,n,r){return n=n||{},r=r||"",G(t).forEach(i=>{if(ae(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=Ln(s);a!==Ln(o)?n[r+i]=e[i]:a==="Object"?Dr(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),G(e).forEach(i=>{ae(t,i)||(n[r+i]=e[i])}),n}const Zo={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=D.trans,{deleting:a,creating:l,updating:f}=o.table(e).hook;switch(s.type){case"add":if(l.fire===q)break;return o._promise("readwrite",()=>c(s),!0);case"put":if(l.fire===q&&f.fire===q)break;return o._promise("readwrite",()=>c(s),!0);case"delete":if(a.fire===q)break;return o._promise("readwrite",()=>c(s),!0);case"deleteRange":if(a.fire===q)break;return o._promise("readwrite",()=>function(d){return u(d.trans,d.range,1e4)}(s),!0)}return n.mutate(s);function c(d){const h=D.trans,y=d.keys||function(g,b){return b.type==="delete"?b.keys:b.keys||b.values.map(g.extractKey)}(r,d);if(!y)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:y}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(g,b,m){return b.type==="add"?Promise.resolve([]):g.getMany({trans:b.trans,keys:m,cache:"immutable"})}(n,d,y).then(g=>{const b=y.map((m,p)=>{const w=g[p],k={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(k,m,w,h);else if(d.type==="add"||w===void 0){const P=l.fire.call(k,m,d.values[p],h);m==null&&P!=null&&(m=P,d.keys[p]=m,r.outbound||de(d.values[p],r.keyPath,m))}else{const P=Dr(w,d.values[p]),v=f.fire.call(k,P,m,w,h);if(v){const _=d.values[p];Object.keys(v).forEach(x=>{ae(_,x)?_[x]=v[x]:de(_,x,v[x])})}}return k});return n.mutate(d).then(({failures:m,results:p,numFailures:w,lastResult:k})=>{for(let P=0;P<y.length;++P){const v=p?p[P]:y[P],_=b[P];v==null?_.onerror&&_.onerror(m[P]):_.onsuccess&&_.onsuccess(d.type==="put"&&g[P]?d.values[P]:v)}return{failures:m,results:p,numFailures:w,lastResult:k}}).catch(m=>(b.forEach(p=>p.onerror&&p.onerror(m)),Promise.reject(m)))})}function u(d,h,y){return n.query({trans:d,values:!1,query:{index:r,range:h},limit:y}).then(({result:g})=>c({type:"delete",keys:g,trans:d}).then(b=>b.numFailures>0?Promise.reject(b.failures[0]):g.length<y?{failures:[],numFailures:0,lastResult:void 0}:u(d,{...h,lower:g[g.length-1],lowerOpen:!0},y)))}}}}})};function $i(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)te(e.keys[i],t[s])===0&&(r.push(n?Rt(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const $o={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=$i(r.keys,r.trans._cache,r.cache==="clone");return i?C.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?Rt(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Tr(t){return!("from"in t)}const ke=function(t,e){if(!this){const n=new ke;return t&&"d"in t&&ne(n,t),n}ne(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function jt(t,e,n){const r=te(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Tr(t))return ne(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(te(n,t.from)<0)return i?jt(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},si(t);if(te(e,t.to)>0)return s?jt(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},si(t);te(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),te(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&gn(t,i),s&&o&&gn(t,s)}function gn(t,e){Tr(e)||function n(r,{from:i,to:s,l:o,r:a}){jt(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function ea(t,e){const n=ur(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=ur(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(te(a.from,i.to)<=0&&te(a.to,i.from)>=0)return!0;te(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function ur(t){let e=Tr(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&te(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||te(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function si(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=oi(o)}t.d=oi(t)}function oi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}ct(ke.prototype,{add(t){return gn(this,t),this},addKey(t){return jt(this,t,t),this},addKeys(t){return t.forEach(e=>jt(this,e,e)),this},[zn](){return ur(this)}});const ta={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new ke(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,f={...i,mutate:d=>{const h=d.trans,y=h.mutatedParts||(h.mutatedParts={}),g=v=>{const _=`idb://${e}/${r}/${v}`;return y[_]||(y[_]=new ke)},b=g(""),m=g(":dels"),{type:p}=d;let[w,k]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const P=d.trans._cache;return i.mutate(d).then(v=>{if(ee(w)){p!=="delete"&&(w=v.results),b.addKeys(w);const _=$i(w,P);_||p==="add"||m.addKeys(w),(_||k)&&function(x,S,j,I){function H(W){const N=x(W.name||"");function le(O){return O!=null?W.extractKey(O):null}const ue=O=>W.multiEntry&&ee(O)?O.forEach(A=>N.addKey(A)):N.addKey(O);(j||I).forEach((O,A)=>{const Q=j&&le(j[A]),me=I&&le(I[A]);te(Q,me)!==0&&(Q!=null&&ue(Q),me!=null&&ue(me))})}S.indexes.forEach(H)}(g,s,_,k)}else if(w){const _={from:w.lower,to:w.upper};m.add(_),b.add(_)}else b.add(n),m.add(n),s.indexes.forEach(_=>g(_.name).add(n));return v})}},c=({query:{index:d,range:h}})=>{var y,g;return[d,new ke((y=h.lower)!==null&&y!==void 0?y:t.MIN_KEY,(g=h.upper)!==null&&g!==void 0?g:t.MAX_KEY)]},u={get:d=>[o,new ke(d.key)],getMany:d=>[o,new ke().addKeys(d.keys)],count:c,query:c,openCursor:c};return G(u).forEach(d=>{f[d]=function(h){const{subscr:y}=D;if(y){const g=k=>{const P=`idb://${e}/${r}/${k}`;return y[P]||(y[P]=new ke)},b=g(""),m=g(":dels"),[p,w]=u[d](h);if(g(p.name||"").add(w),!p.isPrimaryKey){if(d!=="count"){const k=d==="query"&&l&&h.values&&i.query({...h,values:!1});return i[d].apply(this,arguments).then(P=>{if(d==="query"){if(l&&h.values)return k.then(({result:_})=>(b.addKeys(_),P));const v=h.values?P.result.map(a):P.result;h.values?b.addKeys(v):m.addKeys(v)}else if(d==="openCursor"){const v=P,_=h.values;return v&&Object.create(v,{key:{get:()=>(m.addKey(v.primaryKey),v.key)},primaryKey:{get(){const x=v.primaryKey;return m.addKey(x),x}},value:{get:()=>(_&&b.addKey(v.primaryKey),v.value)}})}return P})}m.add(n)}}return i[d].apply(this,arguments)}}),f}}}};class We{constructor(e,n){this._middlewares={},this.verno=0;const r=We.dependencies;this._options=n={addons:We.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:q,dbReadyPromise:null,cancelOpen:q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new C(a=>{s.dbReadyResolve=a}),s.openCanceller=new C((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=kt(this,"populate","blocked","versionchange","close",{ready:[Sr,q]}),this.on.ready.subscribe=Ei(this.on.ready.subscribe,a=>(l,f)=>{We.vip(()=>{const c=this._state;if(c.openComplete)c.dbOpenError||C.resolve().then(l),f&&a(l);else if(c.onReadyBeingFired)c.onReadyBeingFired.push(l),f&&a(l);else{a(l);const u=this;f||a(function d(){u.on.ready.unsubscribe(l),u.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,gt(No.prototype,function(a,l){this.db=o;let f=Yi,c=null;if(l)try{f=l()}catch(y){c=y}const u=a._ctx,d=u.table,h=d.hook.reading.fire;this._ctx={table:d,index:u.index,isPrimKey:!u.index||d.schema.primKey.keyPath&&u.index===d.schema.primKey.name,range:f,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:u.or,valueMapper:h!==At?h:null}})),this.Table=function(a){return gt(Mo.prototype,function(l,f,c){this.db=a,this._tx=c,this.name=l,this.schema=f,this.hook=a._allTables[l]?a._allTables[l].hook:kt(null,{creating:[Eo,q],reading:[So,At],updating:[Co,q],deleting:[xo,q]})})}(this),this.Transaction=function(a){return gt(zo.prototype,function(l,f,c,u,d){this.db=a,this.mode=l,this.storeNames=f,this.schema=c,this.chromeTransactionDurability=u,this.idbtrans=null,this.on=kt(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new C((h,y)=>{this._resolve=h,this._reject=y}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},h=>{var y=this.active;return this.active=!1,this.on.error.fire(h),this.parent?this.parent._reject(h):y&&this.idbtrans&&this.idbtrans.abort(),X(h)})})}(this),this.Version=function(a){return gt(Ho.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return gt(Gi.prototype,function(l,f,c){this.db=a,this._ctx={table:l,index:f===":id"?null:f,or:c};const u=a._deps.indexedDB;if(!u)throw new T.MissingAPI;this._cmp=this._ascending=u.cmp.bind(u),this._descending=(d,h)=>u.cmp(h,d),this._max=(d,h)=>u.cmp(d,h)>0?d:h,this._min=(d,h)=>u.cmp(d,h)<0?d:h,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Kt(n.IDBKeyRange),this._createTransaction=(a,l,f,c)=>new this.Transaction(a,l,f,this._options.chromeTransactionDurability,c),this._fireOnBlocked=a=>{this.on("blocked").fire(a),wt.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Jo),this.use(Zo),this.use(ta),this.use($o),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new T.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(Vo),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||D.letThrough||this._vip)?e():new C((n,r)=>{if(this._state.openComplete)return r(new T.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new T.DatabaseClosed);this.open().catch(q)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Qo(this)}_close(){const e=this._state,n=wt.indexOf(this);if(n>=0&&wt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new C(r=>{e.dbReadyResolve=r}),e.openCanceller=new C((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new T.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new C((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=U(()=>{(function({indexedDB:a,IDBKeyRange:l},f){!Or(a)&&f!==xn&&Ar(a,l).delete(f).catch(q)})(this._deps,this.name),r()}),o.onerror=ge(i),o.onblocked=this._fireOnBlocked};if(e)throw new T.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return G(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Xo.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=D.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(f=>{var c=f instanceof this.Table?f.name:f;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Kn)o=Kn;else{if(e!="rw"&&e!=jn)throw new T.InvalidArgument("Invalid transaction mode: "+e);o=jn}if(i){if(i.mode===Kn&&o===jn){if(!s)throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(f=>{if(i&&i.storeNames.indexOf(f)===-1){if(!s)throw new T.SubTransaction("Table "+f+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(f){return i?i._promise(null,(c,u)=>{u(f)}):X(f)}const l=Zi.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):D.trans?dt(D.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!ae(this._allTables,e))throw new T.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const na=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ra{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[na](){return this}}function es(t,e){return G(e).forEach(n=>{gn(t[n]||(t[n]=new ke),e[n])}),t}function ia(t){let e,n=!1;const r=new ra(i=>{const s=wr(t);let o=!1,a={},l={};const f={get closed(){return o},unsubscribe:()=>{o=!0,Me.storagemutated.unsubscribe(h)}};i.start&&i.start(f);let c=!1,u=!1;function d(){return G(l).some(g=>a[g]&&ea(a[g],l[g]))}const h=g=>{es(a,g),d()&&y()},y=()=>{if(c||o)return;a={};const g={},b=function(m){s&&ft();const p=()=>Re(t,{subscr:m,trans:null}),w=D.trans?dt(D.transless,p):p();return s&&w.then(Ce,Ce),w}(g);u||(Me(Tt,h),u=!0),c=!0,Promise.resolve(b).then(m=>{n=!0,e=m,c=!1,o||(d()?y():(a={},l=g,i.next&&i.next(m)))},m=>{c=!1,n=!1,i.error&&i.error(m),f.unsubscribe()})};return y(),f});return r.hasValue=()=>n,r.getValue=()=>e,r}let cr;try{cr={indexedDB:L.indexedDB||L.mozIndexedDB||L.webkitIndexedDB||L.msIndexedDB,IDBKeyRange:L.IDBKeyRange||L.webkitIDBKeyRange}}catch{cr={indexedDB:null,IDBKeyRange:null}}const Ne=We;function Zt(t){let e=Se;try{Se=!0,Me.storagemutated.fire(t)}finally{Se=e}}ct(Ne,{...Yt,delete:t=>new Ne(t,{addons:[]}).delete(),exists:t=>new Ne(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Or(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==xn)):Ar(e,n).toCollection().primaryKeys()}(Ne.dependencies).then(t)}catch{return X(new T.MissingAPI)}},defineClass:()=>function(t){ne(this,t)},ignoreTransaction:t=>D.trans?dt(D.transless,t):t(),vip:ar,async:function(t){return function(){try{var e=lr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:C.resolve(e)}catch(n){return X(n)}}},spawn:function(t,e,n){try{var r=lr(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:C.resolve(r)}catch(i){return X(i)}},currentTransaction:{get:()=>D.trans||null},waitFor:function(t,e){const n=C.resolve(typeof t=="function"?Ne.ignoreTransaction(t):t).timeout(e||6e4);return D.trans?D.trans.waitFor(n):n},Promise:C,debug:{get:()=>_e,set:t=>{Ti(t,t==="dexie"?()=>!0:Vi)}},derive:at,extend:ne,props:ct,override:Ei,Events:kt,on:Me,liveQuery:ia,extendObservabilitySet:es,getByKeyPath:xe,setByKeyPath:de,delByKeyPath:function(t,e){typeof e=="string"?de(t,e,void 0):"length"in e&&[].map.call(e,function(n){de(t,n,void 0)})},shallowClone:Ai,deepClone:Rt,getObjectDiff:Dr,cmp:te,asap:xi,minKey:$n,addons:[],connections:wt,errnames:Pr,dependencies:cr,semVer:$r,version:$r.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Ne.maxKey=Kt(Ne.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(Tt,t=>{if(!Se){let e;En?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Ke,!0,!0,t)):e=new CustomEvent(Ke,{detail:t}),Se=!0,dispatchEvent(e),Se=!1}}),addEventListener(Ke,({detail:t})=>{Se||Zt(t)}));let Se=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Ke);typeof t.unref=="function"&&t.unref(),Me(Tt,e=>{Se||t.postMessage(e)}),t.onmessage=e=>{e.data&&Zt(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Me(Tt,e=>{try{Se||(typeof localStorage<"u"&&localStorage.setItem(Ke,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Ke,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Ke){const n=JSON.parse(e.newValue);n&&Zt(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Ke&&Zt(e.changedParts)})}C.rejectionMapper=function(t,e){if(!t||t instanceof lt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Qr[t.name])return t;var n=new Qr[t.name](e||t.message,t);return"stack"in t&&Ee(n,"stack",{get:function(){return this.inner.stack}}),n},Ti(_e,Vi);const ht=new We("AppDB");ht.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:""});const sa=t=>ht.table("dictionary").get(t),oa=()=>ht.table("dictionary").toArray(),ts=t=>ht.table("dictionary").put(t),ns=t=>ht.table("statistic").put(t),aa=()=>ht.table("statistic").toArray(),Ve=br(),la=t=>{sa(t).then(e=>{Ve.update(n=>(n.word=e,n))})},rs=async()=>{const t=await oa(),e=t.length>0?t[Math.floor(Math.random()*t.length)]:null;Ve.set({practiceTarget:Math.random()>=.5?"original":"translation",result:null,word:e})},is=2,ua=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}).split(" "),ss=async(t,e)=>{const n=await aa(),[r,i]=ua(),s=n.find(({year:o})=>o===i);return t?s[r].successfulPracticeCount+=1:s[r].unsuccessfulPracticeCount+=1,e==="original"?s[r].wordOriginPracticeAmount+=1:s[r].wordTranslationPracticeAmount+=1,s[r].wordTotalPracticeAmount+=1,s[r].averagePracticeSuccess=Number((s[r].successfulPracticeCount/s[r].wordTotalPracticeAmount).toFixed(2))*100,s},ca=t=>{const e=t.practiceCount+1,n=t.successfulPracticeCount*100/e,r=Number(n.toFixed(is));return{...t,practiceCount:e,learnSuccess:r}},fa=t=>{const e=t.practiceCount+1,n=t.successfulPracticeCount+1,r=n*100/e,i=Number(r.toFixed(is));return{...t,practiceCount:e,successfulPracticeCount:n,learnSuccess:i}},da=async(t,e,n)=>{const r=ca(n);await ts(r);const i=await ss(t,e);return await ns(i),[r,i]},ha=async(t,e,n)=>{const r=fa(n);await ts(r);const i=await ss(t,e);return await ns(i),[r,i]},ma=t=>{var e;(e=window.electron)==null||e.ipcRenderer.send("passivePracticeWinErr",t)},ga=async()=>{var t;return(t=window.electron)==null||t.ipcRenderer.send("getNotificationSetting"),new Promise((e,n)=>{var r;setTimeout(n,3e3,"Didn't get answer from IPCMain for getNotificationSetting"),(r=window.electron)==null||r.ipcRenderer.on("getNotificationSetting",(i,s)=>{e(s)})})};let $t,fr,dr;const ya=t=>{var i;const{result:e,word:n,practiceTarget:r}=t;fr=n,$t=e,dr=r,(i=window.electron)==null||i.ipcRenderer.send("passivePracticeResult",e,n,r)};var li;(li=window.electron)==null||li.ipcRenderer.on("updateDBPracticeResult",async()=>{var n;const[t,e]=await($t?ha($t,dr,fr):da($t,dr,fr));(n=window.electron)==null||n.ipcRenderer.send("updateDBPracticeResult",t,e)});var ui;(ui=window.electron)==null||ui.ipcRenderer.on("onEditWord",(t,e)=>{e===hr(Ve).word.id&&la(e)});var ci;(ci=window.electron)==null||ci.ipcRenderer.on("onDeleteWord",(t,e)=>{e===hr(Ve).word.id&&rs()});function pa(t){let e,n,r;const i=t[2].default,s=yn(i,t,t[1],null);return{c(){e=R("div"),s&&s.c(),E(e,"class",n=`text-center text-slate-300 text-4xl cursor-default tracking-[2rem] m-sm:tracking-[1rem] translate-x-3 -translate-y-7 leading-loose break-words max-w-90wv ${t[0]}`)},m(o,a){F(o,e,a),s&&s.m(e,null),r=!0},p(o,[a]){s&&s.p&&(!r||a&2)&&bn(s,i,o,o[1],r?pn(i,o[1],a,null):vn(o[1]),null),(!r||a&1&&n!==(n=`text-center text-slate-300 text-4xl cursor-default tracking-[2rem] m-sm:tracking-[1rem] translate-x-3 -translate-y-7 leading-loose break-words max-w-90wv ${o[0]}`))&&E(e,"class",n)},i(o){r||(z(s,o),r=!0)},o(o){Y(s,o),r=!1},d(o){o&&M(e),s&&s.d(o)}}}function ba(t,e,n){let{$$slots:r={},$$scope:i}=e,{additionalStyles:s=""}=e;return t.$$set=o=>{"additionalStyles"in o&&n(0,s=o.additionalStyles),"$$scope"in o&&n(1,i=o.$$scope)},[s,i,r]}class va extends Oe{constructor(e){super(),Ae(this,e,ba,pa,ve,{additionalStyles:0})}}function _a(t){let e,n,r,i,s,o,a,l,f,c,u,d,h,y,g,b,m,p;e=new Gr({props:{show:t[0],coverStyles:"absolute bg-orange-400 w-full transition-all rounded-md font-bold text-orange-800 flex justify-center items-center",hide:t[1].practiceTarget==="original",data:t[1].word.variants,wrapStyles:"overflow-y-auto flex flex-wrap gap-2 p-2 max-h-28 bg-orange-300 bg-opacity-50 rounded-md",chipStyles:"overflow-hidden relative chip text-orange-800 bg-orange-300 hover:filter-none grow break-all whitespace-normal cursor-default"}});function w(v){t[2](v)}let k={};t[0]!==void 0&&(k.showPracticeTarget=t[0]),r=new ho({props:k}),Ye.push(()=>an(r,"showPracticeTarget",w)),o=new Gr({props:{show:t[0],coverStyles:"absolute bg-green-400 w-full transition-all rounded-md font-bold text-green-800 flex justify-center items-center",hide:t[1].practiceTarget==="translation",data:t[1].word.translations,wrapStyles:"flex flex-wrap gap-2 p-2 max-h-28 overflow-y-auto bg-green-300 bg-opacity-50 rounded-md",chipStyles:"overflow-hidden relative chip text-green-800 bg-green-300 hover:filter-none grow break-all whitespace-normal cursor-default"}});let P=t[1].word.description&&ai(t);return c=new Us({props:{border:"border-none",class:"gap-2",$$slots:{default:[Sa]},$$scope:{ctx:t}}}),{c(){pe(e.$$.fragment),n=Z(),pe(r.$$.fragment),s=Z(),pe(o.$$.fragment),a=Z(),P&&P.c(),l=Z(),f=R("div"),pe(c.$$.fragment),u=Z(),d=R("div"),h=R("button"),y=be("Confirm"),h.disabled=g=t[1].result===null,E(h,"class","btn mr-2 text-white bg-zinc-500 border-b-2 rounded-md hover:filter-none hover:bg-zinc-400 focus:bg-zinc-400")},m(v,_){ce(e,v,_),F(v,n,_),ce(r,v,_),F(v,s,_),ce(o,v,_),F(v,a,_),P&&P.m(v,_),F(v,l,_),F(v,f,_),ce(c,f,null),F(v,u,_),F(v,d,_),B(d,h),B(h,y),b=!0,m||(p=V(h,"click",t[5]),m=!0)},p(v,_){const x={};_&1&&(x.show=v[0]),_&2&&(x.hide=v[1].practiceTarget==="original"),_&2&&(x.data=v[1].word.variants),e.$set(x);const S={};!i&&_&1&&(i=!0,S.showPracticeTarget=v[0],sn(()=>i=!1)),r.$set(S);const j={};_&1&&(j.show=v[0]),_&2&&(j.hide=v[1].practiceTarget==="translation"),_&2&&(j.data=v[1].word.translations),o.$set(j),v[1].word.description?P?P.p(v,_):(P=ai(v),P.c(),P.m(l.parentNode,l)):P&&(P.d(1),P=null);const I={};_&66&&(I.$$scope={dirty:_,ctx:v}),c.$set(I),(!b||_&2&&g!==(g=v[1].result===null))&&(h.disabled=g)},i(v){b||(z(e.$$.fragment,v),z(r.$$.fragment,v),z(o.$$.fragment,v),z(c.$$.fragment,v),b=!0)},o(v){Y(e.$$.fragment,v),Y(r.$$.fragment,v),Y(o.$$.fragment,v),Y(c.$$.fragment,v),b=!1},d(v){v&&(M(n),M(s),M(a),M(l),M(f),M(u),M(d)),fe(e,v),fe(r,v),fe(o,v),P&&P.d(v),fe(c),m=!1,p()}}}function wa(t){let e,n;return e=new va({props:{$$slots:{default:[Ea]},$$scope:{ctx:t}}}),{c(){pe(e.$$.fragment)},m(r,i){ce(e,r,i),n=!0},p(r,i){const s={};i&64&&(s.$$scope={dirty:i,ctx:r}),e.$set(s)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){Y(e.$$.fragment,r),n=!1},d(r){fe(e,r)}}}function ai(t){let e,n,r=t[1].word.description+"",i;return{c(){e=R("div"),n=R("div"),i=be(r),E(n,"class","chip cursor-default hover:filter-none p-2 h-full max-h-28 overflow-auto bg-sky-300 rounded-md"),E(e,"class","p-2 break-all whitespace-normal max-h-28 overflow-y-auto bg-sky-300 bg-opacity-50 rounded-md")},m(s,o){F(s,e,o),B(e,n),B(n,i)},p(s,o){o&2&&r!==(r=s[1].word.description+"")&&gr(i,r)},d(s){s&&M(e)}}}function ka(t){let e;return{c(){e=be("success")},m(n,r){F(n,e,r)},d(n){n&&M(e)}}}function Pa(t){let e;return{c(){e=be("fail")},m(n,r){F(n,e,r)},d(n){n&&M(e)}}}function Sa(t){let e,n,r,i,s,o;function a(u){t[3](u)}let l={name:"curTaskResult",rounded:"rounded-md",class:"border-b-2 border-slate-400  text-slate-400 transition-all hover:text-white hover:bg-slate-400 hover:bg-opacity-40 focus:bg-slate-400 focus:text-white",fill:"!bg-slate-500 !text-white",value:!0,$$slots:{default:[ka]},$$scope:{ctx:t}};t[1].result!==void 0&&(l.group=t[1].result),e=new Nr({props:l}),Ye.push(()=>an(e,"group",a));function f(u){t[4](u)}let c={name:"curTaskResult",rounded:"rounded-md",class:"border-b-2 border-slate-400  text-slate-400 transition-all hover:text-white hover:bg-slate-400 hover:bg-opacity-40 focus:bg-slate-400 focus:text-white",fill:"!bg-slate-500 !text-white",value:!1,$$slots:{default:[Pa]},$$scope:{ctx:t}};return t[1].result!==void 0&&(c.group=t[1].result),i=new Nr({props:c}),Ye.push(()=>an(i,"group",f)),{c(){pe(e.$$.fragment),r=Z(),pe(i.$$.fragment)},m(u,d){ce(e,u,d),F(u,r,d),ce(i,u,d),o=!0},p(u,d){const h={};d&64&&(h.$$scope={dirty:d,ctx:u}),!n&&d&2&&(n=!0,h.group=u[1].result,sn(()=>n=!1)),e.$set(h);const y={};d&64&&(y.$$scope={dirty:d,ctx:u}),!s&&d&2&&(s=!0,y.group=u[1].result,sn(()=>s=!1)),i.$set(y)},i(u){o||(z(e.$$.fragment,u),z(i.$$.fragment,u),o=!0)},o(u){Y(e.$$.fragment,u),Y(i.$$.fragment,u),o=!1},d(u){u&&M(r),fe(e,u),fe(i,u)}}}function Ea(t){let e;return{c(){e=be("Dictionary is empty")},m(n,r){F(n,e,r)},d(n){n&&M(e)}}}function xa(t){let e,n,r,i,s;const o=[wa,_a],a=[];function l(f,c){return f[1].word===null?0:1}return n=l(t),r=a[n]=o[n](t),{c(){e=R("div"),r.c(),E(e,"class","flex flex-col justify-center items-center gap-[3vh] h-full w-full p-2 absolute")},m(f,c){F(f,e,c),a[n].m(e,null),s=!0},p(f,[c]){let u=n;n=l(f),n===u?a[n].p(f,c):(Pn(),Y(a[u],1,1,()=>{a[u]=null}),Sn(),r=a[n],r?r.p(f,c):(r=a[n]=o[n](f),r.c()),z(r,1),r.m(e,null))},i(f){s||(z(r),f&&Ie(()=>{s&&(i||(i=Ir(e,Mr,{},!0)),i.run(1))}),s=!0)},o(f){Y(r),f&&(i||(i=Ir(e,Mr,{},!1)),i.run(0)),s=!1},d(f){f&&M(e),a[n].d(),f&&i&&i.end()}}}function Ca(t,e,n){let r;hi(t,Ve,f=>n(1,r=f));let i=!1;function s(f){i=f,n(0,i)}function o(f){t.$$.not_equal(r.result,f)&&(r.result=f,Ve.set(r))}function a(f){t.$$.not_equal(r.result,f)&&(r.result=f,Ve.set(r))}return[i,r,s,o,a,()=>ya(r)]}class Aa extends Oe{constructor(e){super(),Ae(this,e,Ca,xa,ve,{})}}const Oa=""+new URL("notifySound-199e3e57.mp3",import.meta.url).href,Da="bg-red-400 text-white cursor-default !rounded-md",Ta=t=>{Fe.trigger({message:t,background:Da})},Kr=t=>{Ta(t),ma(t)},Ka=({reason:t})=>{const e=`Unhandledrejection: ${t}`;Kr(e)},ja=()=>{window.onerror=Kr,window.onunhandledrejection=Ka},Ia=()=>{if(window.electron===void 0)throw"electron API is missing in window"},Ra={notify:Oa},Ba=t=>{new Audio(Ra[t]).play().catch(Kr)};function Ma(t){let e,n,r,i;return e=new ao({}),r=new Aa({}),{c(){pe(e.$$.fragment),n=Z(),pe(r.$$.fragment)},m(s,o){ce(e,s,o),F(s,n,o),ce(r,s,o),i=!0},p:J,i(s){i||(z(e.$$.fragment,s),z(r.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),Y(r.$$.fragment,s),i=!1},d(s){s&&M(n),fe(e,s),fe(r,s)}}}function Na(t){return ws(async()=>{await ga()&&Ba("notify")}),[]}class Fa extends Oe{constructor(e){super(),Ae(this,e,Na,Ma,ve,{})}}ja();rs().then(()=>{new Fa({target:document.getElementById("app")}),Ia()});
