var Pa=Object.defineProperty;var Ca=(e,t,n)=>t in e?Pa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var je=(e,t,n)=>(Ca(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Ia="modulepreload",Na=function(e,t){return new URL(e,t).href},wo={},Un=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Na(o,r),o in wo)return;wo[o]=!0;const s=o.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const h=i[f];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":Ia,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((f,h)=>{a.addEventListener("load",f),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function Zn(e){return e.split("-")[1]}function Fi(e){return e==="y"?"height":"width"}function Qt(e){return e.split("-")[0]}function er(e){return["top","bottom"].includes(Qt(e))?"x":"y"}function _o(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,c=er(t),l=Fi(c),a=r[l]/2-i[l]/2,f=c==="x";let h;switch(Qt(t)){case"top":h={x:o,y:r.y-i.height};break;case"bottom":h={x:o,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:s};break;case"left":h={x:r.x-i.width,y:s};break;default:h={x:r.x,y:r.y}}switch(Zn(t)){case"start":h[c]-=a*(n&&f?-1:1);break;case"end":h[c]+=a*(n&&f?-1:1)}return h}const Ba=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,c=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=_o(a,r,l),m=r,g={},w=0;for(let b=0;b<c.length;b++){const{name:S,fn:A}=c[b],{x:E,y:x,data:B,reset:P}=await A({x:f,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:a,platform:s,elements:{reference:e,floating:t}});f=E??f,h=x??h,g={...g,[S]:{...g[S],...B}},P&&w<=50&&(w++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(a=P.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:f,y:h}=_o(a,m,l)),b=-1)}return{x:f,y:h,placement:m,strategy:i,middlewareData:g}};function qo(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function kr(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function Yo(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=t,w=qo(g),b=c[m?h==="floating"?"reference":"floating":h],S=kr(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:a,rootBoundary:f,strategy:l})),A=h==="floating"?{...s.floating,x:r,y:i}:s.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),x=await(o.isElement==null?void 0:o.isElement(E))&&await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1},B=kr(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:A,offsetParent:E,strategy:l}):A);return{top:(S.top-B.top+w.top)/x.y,bottom:(B.bottom-S.bottom+w.bottom)/x.y,left:(S.left-B.left+w.left)/x.x,right:(B.right-S.right+w.right)/x.x}}const Da=Math.min,ja=Math.max;function ci(e,t,n){return ja(e,Da(t,n))}const Ra=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:i,y:o,placement:s,rects:c,platform:l,elements:a}=t;if(n==null)return{};const f=qo(r),h={x:i,y:o},m=er(s),g=Fi(m),w=await l.getDimensions(n),b=m==="y",S=b?"top":"left",A=b?"bottom":"right",E=b?"clientHeight":"clientWidth",x=c.reference[g]+c.reference[m]-h[m]-c.floating[g],B=h[m]-c.reference[m],P=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let N=P?P[E]:0;N&&await(l.isElement==null?void 0:l.isElement(P))||(N=a.floating[E]||c.floating[g]);const C=x/2-B/2,$=f[S],v=N-w[g]-f[A],d=N/2-w[g]/2+C,T=ci($,d,v),k=Zn(s)!=null&&d!=T&&c.reference[g]/2-(d<$?f[S]:f[A])-w[g]/2<0;return{[m]:h[m]-(k?d<$?$-d:v-d:0),data:{[m]:T,centerOffset:d-T}}}}),$a=["top","right","bottom","left"];$a.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const La={left:"right",right:"left",bottom:"top",top:"bottom"};function Tr(e){return e.replace(/left|right|bottom|top/g,t=>La[t])}function Ka(e,t,n){n===void 0&&(n=!1);const r=Zn(e),i=er(e),o=Fi(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Tr(s)),{main:s,cross:Tr(s)}}const Fa={start:"end",end:"start"};function Zr(e){return e.replace(/start|end/g,t=>Fa[t])}const Ma=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:a=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...b}=e,S=Qt(r),A=Qt(s)===s,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=h||(A||!w?[Tr(s)]:function(T){const k=Tr(T);return[Zr(T),k,Zr(k)]}(s));h||g==="none"||x.push(...function(T,k,Y,W){const oe=Zn(T);let re=function(ie,se,Pe){const Ce=["left","right"],$e=["right","left"],Fe=["top","bottom"],Ze=["bottom","top"];switch(ie){case"top":case"bottom":return Pe?se?$e:Ce:se?Ce:$e;case"left":case"right":return se?Fe:Ze;default:return[]}}(Qt(T),Y==="start",W);return oe&&(re=re.map(ie=>ie+"-"+oe),k&&(re=re.concat(re.map(Zr)))),re}(s,w,g,E));const B=[s,...x],P=await Yo(t,b),N=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(a&&N.push(P[S]),f){const{main:T,cross:k}=Ka(r,o,E);N.push(P[T],P[k])}if(C=[...C,{placement:r,overflows:N}],!N.every(T=>T<=0)){var $,v;const T=((($=i.flip)==null?void 0:$.index)||0)+1,k=B[T];if(k)return{data:{index:T,overflows:C},reset:{placement:k}};let Y=(v=C.filter(W=>W.overflows[0]<=0).sort((W,oe)=>W.overflows[1]-oe.overflows[1])[0])==null?void 0:v.placement;if(!Y)switch(m){case"bestFit":{var d;const W=(d=C.map(oe=>[oe.placement,oe.overflows.filter(re=>re>0).reduce((re,ie)=>re+ie,0)]).sort((oe,re)=>oe[1]-re[1])[0])==null?void 0:d[0];W&&(Y=W);break}case"initialPlacement":Y=s}if(r!==Y)return{reset:{placement:Y}}}return{}}}},Ua=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(o,s){const{placement:c,platform:l,elements:a}=o,f=await(l.isRTL==null?void 0:l.isRTL(a.floating)),h=Qt(c),m=Zn(c),g=er(c)==="x",w=["left","top"].includes(h)?-1:1,b=f&&g?-1:1,S=typeof s=="function"?s(o):s;let{mainAxis:A,crossAxis:E,alignmentAxis:x}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...S};return m&&typeof x=="number"&&(E=m==="end"?-1*x:x),g?{x:E*b,y:A*w}:{x:A*w,y:E*b}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function Wa(e){return e==="x"?"y":"x"}const Va=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:c={fn:S=>{let{x:A,y:E}=S;return{x:A,y:E}}},...l}=e,a={x:n,y:r},f=await Yo(t,l),h=er(Qt(i)),m=Wa(h);let g=a[h],w=a[m];if(o){const S=h==="y"?"bottom":"right";g=ci(g+f[h==="y"?"top":"left"],g,g-f[S])}if(s){const S=m==="y"?"bottom":"right";w=ci(w+f[m==="y"?"top":"left"],w,w-f[S])}const b=c.fn({...t,[h]:g,[m]:w});return{...b,data:{x:b.x-n,y:b.y-r}}}}};function ot(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){return ot(e).getComputedStyle(e)}function zo(e){return e instanceof ot(e).Node}function Mt(e){return zo(e)?(e.nodeName||"").toLowerCase():""}let ur;function Ho(){if(ur)return ur;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(ur=e.brands.map(t=>t.brand+"/"+t.version).join(" "),ur):navigator.userAgent}function bt(e){return e instanceof ot(e).HTMLElement}function st(e){return e instanceof ot(e).Element}function So(e){return typeof ShadowRoot>"u"?!1:e instanceof ot(e).ShadowRoot||e instanceof ShadowRoot}function Wn(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=gt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function qa(e){return["table","td","th"].includes(Mt(e))}function ui(e){const t=/firefox/i.test(Ho()),n=gt(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const o=n.contain;return o!=null&&o.includes(i)})}function li(){return/^((?!chrome|android).)*safari/i.test(Ho())}function Ur(e){return["html","body","#document"].includes(Mt(e))}const xo=Math.min,Dn=Math.max,Pr=Math.round;function Jo(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bt(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,c=Pr(n)!==o||Pr(r)!==s;return c&&(n=o,r=s),{width:n,height:r,fallback:c}}function Go(e){return st(e)?e:e.contextElement}const Xo={x:1,y:1};function gn(e){const t=Go(e);if(!bt(t))return Xo;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=Jo(t);let s=(o?Pr(n.width):n.width)/r,c=(o?Pr(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),c&&Number.isFinite(c)||(c=1),{x:s,y:c}}function nn(e,t,n,r){var i,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=Go(e);let l=Xo;t&&(r?st(r)&&(l=gn(r)):l=gn(e));const a=c?ot(c):window,f=li()&&n;let h=(s.left+(f&&((i=a.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,m=(s.top+(f&&((o=a.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,g=s.width/l.x,w=s.height/l.y;if(c){const b=ot(c),S=r&&st(r)?ot(r):r;let A=b.frameElement;for(;A&&r&&S!==b;){const E=gn(A),x=A.getBoundingClientRect(),B=getComputedStyle(A);x.x+=(A.clientLeft+parseFloat(B.paddingLeft))*E.x,x.y+=(A.clientTop+parseFloat(B.paddingTop))*E.y,h*=E.x,m*=E.y,g*=E.x,w*=E.y,h+=x.x,m+=x.y,A=ot(A).frameElement}}return kr({width:g,height:w,x:h,y:m})}function Ft(e){return((zo(e)?e.ownerDocument:e.document)||window.document).documentElement}function Wr(e){return st(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Qo(e){return nn(Ft(e)).left+Wr(e).scrollLeft}function xn(e){if(Mt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||So(e)&&e.host||Ft(e);return So(t)?t.host:t}function Zo(e){const t=xn(e);return Ur(t)?t.ownerDocument.body:bt(t)&&Wn(t)?t:Zo(t)}function jn(e,t){var n;t===void 0&&(t=[]);const r=Zo(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=ot(r);return i?t.concat(o,o.visualViewport||[],Wn(r)?r:[]):t.concat(r,jn(r))}function Ao(e,t,n){let r;if(t==="viewport")r=function(s,c){const l=ot(s),a=Ft(s),f=l.visualViewport;let h=a.clientWidth,m=a.clientHeight,g=0,w=0;if(f){h=f.width,m=f.height;const b=li();(!b||b&&c==="fixed")&&(g=f.offsetLeft,w=f.offsetTop)}return{width:h,height:m,x:g,y:w}}(e,n);else if(t==="document")r=function(s){const c=Ft(s),l=Wr(s),a=s.ownerDocument.body,f=Dn(c.scrollWidth,c.clientWidth,a.scrollWidth,a.clientWidth),h=Dn(c.scrollHeight,c.clientHeight,a.scrollHeight,a.clientHeight);let m=-l.scrollLeft+Qo(s);const g=-l.scrollTop;return gt(a).direction==="rtl"&&(m+=Dn(c.clientWidth,a.clientWidth)-f),{width:f,height:h,x:m,y:g}}(Ft(e));else if(st(t))r=function(s,c){const l=nn(s,!0,c==="fixed"),a=l.top+s.clientTop,f=l.left+s.clientLeft,h=bt(s)?gn(s):{x:1,y:1};return{width:s.clientWidth*h.x,height:s.clientHeight*h.y,x:f*h.x,y:a*h.y}}(t,n);else{const s={...t};if(li()){var i,o;const c=ot(e);s.x-=((i=c.visualViewport)==null?void 0:i.offsetLeft)||0,s.y-=((o=c.visualViewport)==null?void 0:o.offsetTop)||0}r=s}return kr(r)}function es(e,t){const n=xn(e);return!(n===t||!st(n)||Ur(n))&&(gt(n).position==="fixed"||es(n,t))}function Eo(e,t){return bt(e)&&gt(e).position!=="fixed"?t?t(e):e.offsetParent:null}function Oo(e,t){const n=ot(e);if(!bt(e))return n;let r=Eo(e,t);for(;r&&qa(r)&&gt(r).position==="static";)r=Eo(r,t);return r&&(Mt(r)==="html"||Mt(r)==="body"&&gt(r).position==="static"&&!ui(r))?n:r||function(i){let o=xn(i);for(;bt(o)&&!Ur(o);){if(ui(o))return o;o=xn(o)}return null}(e)||n}function Ya(e,t,n){const r=bt(t),i=Ft(t),o=nn(e,!0,n==="fixed",t);let s={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(r||!r&&n!=="fixed")if((Mt(t)!=="body"||Wn(i))&&(s=Wr(t)),bt(t)){const l=nn(t,!0);c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}else i&&(c.x=Qo(i));return{x:o.left+s.scrollLeft-c.x,y:o.top+s.scrollTop-c.y,width:o.width,height:o.height}}const za={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=n==="clippingAncestors"?function(a,f){const h=f.get(a);if(h)return h;let m=jn(a).filter(S=>st(S)&&Mt(S)!=="body"),g=null;const w=gt(a).position==="fixed";let b=w?xn(a):a;for(;st(b)&&!Ur(b);){const S=gt(b),A=ui(b);A||S.position!=="fixed"||(g=null),(w?!A&&!g:!A&&S.position==="static"&&g&&["absolute","fixed"].includes(g.position)||Wn(b)&&!A&&es(a,b))?m=m.filter(E=>E!==b):g=S,b=xn(b)}return f.set(a,m),m}(t,this._c):[].concat(n),s=[...o,r],c=s[0],l=s.reduce((a,f)=>{const h=Ao(t,f,i);return a.top=Dn(h.top,a.top),a.right=xo(h.right,a.right),a.bottom=xo(h.bottom,a.bottom),a.left=Dn(h.left,a.left),a},Ao(t,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=bt(n),o=Ft(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},c={x:1,y:1};const l={x:0,y:0};if((i||!i&&r!=="fixed")&&((Mt(n)!=="body"||Wn(o))&&(s=Wr(n)),bt(n))){const a=nn(n);c=gn(n),l.x=a.x+n.clientLeft,l.y=a.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-s.scrollLeft*c.x+l.x,y:t.y*c.y-s.scrollTop*c.y+l.y}},isElement:st,getDimensions:function(e){return Jo(e)},getOffsetParent:Oo,getDocumentElement:Ft,getScale:gn,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||Oo,o=this.getDimensions;return{reference:Ya(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>gt(e).direction==="rtl"};function Ha(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:c=!1}=r,l=i||o?[...st(e)?jn(e):e.contextElement?jn(e.contextElement):[],...jn(t)]:[];l.forEach(m=>{const g=!st(m)&&m.toString().includes("V");!i||c&&!g||m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});let a,f=null;s&&(f=new ResizeObserver(()=>{n()}),st(e)&&!c&&f.observe(e),st(e)||!e.contextElement||c||f.observe(e.contextElement),f.observe(t));let h=c?nn(e):null;return c&&function m(){const g=nn(e);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||n(),h=g,a=requestAnimationFrame(m)}(),n(),()=>{var m;l.forEach(g=>{i&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),(m=f)==null||m.disconnect(),f=null,c&&cancelAnimationFrame(a)}}const Ja=(e,t,n)=>{const r=new Map,i={platform:za,...n},o={...i.platform,_c:r};return Ba(e,t,{...i,platform:o})};function Ve(){}const Vr=e=>e;function Ga(e,t){for(const n in t)e[n]=t[n];return e}function ts(e){return e()}function ko(){return Object.create(null)}function Rt(e){e.forEach(ts)}function sn(e){return typeof e=="function"}function Xa(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let lr;function Bf(e,t){return lr||(lr=document.createElement("a")),lr.href=t,e===lr.href}function Qa(e){return Object.keys(e).length===0}function Mi(e,...t){if(e==null)return Ve;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ui(e){let t;return Mi(e,n=>t=n)(),t}function Df(e,t,n){e.$$.on_destroy.push(Mi(t,n))}function jf(e,t,n,r){if(e){const i=ns(e,t,n,r);return e[0](i)}}function ns(e,t,n,r){return e[1]&&r?Ga(n.ctx.slice(),e[1](r(t))):n.ctx}function Rf(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(t.dirty.length,i.length);for(let c=0;c<s;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function $f(e,t,n,r,i,o){if(i){const s=ns(t,n,r,o);e.p(s,i)}}function Lf(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Kf(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ff(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function Mf(e){const t={};for(const n in e)t[n]=!0;return t}function Uf(e){return e??""}function Wf(e,t,n){return e.set(n),t}function Vf(e){return e&&sn(e.destroy)?e.destroy:Ve}function qf(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const rs=typeof window<"u";let qr=rs?()=>window.performance.now():()=>Date.now(),Wi=rs?e=>requestAnimationFrame(e):Ve;const vn=new Set;function is(e){vn.forEach(t=>{t.c(e)||(vn.delete(t),t.f())}),vn.size!==0&&Wi(is)}function Yr(e){let t;return vn.size===0&&Wi(is),{promise:new Promise(n=>{vn.add(t={c:e,f:n})}),abort(){vn.delete(t)}}}const Yf=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Za(e,t){e.appendChild(t)}function os(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ec(e){const t=ss("style");return tc(os(e),t),t.sheet}function tc(e,t){return Za(e.head||e,t),t.sheet}function nc(e,t,n){e.insertBefore(t,n||null)}function Vi(e){e.parentNode&&e.parentNode.removeChild(e)}function zf(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function ss(e){return document.createElement(e)}function rc(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function as(e){return document.createTextNode(e)}function Hf(){return as(" ")}function Jf(){return as("")}function Gf(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function Xf(e){return function(t){return t.preventDefault(),e.call(this,t)}}function ic(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const oc=["width","height"];function Qf(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&oc.indexOf(r)===-1?e[r]=t[r]:ic(e,r,t[r])}function Zf(e){let t;return{p(...n){t=n,t.forEach(r=>e.push(r))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function sc(e){return Array.from(e.childNodes)}function ed(e,t){t=""+t,e.data!==t&&(e.data=t)}function td(e,t){e.value=t??""}function nd(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function rd(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function id(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];r.selected=~t.indexOf(r.__value)}}function od(e){const t=e.querySelector(":checked");return t&&t.__value}function sd(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function ad(e,t,n){e.classList[n?"add":"remove"](t)}function cs(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class cd{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.is_svg?this.e=rc(n.nodeName):this.e=ss(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)nc(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Vi)}}function ud(e,t){return new e(t)}const Cr=new Map;let Ir=0;function ac(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function cc(e,t){const n={stylesheet:ec(t),rules:{}};return Cr.set(e,n),n}function Vn(e,t,n,r,i,o,s,c=0){const l=16.666/r;let a=`{
`;for(let S=0;S<=1;S+=l){const A=t+(n-t)*o(S);a+=S*100+`%{${s(A,1-A)}}
`}const f=a+`100% {${s(n,1-n)}}
}`,h=`__svelte_${ac(f)}_${c}`,m=os(e),{stylesheet:g,rules:w}=Cr.get(m)||cc(m,e);w[h]||(w[h]=!0,g.insertRule(`@keyframes ${h} ${f}`,g.cssRules.length));const b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${h} ${r}ms linear ${i}ms 1 both`,Ir+=1,h}function qn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Ir-=i,Ir||uc())}function uc(){Wi(()=>{Ir||(Cr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&Vi(t)}),Cr.clear())})}function ld(e,t,n,r){if(!t)return Ve;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return Ve;const{delay:o=0,duration:s=300,easing:c=Vr,start:l=qr()+o,end:a=l+s,tick:f=Ve,css:h}=n(e,{from:t,to:i},r);let m=!0,g=!1,w;function b(){h&&(w=Vn(e,0,1,s,o,c,h)),o||(g=!0)}function S(){h&&qn(e,w),m=!1}return Yr(A=>{if(!g&&A>=l&&(g=!0),g&&A>=a&&(f(1,0),S()),!m)return!1;if(g){const E=A-l,x=0+1*c(E/s);f(x,1-x)}return!0}),b(),f(0,1),S}function fd(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,lc(e,i)}}function lc(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Yn;function Rn(e){Yn=e}function tr(){if(!Yn)throw new Error("Function called outside component initialization");return Yn}function dd(e){tr().$$.on_mount.push(e)}function hd(e){tr().$$.on_destroy.push(e)}function pd(){const e=tr();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=cs(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}function yd(e,t){return tr().$$.context.set(e,t),t}function md(e){return tr().$$.context.get(e)}function gd(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const pn=[],To=[];let bn=[];const fi=[],us=Promise.resolve();let di=!1;function ls(){di||(di=!0,us.then(fs))}function vd(){return ls(),us}function An(e){bn.push(e)}function bd(e){fi.push(e)}const ei=new Set;let ln=0;function fs(){if(ln!==0)return;const e=Yn;do{try{for(;ln<pn.length;){const t=pn[ln];ln++,Rn(t),fc(t.$$)}}catch(t){throw pn.length=0,ln=0,t}for(Rn(null),pn.length=0,ln=0;To.length;)To.pop()();for(let t=0;t<bn.length;t+=1){const n=bn[t];ei.has(n)||(ei.add(n),n())}bn.length=0}while(pn.length);for(;fi.length;)fi.pop()();di=!1,ei.clear(),Rn(e)}function fc(e){if(e.fragment!==null){e.update(),Rt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(An)}}function dc(e){const t=[],n=[];bn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),bn=t}let Pn;function qi(){return Pn||(Pn=Promise.resolve(),Pn.then(()=>{Pn=null})),Pn}function Zt(e,t,n){e.dispatchEvent(cs(`${t?"intro":"outro"}${n}`))}const br=new Set;let At;function wd(){At={r:0,c:[],p:At}}function _d(){At.r||Rt(At.c),At=At.p}function ds(e,t){e&&e.i&&(br.delete(e),e.i(t))}function hc(e,t,n,r){if(e&&e.o){if(br.has(e))return;br.add(e),At.c.push(()=>{br.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Yi={duration:0};function Sd(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,s,c,l=0;function a(){s&&qn(e,s)}function f(){const{delay:m=0,duration:g=300,easing:w=Vr,tick:b=Ve,css:S}=i||Yi;S&&(s=Vn(e,0,1,g,m,w,S,l++)),b(0,1);const A=qr()+m,E=A+g;c&&c.abort(),o=!0,An(()=>Zt(e,!0,"start")),c=Yr(x=>{if(o){if(x>=E)return b(1,0),Zt(e,!0,"end"),a(),o=!1;if(x>=A){const B=w((x-A)/g);b(B,1-B)}}return o})}let h=!1;return{start(){h||(h=!0,qn(e),sn(i)?(i=i(r),qi().then(f)):f())},invalidate(){h=!1},end(){o&&(a(),o=!1)}}}function xd(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,s;const c=At;c.r+=1;function l(){const{delay:a=0,duration:f=300,easing:h=Vr,tick:m=Ve,css:g}=i||Yi;g&&(s=Vn(e,1,0,f,a,h,g));const w=qr()+a,b=w+f;An(()=>Zt(e,!1,"start")),Yr(S=>{if(o){if(S>=b)return m(0,1),Zt(e,!1,"end"),--c.r||Rt(c.c),!1;if(S>=w){const A=h((S-w)/f);m(1-A,A)}}return o})}return sn(i)?qi().then(()=>{i=i(r),l()}):l(),{end(a){a&&i.tick&&i.tick(1,0),o&&(s&&qn(e,s),o=!1)}}}function Ad(e,t,n,r){const i={direction:"both"};let o=t(e,n,i),s=r?0:1,c=null,l=null,a=null;function f(){a&&qn(e,a)}function h(g,w){const b=g.b-s;return w*=Math.abs(b),{a:s,b:g.b,d:b,duration:w,start:g.start,end:g.start+w,group:g.group}}function m(g){const{delay:w=0,duration:b=300,easing:S=Vr,tick:A=Ve,css:E}=o||Yi,x={start:qr()+w,b:g};g||(x.group=At,At.r+=1),c||l?l=x:(E&&(f(),a=Vn(e,s,g,b,w,S,E)),g&&A(0,1),c=h(x,b),An(()=>Zt(e,g,"start")),Yr(B=>{if(l&&B>l.start&&(c=h(l,b),l=null,Zt(e,c.b,"start"),E&&(f(),a=Vn(e,s,c.b,c.duration,0,S,o.css))),c){if(B>=c.end)A(s=c.b,1-s),Zt(e,c.b,"end"),l||(c.b?f():--c.group.r||Rt(c.group.c)),c=null;else if(B>=c.start){const P=B-c.start;s=c.a+c.d*S(P/c.duration),A(s,1-s)}}return!!(c||l)}))}return{run(g){sn(o)?qi().then(()=>{o=o(i),m(g)}):m(g)},end(){f(),c=l=null}}}function pc(e,t){e.d(1),t.delete(e.key)}function yc(e,t){hc(e,1,1,()=>{t.delete(e.key)})}function Ed(e,t){e.f(),pc(e,t)}function Od(e,t){e.f(),yc(e,t)}function kd(e,t,n,r,i,o,s,c,l,a,f,h){let m=e.length,g=o.length,w=m;const b={};for(;w--;)b[e[w].key]=w;const S=[],A=new Map,E=new Map,x=[];for(w=g;w--;){const C=h(i,o,w),$=n(C);let v=s.get($);v?r&&x.push(()=>v.p(C,t)):(v=a($,C),v.c()),A.set($,S[w]=v),$ in b&&E.set($,Math.abs(w-b[$]))}const B=new Set,P=new Set;function N(C){ds(C,1),C.m(c,f),s.set(C.key,C),f=C.first,g--}for(;m&&g;){const C=S[g-1],$=e[m-1],v=C.key,d=$.key;C===$?(f=C.first,m--,g--):A.has(d)?!s.has(v)||B.has(v)?N(C):P.has(d)?m--:E.get(v)>E.get(d)?(P.add(v),N(C)):(B.add(d),m--):(l($,s),m--)}for(;m--;){const C=e[m];A.has(C.key)||l(C,s)}for(;g;)N(S[g-1]);return Rt(x),S}function Td(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],c=t[o];if(c){for(const l in s)l in c||(r[l]=1);for(const l in c)i[l]||(n[l]=c[l],i[l]=1);e[o]=c}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function Pd(e){return typeof e=="object"&&e!==null?e:{}}function Cd(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Id(e){e&&e.c()}function mc(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||An(()=>{const s=e.$$.on_mount.map(ts).filter(sn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Rt(s),e.$$.on_mount=[]}),o.forEach(An)}function gc(e,t){const n=e.$$;n.fragment!==null&&(dc(n.after_update),Rt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function vc(e,t){e.$$.dirty[0]===-1&&(pn.push(e),ls(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Nd(e,t,n,r,i,o,s,c=[-1]){const l=Yn;Rn(e);const a=e.$$={fragment:null,ctx:[],props:o,update:Ve,not_equal:i,bound:ko(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ko(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(e,t.props||{},(h,m,...g)=>{const w=g.length?g[0]:m;return a.ctx&&i(a.ctx[h],a.ctx[h]=w)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](w),f&&vc(e,h)),m}):[],a.update(),f=!0,Rt(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const h=sc(t.target);a.fragment&&a.fragment.l(h),h.forEach(Vi)}else a.fragment&&a.fragment.c();t.intro&&ds(e.$$.fragment),mc(e,t.target,t.anchor,t.customElement),fs()}Rn(l)}class Bd{$destroy(){gc(this,1),this.$destroy=Ve}$on(t,n){if(!sn(n))return Ve;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Qa(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const fn=[];function bc(e,t){return{subscribe:Et(e,t).subscribe}}function Et(e,t=Ve){let n;const r=new Set;function i(c){if(Xa(e,c)&&(e=c,n)){const l=!fn.length;for(const a of r)a[1](),fn.push(a,e);if(l){for(let a=0;a<fn.length;a+=2)fn[a][0](fn[a+1]);fn.length=0}}}function o(c){i(c(e))}function s(c,l=Ve){const a=[c,l];return r.add(a),r.size===1&&(n=t(i)||Ve),c(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function wc(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return bc(n,s=>{let c=!1;const l=[];let a=0,f=Ve;const h=()=>{if(a)return;f();const g=t(r?l[0]:l,s);o?s(g):f=sn(g)?g:Ve},m=i.map((g,w)=>Mi(g,b=>{l[w]=b,a&=~(1<<w),c&&h()},()=>{a|=1<<w}));return c=!0,h(),function(){Rt(m),f(),c=!1}})}const hs=Et(void 0);function Dd(e,t){const{computePosition:n,autoUpdate:r,offset:i,shift:o,flip:s,arrow:c,size:l,autoPlacement:a,hide:f,inline:h}=Ui(hs),m={open:!1,autoUpdateCleanup:()=>{}},g=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let w;const b="https://www.skeleton.dev/utilities/popups";let S,A;function E(){S=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),A=S.querySelector(".arrow")??document.createElement("div")}E();function x(){var d,T,k,Y,W,oe,re,ie;if(!S)throw new Error(`The data-popup="${t.target}" element was not found. ${b}`);if(!n)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${b}`);if(!i)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${b}`);if(!o)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${b}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${b}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${b}`);const v=[];l&&v.push(l((d=t.middleware)==null?void 0:d.size)),a&&v.push(a((T=t.middleware)==null?void 0:T.autoPlacement)),f&&v.push(f((k=t.middleware)==null?void 0:k.hide)),h&&v.push(h((Y=t.middleware)==null?void 0:Y.inline)),n(e,S,{placement:t.placement??"bottom",middleware:[i(((W=t.middleware)==null?void 0:W.offset)??8),o(((oe=t.middleware)==null?void 0:oe.shift)??{padding:8}),s((re=t.middleware)==null?void 0:re.flip),c(((ie=t.middleware)==null?void 0:ie.arrow)??{element:A||null}),...v]}).then(({x:se,y:Pe,placement:Ce,middlewareData:$e})=>{if(Object.assign(S.style,{left:`${se}px`,top:`${Pe}px`}),A){const{x:Fe,y:Ze}=$e.arrow,J={top:"bottom",right:"left",bottom:"top",left:"right"}[Ce.split("-")[0]];Object.assign(A.style,{left:Fe!=null?`${Fe}px`:"",top:Ze!=null?`${Ze}px`:"",right:"",bottom:"",[J]:"-4px"})}})}function B(){S&&(m.open=!0,t.state&&t.state({state:m.open}),x(),S.style.display="block",S.style.opacity="1",S.style.pointerEvents="auto",S.removeAttribute("inert"),m.autoUpdateCleanup=r(e,S,x),w=Array.from(S==null?void 0:S.querySelectorAll(g)))}function P(v){if(!S)return;const d=parseFloat(window.getComputedStyle(S).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{m.open=!1,t.state&&t.state({state:m.open}),S.style.opacity="0",S.setAttribute("inert",""),m.autoUpdateCleanup&&m.autoUpdateCleanup(),v&&v()},d)}function N(){m.open===!1?B():P()}function C(v){if(m.open===!1||e.contains(v.target))return;if(S&&S.contains(v.target)===!1){P();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,T=S==null?void 0:S.querySelectorAll(d);T==null||T.forEach(k=>{k.contains(v.target)&&P()})}const $=v=>{if(m.open===!1)return;const d=v.key;if(d==="Escape"){v.preventDefault(),e.focus(),P();return}w=Array.from(S==null?void 0:S.querySelectorAll(g)),m.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&g.length>0&&w.length>0&&(v.preventDefault(),w[0].focus())};switch(t.event){case"click":e.addEventListener("click",N,!0),window.addEventListener("click",C,!0);break;case"hover":e.addEventListener("mouseover",B,!0),e.addEventListener("mouseleave",()=>P(),!0);break;case"focus-blur":e.addEventListener("focus",N,!0),e.addEventListener("blur",()=>P(),!0);break;case"focus-click":e.addEventListener("focus",B,!0),window.addEventListener("click",C,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${b}`)}return window.addEventListener("keydown",$,!0),x(),{update(v){P(()=>{t=v,x(),E()})},destroy(){e.removeEventListener("click",N,!0),e.removeEventListener("mouseover",B,!0),e.removeEventListener("mouseleave",()=>P(),!0),e.removeEventListener("focus",N,!0),e.removeEventListener("focus",B,!0),e.removeEventListener("blur",()=>P(),!0),window.removeEventListener("click",C,!0),window.removeEventListener("keydown",$,!0)}}}function _c(){const{subscribe:e,set:t,update:n}=Et({});return{subscribe:e,set:t,update:n,open:r=>n(()=>({open:!0,...r})),close:()=>n(r=>(r.open=!1,r))}}const ps=_c();function Sc(){const{subscribe:e,set:t,update:n}=Et([]);return{subscribe:e,set:t,update:n,trigger:r=>n(i=>(i.push(r),i)),close:()=>n(r=>(r.length>0&&r.shift(),r)),clear:()=>t([])}}const Ut=Sc(),xc={message:"Missing Toast Message",autohide:!0,timeout:5e3};function Ac(){const e=Math.random();return Number(e).toString(32)}function Po(e){if(e.autohide===!0)return setTimeout(()=>{zi.close(e.id)},e.timeout)}function Ec(){const{subscribe:e,set:t,update:n}=Et([]);return{subscribe:e,trigger:r=>{const i=Ac();return n(o=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const s={...xc,...r,id:i};return s.timeoutId=Po(s),o.push(s),o}),i},close:r=>n(i=>{if(i.length>0){const o=i.findIndex(c=>c.id===r),s=i[o];s&&(s.callback&&s.callback({id:r,status:"closed"}),s.timeoutId&&clearTimeout(s.timeoutId),i.splice(o,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=Po(i[r])),i)),clear:()=>t([])}}const zi=Ec(),ti={};function Co(e){return e==="local"?localStorage:sessionStorage}function Hi(e,t,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function o(s,c){Co(i).setItem(s,r.stringify(c))}if(!ti[e]){const s=Et(t,a=>{const f=Co(i).getItem(e);f&&a(r.parse(f));{const h=m=>{m.key===e&&a(m.newValue?r.parse(m.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:c,set:l}=s;ti[e]={set(a){o(e,a),l(a)},update(a){const f=a(Ui(s));o(e,f),l(f)},subscribe:c}}return ti[e]}Hi("modeOsPrefers",!1);Hi("modeUserPrefers",void 0);Hi("modeCurrent",!1);const Oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Re=Object.keys,Ye=Array.isArray;function Ge(e,t){return typeof t!="object"||Re(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Oe.Promise||(Oe.Promise=Promise);const zn=Object.getPrototypeOf,Oc={}.hasOwnProperty;function at(e,t){return Oc.call(e,t)}function En(e,t){typeof t=="function"&&(t=t(zn(e))),(typeof Reflect>"u"?Re:Reflect.ownKeys)(t).forEach(n=>{Bt(e,n,t[n])})}const ys=Object.defineProperty;function Bt(e,t,n,r){ys(e,t,Ge(n&&at(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function wn(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Bt(e.prototype,"constructor",e),{extend:En.bind(null,e.prototype)}}}}const kc=Object.getOwnPropertyDescriptor;function Ji(e,t){let n;return kc(e,t)||(n=zn(e))&&Ji(n,t)}const Tc=[].slice;function Nr(e,t,n){return Tc.call(e,t,n)}function ms(e,t){return t(e)}function In(e){if(!e)throw new Error("Assertion Failed")}function gs(e){Oe.setImmediate?setImmediate(e):setTimeout(e,0)}function vs(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Dt(e,t){if(at(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=Dt(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var c=e[t.substr(0,s)];return c===void 0?void 0:Dt(c,t.substr(s+1))}}function vt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){In(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)vt(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),c=t.substr(o+1);if(c==="")n===void 0?Ye(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&at(e,s)||(l=e[s]={}),vt(l,c,n)}}else n===void 0?Ye(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function bs(e){var t={};for(var n in e)at(e,n)&&(t[n]=e[n]);return t}const Pc=[].concat;function ws(e){return Pc.apply([],e)}const _s="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ws([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Oe[e]),Cc=_s.map(e=>Oe[e]);vs(_s,e=>[e,!0]);let Kt=null;function nr(e){Kt=typeof WeakMap<"u"&&new WeakMap;const t=hi(e);return Kt=null,t}function hi(e){if(!e||typeof e!="object")return e;let t=Kt&&Kt.get(e);if(t)return t;if(Ye(e)){t=[],Kt&&Kt.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(hi(e[n]))}else if(Cc.indexOf(e.constructor)>=0)t=e;else{const o=zn(e);for(var i in t=o===Object.prototype?{}:Object.create(o),Kt&&Kt.set(e,t),e)at(e,i)&&(t[i]=hi(e[i]))}return t}const{toString:Ic}={};function pi(e){return Ic.call(e).slice(8,-1)}const yi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Nc=typeof yi=="symbol"?function(e){var t;return e!=null&&(t=e[yi])&&t.apply(e)}:function(){return null},yn={};function It(e){var t,n,r,i;if(arguments.length===1){if(Ye(e))return e.slice();if(this===yn&&typeof e=="string")return[e];if(i=Nc(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Gi=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Ot=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ss(e,t){Ot=e,xs=t}var xs=()=>!0;const Bc=!new Error("").stack;function an(){if(Bc)try{throw an.arguments,new Error}catch(e){return e}return new Error}function mi(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(xs).map(r=>`
`+r).join("")):""}var As=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(As),Dc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function _n(e,t){this._e=an(),this.name=e,this.message=t}function Es(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Br(e,t,n,r){this._e=an(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Es(e,t)}function $n(e,t){this._e=an(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=Es(e,t)}wn(_n).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+mi(this._e,2))}},toString:function(){return this.name+": "+this.message}}),wn(Br).from(_n),wn($n).from(_n);var Qi=Xi.reduce((e,t)=>(e[t]=t+"Error",e),{});const jc=_n;var ne=Xi.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=an(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=Dc[t]||n,this.inner=null)}return wn(r).from(jc),e[t]=r,e},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var Io=As.reduce((e,t)=>(e[t+"Error"]=ne[t],e),{}),wr=Xi.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ne[t]),e),{});function Se(){}function Hn(e){return e}function Rc(e,t){return e==null||e===Hn?t:function(n){return t(e(n))}}function rn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function $c(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?rn(r,this.onsuccess):r),i&&(this.onerror=this.onerror?rn(i,this.onerror):i),o!==void 0?o:n}}function Lc(e,t){return e===Se?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?rn(n,this.onsuccess):n),r&&(this.onerror=this.onerror?rn(r,this.onerror):r)}}function Kc(e,t){return e===Se?t:function(n){var r=e.apply(this,arguments);Ge(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?rn(i,this.onsuccess):i),o&&(this.onerror=this.onerror?rn(o,this.onerror):o),r===void 0?s===void 0?void 0:s:Ge(r,s)}}function Fc(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function Zi(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}wr.ModifyError=Br,wr.DexieError=_n,wr.BulkError=$n;var Jn={};const[gi,Dr,vi]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,zn(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,zn(t),e]})(),Os=Dr&&Dr.then,_r=gi&&gi.constructor,eo=!!vi;var bi=!1,Mc=vi?()=>{vi.then(fr)}:Oe.setImmediate?setImmediate.bind(null,fr):Oe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{fr(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(fr,0)},Ln=function(e,t){Nn.push([e,t]),jr&&(Mc(),jr=!1)},wi=!0,jr=!0,en=[],Sr=[],_i=null,Si=Hn,Sn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Bo,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Bo(e[0],e[1])}catch{}})}},Q=Sn,Nn=[],tn=0,xr=[];function V(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Se,this._lib=!1;var t=this._PSD=Q;if(Ot&&(this._stackHolder=an(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Jn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ai(this,this._value))}this._state=null,this._value=null,++t.ref,Ts(this,e)}const xi={get:function(){var e=Q,t=Rr;function n(r,i){var o=!e.global&&(e!==Q||t!==Rr);const s=o&&!jt();var c=new V((l,a)=>{to(this,new ks($r(r,e,o,s),$r(i,e,o,s),l,a,e))});return Ot&&Is(c,this),c}return n.prototype=Jn,n},set:function(e){Bt(this,"then",e&&e.prototype===Jn?xi:{get:function(){return e},set:xi.set})}};function ks(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function Ts(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&rr();n&&typeof n.then=="function"?Ts(e,(i,o)=>{n instanceof V?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,Ps(e)),r&&ir()}},Ai.bind(null,e))}catch(n){Ai(e,n)}}function Ai(e,t){if(Sr.push(t),e._state===null){var n=e._lib&&rr();t=Si(t),e._state=!1,e._value=t,Ot&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,o){try{r.apply(null,o)}catch(s){i&&i(s)}}(()=>{var r=Ji(t,"stack");t._promise=e,Bt(t,"stack",{get:()=>bi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){en.some(i=>i._value===r._value)||en.push(r)}(e),Ps(e),n&&ir()}}function Ps(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)to(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),tn===0&&(++tn,Ln(()=>{--tn==0&&no()},[]))}function to(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++tn,Ln(Uc,[n,e,t])}else e._listeners.push(t)}function Uc(e,t,n){try{_i=t;var r,i=t._value;t._state?r=e(i):(Sr.length&&(Sr=[]),r=e(i),Sr.indexOf(i)===-1&&function(o){for(var s=en.length;s;)if(en[--s]._value===o._value)return void en.splice(s,1)}(t)),n.resolve(r)}catch(o){n.reject(o)}finally{_i=null,--tn==0&&no(),--n.psd.ref||n.psd.finalize()}}function Cs(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,s=e._value;s!=null?(i=s.name||"Error",o=s.message||s,r=mi(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return Ot&&((r=mi(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&Cs(e._prev,t,n)),t}function Is(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function fr(){rr()&&ir()}function rr(){var e=wi;return wi=!1,jr=!1,e}function ir(){var e,t,n;do for(;Nn.length>0;)for(e=Nn,Nn=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Nn.length>0);wi=!0,jr=!0}function no(){var e=en;en=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=xr.slice(0),n=t.length;n;)t[--n]()}function dr(e){return new V(Jn,!1,e)}function ke(e,t){var n=Q;return function(){var r=rr(),i=Q;try{return Vt(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Vt(i,!1),r&&ir()}}}En(V.prototype,{then:xi,_then:function(e,t){to(this,new ks(null,null,e,t,Q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):dr(r)):this.then(null,r=>r&&r.name===t?n(r):dr(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),dr(t)))},stack:{get:function(){if(this._stack)return this._stack;try{bi=!0;var e=Cs(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{bi=!1}}},timeout:function(e,t){return e<1/0?new V((n,r)=>{var i=setTimeout(()=>r(new ne.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Bt(V.prototype,Symbol.toStringTag,"Dexie.Promise"),Sn.env=Ns(),En(V,{all:function(){var e=It.apply(null,arguments).map(hr);return new V(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>V.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof V)return e;if(e&&typeof e.then=="function")return new V((n,r)=>{e.then(n,r)});var t=new V(Jn,!0,e);return Is(t,_i),t},reject:dr,race:function(){var e=It.apply(null,arguments).map(hr);return new V((t,n)=>{e.map(r=>V.resolve(r).then(t,n))})},PSD:{get:()=>Q,set:e=>Q=e},totalEchoes:{get:()=>Rr},newPSD:Wt,usePSD:kn,scheduler:{get:()=>Ln,set:e=>{Ln=e}},rejectionMapper:{get:()=>Si,set:e=>{Si=e}},follow:(e,t)=>new V((n,r)=>Wt((i,o)=>{var s=Q;s.unhandleds=[],s.onunhandled=o,s.finalize=rn(function(){(function(c){function l(){c(),xr.splice(xr.indexOf(l),1)}xr.push(l),++tn,Ln(()=>{--tn==0&&no()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))}),_r&&(_r.allSettled&&Bt(V,"allSettled",function(){const e=It.apply(null,arguments).map(hr);return new V(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,o)=>V.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),_r.any&&typeof AggregateError<"u"&&Bt(V,"any",function(){const e=It.apply(null,arguments).map(hr);return new V((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((o,s)=>V.resolve(o).then(c=>t(c),c=>{i[s]=c,--r||n(new AggregateError(i))}))})}));const qe={awaits:0,echoes:0,id:0};var Wc=0,Ar=[],ni=0,Rr=0,Vc=0;function Wt(e,t,n,r){var i=Q,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Vc;var s=Sn.env;o.env=eo?{Promise:V,PromiseProp:{value:V,configurable:!0,writable:!0},all:V.all,race:V.race,allSettled:V.allSettled,any:V.any,resolve:V.resolve,reject:V.reject,nthen:No(s.nthen,o),gthen:No(s.gthen,o)}:{},t&&Ge(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=kn(o,e,n,r);return o.ref===0&&o.finalize(),c}function On(){return qe.id||(qe.id=++Wc),++qe.awaits,qe.echoes+=100,qe.id}function jt(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=100*qe.awaits,!0)}function hr(e){return qe.echoes&&e&&e.constructor===_r?(On(),e.then(t=>(jt(),t),t=>(jt(),Le(t)))):e}function qc(e){++Rr,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.id=0),Ar.push(Q),Vt(e,!0)}function Yc(){var e=Ar[Ar.length-1];Ar.pop(),Vt(e,!1)}function Vt(e,t){var n=Q;if((t?!qe.echoes||ni++&&e===Q:!ni||--ni&&e===Q)||Bs(t?qc.bind(null,e):Yc),e!==Q&&(Q=e,n===Sn&&(Sn.env=Ns()),eo)){var r=Sn.env.Promise,i=e.env;Dr.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Ns(){var e=Oe.Promise;return eo?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Oe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Dr.then,gthen:e.prototype.then}:{}}function kn(e,t,n,r,i){var o=Q;try{return Vt(e,!0),t(n,r,i)}finally{Vt(o,!1)}}function Bs(e){Os.call(gi,e)}function $r(e,t,n,r){return typeof e!="function"?e:function(){var i=Q;n&&On(),Vt(t,!0);try{return e.apply(this,arguments)}finally{Vt(i,!1),r&&Bs(jt)}}}function No(e,t){return function(n,r){return e.call(this,$r(n,t),$r(r,t))}}(""+Os).indexOf("[native code]")===-1&&(On=jt=Se);function Bo(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Oe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),Ge(r,i)):Oe.CustomEvent&&Ge(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&Oe.dispatchEvent&&(dispatchEvent(r),!Oe.PromiseRejectionEvent&&Oe.onunhandledrejection))try{Oe.onunhandledrejection(r)}catch{}Ot&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Le=V.reject;function Ei(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Q.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Qi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Ei(e,t,n,r))):Le(o)}return i._promise(t,(o,s)=>Wt(()=>(Q.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(e._state.openComplete)return Le(new ne.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Le(new ne.DatabaseClosed);e.open().catch(Se)}return e._state.dbReadyPromise.then(()=>Ei(e,t,n,r))}const Xt=String.fromCharCode(65535),Pt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kn=[],zr=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),zc=zr,Hc=zr,Ds=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function on(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const js={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function pr(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=nr(t))[e],t)}class Jc{_trans(t,n,r){const i=this._tx||Q.trans,o=this.name;function s(l,a,f){if(!f.schema[o])throw new ne.NotFound("Table "+o+" not part of transaction");return n(f.idbtrans,f)}const c=rr();try{return i&&i.db===this.db?i===Q.trans?i._promise(t,s,r):Wt(()=>i._promise(t,s,r),{trans:i,transless:Q.transless||Q}):Ei(this.db,t,[this.name],s)}finally{c&&ir()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ye(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=Re(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(a=>a.compound&&n.every(f=>a.keyPath.indexOf(f)>=0)&&a.keyPath.every(f=>n.indexOf(f)>=0))[0];if(r&&this.db._maxKey!==Xt)return this.where(r.name).equals(r.keyPath.map(a=>t[a]));!r&&Ot&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(a,f){try{return o.cmp(a,f)===0}catch{return!1}}const[c,l]=n.reduce(([a,f],h)=>{const m=i[h],g=t[h];return[a||m,a||!m?on(f,m&&m.multi?w=>{const b=Dt(w,h);return Ye(b)&&b.some(S=>s(g,S))}:w=>s(g,Dt(w,h))):f]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ye(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var o in r)if(at(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){Ge(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=pr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?V.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}update(t,n){if(typeof t!="object"||Ye(t))return this.where(":id").equals(t).modify(n);{const r=Dt(t,this.schema.primKey.keyPath);if(r===void 0)return Le(new ne.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Re(n).forEach(i=>{vt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=pr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?V.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?V.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:js})).then(t=>t.numFailures?V.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(pr(l)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new $n(`${this.name}.bulkAdd(): ${h} of ${a} operations failed`,w)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(pr(l)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new $n(`${this.name}.bulkPut(): ${h} of ${a} operations failed`,w)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new $n(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function Fn(e){var t={},n=function(c,l){if(l){for(var a=arguments.length,f=new Array(a-1);--a;)f[a-1]=arguments[a];return t[c].subscribe.apply(null,f),e}if(typeof c=="string")return t[c]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(c,l,a){if(typeof c=="object")return s(c);l||(l=Fc),a||(a=Se);var f={subscribers:[],fire:a,subscribe:function(h){f.subscribers.indexOf(h)===-1&&(f.subscribers.push(h),f.fire=l(f.fire,h))},unsubscribe:function(h){f.subscribers=f.subscribers.filter(function(m){return m!==h}),f.fire=f.subscribers.reduce(l,a)}};return t[c]=n[c]=f,f}function s(c){Re(c).forEach(function(l){var a=c[l];if(Ye(a))o(l,c[l][0],c[l][1]);else{if(a!=="asap")throw new ne.InvalidArgument("Invalid event config");var f=o(l,Hn,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];f.subscribers.forEach(function(g){gs(function(){g.apply(null,m)})})})}})}}function Cn(e,t){return wn(t).from({prototype:e}),t}function dn(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function ri(e,t){e.filter=on(e.filter,t)}function ii(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>on(r(),t()):t,e.justLimit=n&&!r}function Er(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ne.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Do(e,t,n){const r=Er(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function yr(e,t,n,r){const i=e.replayFilter?on(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(c,l,a)=>{if(!i||i(l,a,m=>l.stop(m),m=>l.fail(m))){var f=l.primaryKey,h=""+f;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(f)),at(o,h)||(o[h]=!0,t(c,l,a))}};return Promise.all([e.or._iterate(s,n),jo(Do(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return jo(Do(e,r,n),on(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function jo(e,t,n,r){var i=ke(r?(o,s,c)=>n(r(o),s,c):n);return e.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();t&&!t(o,c=>s=c,c=>{o.stop(c),s=Se},c=>{o.fail(c),s=Se})||i(o.value,o,c=>s=c),s()})})}function Je(e,t){try{const n=Ro(e),r=Ro(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a)if(i[a]!==o[a])return i[a]<o[a]?-1:1;return s===c?0:s<c?-1:1}($o(e),$o(t));case"Array":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a){const f=Je(i[a],o[a]);if(f!==0)return f}return s===c?0:s<c?-1:1}(e,t)}}catch{}return NaN}function Ro(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=pi(e);return n==="ArrayBuffer"?"binary":n}function $o(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Gc{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,Le.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,Le.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=on(n.algorithm,t)}_iterate(t,n){return yr(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&Ge(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>yr(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(dn(r,!0))return i.count({trans:n,query:{index:Er(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return yr(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(a,f){return f?s(a[r[f]],f-1):a[i]}var c=this._ctx.dir==="next"?1:-1;function l(a,f){var h=s(a,o),m=s(f,o);return h<m?-c:h>m?c:0}return this.toArray(function(a){return a.sort(l)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&dn(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=Er(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return yr(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,dn(n)?ii(n,()=>{var r=t;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ii(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ii(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return ri(this._ctx,function(r,i,o){return!t(r.value)||(i(o),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return ri(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=on(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&dn(n,!0)&&n.limit>0)return this._read(i=>{var o=Er(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return ri(this._ctx,function(i){var o=i.primaryKey.toString(),s=at(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=Re(t),s=o.length;i=function(b){for(var S=!1,A=0;A<s;++A){var E=o[A],x=t[E];Dt(b,E)!==x&&(vt(b,E,x),S=!0)}return S}}const c=n.table.core,{outbound:l,extractKey:a}=c.schema.primaryKey,f=this.db._options.modifyChunkSize||200,h=[];let m=0;const g=[],w=(b,S)=>{const{failures:A,numFailures:E}=S;m+=b-E;for(let x of Re(A))h.push(A[x])};return this.clone().primaryKeys().then(b=>{const S=A=>{const E=Math.min(f,b.length-A);return c.getMany({trans:r,keys:b.slice(A,A+E),cache:"immutable"}).then(x=>{const B=[],P=[],N=l?[]:null,C=[];for(let v=0;v<E;++v){const d=x[v],T={value:nr(d),primKey:b[A+v]};i.call(T,T.value,T)!==!1&&(T.value==null?C.push(b[A+v]):l||Je(a(d),a(T.value))===0?(P.push(T.value),l&&N.push(b[A+v])):(C.push(b[A+v]),B.push(T.value)))}const $=dn(n)&&n.limit===1/0&&(typeof t!="function"||t===oi)&&{index:n.index,range:n.range};return Promise.resolve(B.length>0&&c.mutate({trans:r,type:"add",values:B}).then(v=>{for(let d in v.failures)C.splice(parseInt(d),1);w(B.length,v)})).then(()=>(P.length>0||$&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:N,values:P,criteria:$,changeSpec:typeof t!="function"&&t}).then(v=>w(P.length,v))).then(()=>(C.length>0||$&&t===oi)&&c.mutate({trans:r,type:"delete",keys:C,criteria:$}).then(v=>w(C.length,v))).then(()=>b.length>A+E&&S(A+f))})};return S(0).then(()=>{if(h.length>0)throw new Br("Error modifying one or more objects",h,m,g);return b.length})})})}delete(){var t=this._ctx,n=t.range;return dn(t)&&(t.isPrimKey&&!Hc||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:c,lastResult:l,results:a,numFailures:f})=>{if(f)throw new Br("Could not delete some values",Object.keys(c).map(h=>c[h]),s-f);return s-f}))}):this.modify(oi)}}const oi=(e,t)=>t.value=null;function Xc(e,t){return e<t?-1:e===t?0:1}function Qc(e,t){return e>t?-1:e===t?0:1}function it(e,t,n){var r=e instanceof $s?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function hn(e){return new e.Collection(e,()=>Rs("")).limit(0)}function Zc(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),c=-1,l=0;l<s;++l){var a=t[l];if(a!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[l],a)<0&&(c=l)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function mr(e,t,n,r){var i,o,s,c,l,a,f,h=n.length;if(!n.every(b=>typeof b=="string"))return it(e,"String expected.");function m(b){i=function(A){return A==="next"?E=>E.toUpperCase():E=>E.toLowerCase()}(b),o=function(A){return A==="next"?E=>E.toLowerCase():E=>E.toUpperCase()}(b),s=b==="next"?Xc:Qc;var S=n.map(function(A){return{lower:o(A),upper:i(A)}}).sort(function(A,E){return s(A.lower,E.lower)});c=S.map(function(A){return A.upper}),l=S.map(function(A){return A.lower}),a=b,f=b==="next"?"":r}m("next");var g=new e.Collection(e,()=>Lt(c[0],l[h-1]+r));g._ondirectionchange=function(b){m(b)};var w=0;return g._addAlgorithm(function(b,S,A){var E=b.key;if(typeof E!="string")return!1;var x=o(E);if(t(x,l,w))return!0;for(var B=null,P=w;P<h;++P){var N=Zc(E,x,c[P],l[P],s,a);N===null&&B===null?w=P+1:(B===null||s(B,N)>0)&&(B=N)}return S(B!==null?function(){b.continue(B+f)}:A),!1}),g}function Lt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Rs(e){return{type:1,lower:e,upper:e}}class $s{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?hn(this):new this.Collection(this,()=>Lt(t,n,!r,!i))}catch{return it(this,Pt)}}equals(t){return t==null?it(this,Pt):new this.Collection(this,()=>Rs(t))}above(t){return t==null?it(this,Pt):new this.Collection(this,()=>Lt(t,void 0,!0))}aboveOrEqual(t){return t==null?it(this,Pt):new this.Collection(this,()=>Lt(t,void 0,!1))}below(t){return t==null?it(this,Pt):new this.Collection(this,()=>Lt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?it(this,Pt):new this.Collection(this,()=>Lt(void 0,t))}startsWith(t){return typeof t!="string"?it(this,"String expected."):this.between(t,t+Xt,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):mr(this,(n,r)=>n.indexOf(r[0])===0,[t],Xt)}equalsIgnoreCase(t){return mr(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=It.apply(yn,arguments);return t.length===0?hn(this):mr(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=It.apply(yn,arguments);return t.length===0?hn(this):mr(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Xt)}anyOf(){const t=It.apply(yn,arguments);let n=this._cmp;try{t.sort(n)}catch{return it(this,Pt)}if(t.length===0)return hn(this);const r=new this.Collection(this,()=>Lt(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,c)=>{const l=o.key;for(;n(l,t[i])>0;)if(++i,i===t.length)return s(c),!1;return n(l,t[i])===0||(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=It.apply(yn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return it(this,Pt)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[-(1/0),i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,c=this._max;if(t.length===0)return hn(this);if(!t.every(E=>E[0]!==void 0&&E[1]!==void 0&&i(E[0],E[1])<=0))return it(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);const l=!n||n.includeLowers!==!1,a=n&&n.includeUppers===!0;let f,h=i;function m(E,x){return h(E[0],x[0])}try{f=t.reduce(function(E,x){let B=0,P=E.length;for(;B<P;++B){const N=E[B];if(r(x[0],N[1])<0&&r(x[1],N[0])>0){N[0]=s(N[0],x[0]),N[1]=c(N[1],x[1]);break}}return B===P&&E.push(x),E},[]),f.sort(m)}catch{return it(this,Pt)}let g=0;const w=a?E=>i(E,f[g][1])>0:E=>i(E,f[g][1])>=0,b=l?E=>o(E,f[g][0])>0:E=>o(E,f[g][0])>=0;let S=w;const A=new this.Collection(this,()=>Lt(f[0][0],f[f.length-1][1],!l,!a));return A._ondirectionchange=E=>{E==="next"?(S=w,h=i):(S=b,h=o),f.sort(m)},A._addAlgorithm((E,x,B)=>{for(var P=E.key;S(P);)if(++g,g===f.length)return x(B),!1;return!!function(N){return!w(N)&&!b(N)}(P)||(this._cmp(P,f[g][1])===0||this._cmp(P,f[g][0])===0||x(()=>{h===i?E.continue(f[g][0]):E.continue(f[g][1])}),!1)}),A}startsWithAnyOf(){const t=It.apply(yn,arguments);return t.every(n=>typeof n=="string")?t.length===0?hn(this):this.inAnyRange(t.map(n=>[n,n+Xt])):it(this,"startsWithAnyOf() only works with strings")}}function xt(e){return ke(function(t){return Gn(t),e(t.target.error),!1})}function Gn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const qt=Fn(null,"storagemutated");class eu{_lock(){return In(!Q.global),++this._reculock,this._reculock!==1||Q.global||(Q.lockOwnerFor=this),this}_unlock(){if(In(!Q.global),--this._reculock==0)for(Q.global||(Q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{kn(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&Q.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(In(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(r);case"MissingAPIError":throw new ne.MissingAPI(r.message,r);default:throw new ne.OpenFailed(r)}if(!this.active)throw new ne.TransactionInactive;return In(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ke(i=>{Gn(i),this._reject(t.error)}),t.onabort=ke(i=>{Gn(i),this.active&&this._reject(new ne.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=ke(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&qt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return Le(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new ne.TransactionInactive);if(this._locked())return new V((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},Q])});if(r)return Wt(()=>{var o=new V((s,c)=>{this._lock();const l=n(s,c,this);l&&l.then&&l.then(s,c)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new V((o,s)=>{var c=n(o,s,this);c&&c.then&&c.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=V.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new V((s,c)=>{r.then(l=>n._waitingQueue.push(ke(s.bind(null,l))),l=>n._waitingQueue.push(ke(c.bind(null,l)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(at(n,t))return n[t];const r=this.schema[t];if(!r)throw new ne.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Oi(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Ls(t)}}function Ls(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ks(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:vs(n,r=>[r.name,r])}}let Xn=e=>{try{return e.only([[]]),Xn=()=>[[]],[[]]}catch{return Xn=()=>Xt,Xt}};function ki(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>Dt(n,t)}(e):t=>Dt(t,e)}function Lo(e){return[].slice.call(e)}let tu=0;function Mn(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function nu(e,t,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:a,upper:f,lowerOpen:h,upperOpen:m}=l;return a===void 0?f===void 0?null:t.upperBound(f,!!m):f===void 0?t.lowerBound(a,!!h):t.bound(a,f,!!h,!!m)}const{schema:i,hasGetAll:o}=function(l,a){const f=Lo(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(h=>a.objectStore(h)).map(h=>{const{keyPath:m,autoIncrement:g}=h,w=Ye(m),b=m==null,S={},A={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:m,autoIncrement:g,unique:!0,extractKey:ki(m)},indexes:Lo(h.indexNames).map(E=>h.index(E)).map(E=>{const{name:x,unique:B,multiEntry:P,keyPath:N}=E,C={name:x,compound:Ye(N),keyPath:N,unique:B,multiEntry:P,extractKey:ki(N)};return S[Mn(N)]=C,C}),getIndexByKeyPath:E=>S[Mn(E)]};return S[":id"]=A.primaryKey,m!=null&&(S[Mn(m)]=A.primaryKey),A})},hasGetAll:f.length>0&&"getAll"in a.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map(l=>function(a){const f=a.name;return{name:f,schema:a,mutate:function({trans:h,type:m,keys:g,values:w,range:b}){return new Promise((S,A)=>{S=ke(S);const E=h.objectStore(f),x=E.keyPath==null,B=m==="put"||m==="add";if(!B&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:P}=g||w||{length:1};if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let N;const C=[],$=[];let v=0;const d=k=>{++v,Gn(k)};if(m==="deleteRange"){if(b.type===4)return S({numFailures:v,failures:$,results:[],lastResult:void 0});b.type===3?C.push(N=E.clear()):C.push(N=E.delete(r(b)))}else{const[k,Y]=B?x?[w,g]:[w,null]:[g,null];if(B)for(let W=0;W<P;++W)C.push(N=Y&&Y[W]!==void 0?E[m](k[W],Y[W]):E[m](k[W])),N.onerror=d;else for(let W=0;W<P;++W)C.push(N=E[m](k[W])),N.onerror=d}const T=k=>{const Y=k.target.result;C.forEach((W,oe)=>W.error!=null&&($[oe]=W.error)),S({numFailures:v,failures:$,results:m==="delete"?g:C.map(W=>W.result),lastResult:Y})};N.onerror=k=>{d(k),T(k)},N.onsuccess=T})},getMany:({trans:h,keys:m})=>new Promise((g,w)=>{g=ke(g);const b=h.objectStore(f),S=m.length,A=new Array(S);let E,x=0,B=0;const P=C=>{const $=C.target;A[$._pos]=$.result,++B===x&&g(A)},N=xt(w);for(let C=0;C<S;++C)m[C]!=null&&(E=b.get(m[C]),E._pos=C,E.onsuccess=P,E.onerror=N,++x);x===0&&g(A)}),get:({trans:h,key:m})=>new Promise((g,w)=>{g=ke(g);const b=h.objectStore(f).get(m);b.onsuccess=S=>g(S.target.result),b.onerror=xt(w)}),query:function(h){return m=>new Promise((g,w)=>{g=ke(g);const{trans:b,values:S,limit:A,query:E}=m,x=A===1/0?void 0:A,{index:B,range:P}=E,N=b.objectStore(f),C=B.isPrimaryKey?N:N.index(B.name),$=r(P);if(A===0)return g({result:[]});if(h){const v=S?C.getAll($,x):C.getAllKeys($,x);v.onsuccess=d=>g({result:d.target.result}),v.onerror=xt(w)}else{let v=0;const d=S||!("openKeyCursor"in C)?C.openCursor($):C.openKeyCursor($),T=[];d.onsuccess=k=>{const Y=d.result;return Y?(T.push(S?Y.value:Y.primaryKey),++v===A?g({result:T}):void Y.continue()):g({result:T})},d.onerror=xt(w)}})}(o),openCursor:function({trans:h,values:m,query:g,reverse:w,unique:b}){return new Promise((S,A)=>{S=ke(S);const{index:E,range:x}=g,B=h.objectStore(f),P=E.isPrimaryKey?B:B.index(E.name),N=w?b?"prevunique":"prev":b?"nextunique":"next",C=m||!("openKeyCursor"in P)?P.openCursor(r(x),N):P.openKeyCursor(r(x),N);C.onerror=xt(A),C.onsuccess=ke($=>{const v=C.result;if(!v)return void S(null);v.___id=++tu,v.done=!1;const d=v.continue.bind(v);let T=v.continuePrimaryKey;T&&(T=T.bind(v));const k=v.advance.bind(v),Y=()=>{throw new Error("Cursor not stopped")};v.trans=h,v.stop=v.continue=v.continuePrimaryKey=v.advance=()=>{throw new Error("Cursor not started")},v.fail=ke(A),v.next=function(){let W=1;return this.start(()=>W--?this.continue():this.stop()).then(()=>this)},v.start=W=>{const oe=new Promise((ie,se)=>{ie=ke(ie),C.onerror=xt(se),v.fail=se,v.stop=Pe=>{v.stop=v.continue=v.continuePrimaryKey=v.advance=Y,ie(Pe)}}),re=()=>{if(C.result)try{W()}catch(ie){v.fail(ie)}else v.done=!0,v.start=()=>{throw new Error("Cursor behind last entry")},v.stop()};return C.onsuccess=ke(ie=>{C.onsuccess=re,re()}),v.continue=d,v.continuePrimaryKey=T,v.advance=k,re(),oe},S(v)},A)})},count({query:h,trans:m}){const{index:g,range:w}=h;return new Promise((b,S)=>{const A=m.objectStore(f),E=g.isPrimaryKey?A:A.index(g.name),x=r(w),B=x?E.count(x):E.count();B.onsuccess=ke(P=>b(P.target.result)),B.onerror=xt(S)})}}}(l)),c={};return s.forEach(l=>c[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!c[l])throw new Error(`Table '${l}' not found`);return c[l]},MIN_KEY:-1/0,MAX_KEY:Xn(t),schema:i}}function Ti({_novip:e},t){const n=t.db,r=function(i,o,{IDBKeyRange:s,indexedDB:c},l){return{dbcore:function(f,h){return h.reduce((m,{create:g})=>({...m,...g(m)}),f)}(nu(o,s,l),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function Lr({_novip:e},t,n,r){n.forEach(i=>{const o=r[i];t.forEach(s=>{const c=Ji(s,i);(!c||"value"in c&&c.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Bt(s,i,{get(){return this.table(i)},set(l){ys(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function Pi({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function ru(e,t){return e._cfg.version-t._cfg.version}function iu(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),c=Q.transless||Q;Wt(()=>{Q.trans=o,Q.transless=c,t===0?(Re(i).forEach(l=>{si(n,l,i[l].primKey,i[l].indexes)}),Ti(e,n),V.follow(()=>e.on.populate.fire(o)).catch(s)):function({_novip:l},a,f,h){const m=[],g=l._versions;let w=l._dbSchema=Ii(l,l.idbdb,h),b=!1;function S(){return m.length?V.resolve(m.shift()(f.idbtrans)).then(S):V.resolve()}return g.filter(A=>A._cfg.version>=a).forEach(A=>{m.push(()=>{const E=w,x=A._cfg.dbschema;Ni(l,E,h),Ni(l,x,h),w=l._dbSchema=x;const B=Fs(E,x);B.add.forEach(N=>{si(h,N[0],N[1].primKey,N[1].indexes)}),B.change.forEach(N=>{if(N.recreate)throw new ne.Upgrade("Not yet support for changing primary key");{const C=h.objectStore(N.name);N.add.forEach($=>Ci(C,$)),N.change.forEach($=>{C.deleteIndex($.name),Ci(C,$)}),N.del.forEach($=>C.deleteIndex($))}});const P=A._cfg.contentUpgrade;if(P&&A._cfg.version>a){Ti(l,h),f._memoizedTables={},b=!0;let N=bs(x);B.del.forEach(d=>{N[d]=E[d]}),Pi(l,[l.Transaction.prototype]),Lr(l,[l.Transaction.prototype],Re(N),N),f.schema=N;const C=Gi(P);let $;C&&On();const v=V.follow(()=>{if($=P(f),$&&C){var d=jt.bind(null,null);$.then(d,d)}});return $&&typeof $.then=="function"?V.resolve($):v.then(()=>$)}}),m.push(E=>{(!b||!zc)&&function(x,B){[].slice.call(B.db.objectStoreNames).forEach(P=>x[P]==null&&B.db.deleteObjectStore(P))}(A._cfg.dbschema,E),Pi(l,[l.Transaction.prototype]),Lr(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),S().then(()=>{var A,E;E=h,Re(A=w).forEach(x=>{E.db.objectStoreNames.contains(x)||si(E,x,A[x].primKey,A[x].indexes)})})}(e,t,o,n).catch(s)})}function Fs(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!zr)s.recreate=!0,n.change.push(s);else{const c=i.idxByName,l=o.idxByName;let a;for(a in c)l[a]||s.del.push(a);for(a in l){const f=c[a],h=l[a];f?f.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function si(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>Ci(i,o)),i}function Ci(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ii(e,t,n){const r={};return Nr(t.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const c=Oi(Ls(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[];for(let f=0;f<o.indexNames.length;++f){const h=o.index(o.indexNames[f]);s=h.keyPath;var a=Oi(h.name,s,!!h.unique,!!h.multiEntry,!1,s&&typeof s!="string",!1);l.push(a)}r[i]=Ks(i,c,l)}),r}function Ni({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let c=0;c<s.indexNames.length;++c){const l=s.indexNames[c],a=s.index(l).keyPath,f=typeof a=="string"?a:"["+Nr(a).join("+")+"]";if(t[o]){const h=t[o].idxByName[f];h&&(h.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Oe.WorkerGlobalScope&&Oe instanceof Oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class ou{_parseStoresSpec(t,n){Re(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((s,c)=>{const l=(s=s.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Oi(l,a||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),Ye(a),c===0)}),o=i.shift();if(o.multi)throw new ne.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ks(r,o,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ge(this._cfg.storesSource,t):t;const r=n._versions,i={};let o={};return r.forEach(s=>{Ge(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,Pi(n,[n._allTables,n,n.Transaction.prototype]),Lr(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Re(o),o),n._storeNames=Re(o),this}upgrade(t){return this._cfg.contentUpgrade=Zi(this._cfg.contentUpgrade||Se,t),this}}function ro(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ie("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function io(e){return e&&typeof e.databases=="function"}function Bi(e){return Wt(function(){return Q.letThrough=!0,e()})}function su(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function au(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Le(t.dbOpenError):e);Ot&&(t.openCanceller._stackHolder=an()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new ne.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,c=!1;return V.race([r,(typeof navigator>"u"?V.resolve():su()).then(()=>new V((l,a)=>{if(i(),!n)throw new ne.MissingAPI;const f=e.name,h=t.autoSchema?n.open(f):n.open(f,Math.round(10*e.verno));if(!h)throw new ne.MissingAPI;h.onerror=xt(a),h.onblocked=ke(e._fireOnBlocked),h.onupgradeneeded=ke(m=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Gn,s.abort(),h.result.close();const w=n.deleteDatabase(f);w.onsuccess=w.onerror=ke(()=>{a(new ne.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{s.onerror=xt(a);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;c=g<1,e._novip.idbdb=h.result,iu(e,g/10,s,a)}},a),h.onsuccess=ke(()=>{s=null;const m=e._novip.idbdb=h.result,g=Nr(m.objectStoreNames);if(g.length>0)try{const b=m.transaction((w=g).length===1?w[0]:w,"readonly");t.autoSchema?function({_novip:S},A,E){S.verno=A.version/10;const x=S._dbSchema=Ii(0,A,E);S._storeNames=Nr(A.objectStoreNames,0),Lr(S,[S._allTables],Re(x),x)}(e,m,b):(Ni(e,e._dbSchema,b),function(S,A){const E=Fs(Ii(0,S.idbdb,A),S._dbSchema);return!(E.add.length||E.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ti(e,b)}catch{}var w;Kn.push(e),m.onversionchange=ke(b=>{t.vcFired=!0,e.on("versionchange").fire(b)}),m.onclose=ke(b=>{e.on("close").fire(b)}),c&&function({indexedDB:b,IDBKeyRange:S},A){!io(b)&&A!=="__dbnames"&&ro(b,S).put({name:A}).catch(Se)}(e._deps,f),l()},a)}))]).then(()=>(i(),t.onReadyBeingFired=[],V.resolve(Bi(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let a=t.onReadyBeingFired.reduce(Zi,Se);return t.onReadyBeingFired=[],V.resolve(Bi(()=>a(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),Le(l)}).finally(()=>{t.openComplete=!0,o()})}function Di(e){var t=o=>e.next(o),n=i(t),r=i(o=>e.throw(o));function i(o){return s=>{var c=o(s),l=c.value;return c.done?l:l&&typeof l.then=="function"?l.then(n,r):Ye(l)?Promise.all(l).then(n,r):n(l)}}return i(t)()}function cu(e,t,n){var r=arguments.length;if(r<2)throw new ne.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=ws(i);return[e,o,n]}function Ms(e,t,n,r,i){return V.resolve().then(()=>{const o=Q.transless||Q,s=e._createTransaction(t,n,e._dbSchema,r),c={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===Qi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Ms(e,t,n,null,i))):Le(h)}const l=Gi(i);let a;l&&On();const f=V.follow(()=>{if(a=i.call(s,s),a)if(l){var h=jt.bind(null,null);a.then(h,h)}else typeof a.next=="function"&&typeof a.throw=="function"&&(a=Di(a))},c);return(a&&typeof a.then=="function"?V.resolve(a).then(h=>s.active?h:Le(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>a)).then(h=>(r&&s._resolve(),s._completion.then(()=>h))).catch(h=>(s._reject(h),Le(h)))})}function gr(e,t,n){const r=Ye(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const uu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(f,h,m){const g=Mn(f),w=i[g]=i[g]||[],b=f==null?0:typeof f=="string"?1:f.length,S=h>0,A={...m,isVirtual:S,keyTail:h,keyLength:b,extractKey:ki(f),unique:!S&&m.unique};return w.push(A),A.isPrimaryKey||o.push(A),b>1&&s(b===2?f[0]:f.slice(0,b-1),h+1,m),w.sort((E,x)=>E.keyTail-x.keyTail),A}const c=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const f of r.indexes)s(f.keyPath,0,f);function l(f){const h=f.query.index;return h.isVirtual?{...f,query:{index:h,range:(m=f.query.range,g=h.keyTail,{type:m.type===1?2:m.type,lower:gr(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:gr(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:f;var m,g}return{...n,schema:{...r,primaryKey:c,indexes:o,getIndexByKeyPath:function(f){const h=i[Mn(f)];return h&&h[0]}},count:f=>n.count(l(f)),query:f=>n.query(l(f)),openCursor(f){const{keyTail:h,isVirtual:m,keyLength:g}=f.query.index;return m?n.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(A){A!=null?b.continue(gr(A,f.reverse?e.MAX_KEY:e.MIN_KEY,h)):f.unique?b.continue(b.key.slice(0,g).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,h)):b.continue()}},continuePrimaryKey:{value(A,E){b.continuePrimaryKey(gr(A,e.MAX_KEY,h),E)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const A=b.key;return g===1?A[0]:A.slice(0,g)}},value:{get:()=>b.value}})}(w)):n.openCursor(f)}}}}}};function oo(e,t,n,r){return n=n||{},r=r||"",Re(e).forEach(i=>{if(at(t,i)){var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const c=pi(o);c!==pi(s)?n[r+i]=t[i]:c==="Object"?oo(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0}),Re(t).forEach(i=>{at(e,i)||(n[r+i]=t[i])}),n}const lu={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Q.trans,{deleting:c,creating:l,updating:a}=s.table(t).hook;switch(o.type){case"add":if(l.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"put":if(l.fire===Se&&a.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"delete":if(c.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"deleteRange":if(c.fire===Se)break;return s._promise("readwrite",()=>function(m){return h(m.trans,m.range,1e4)}(o),!0)}return n.mutate(o);function f(m){const g=Q.trans,w=m.keys||function(b,S){return S.type==="delete"?S.keys:S.keys||S.values.map(b.extractKey)}(r,m);if(!w)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:w}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(b,S,A){return S.type==="add"?Promise.resolve([]):b.getMany({trans:S.trans,keys:A,cache:"immutable"})}(n,m,w).then(b=>{const S=w.map((A,E)=>{const x=b[E],B={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(B,A,x,g);else if(m.type==="add"||x===void 0){const P=l.fire.call(B,A,m.values[E],g);A==null&&P!=null&&(A=P,m.keys[E]=A,r.outbound||vt(m.values[E],r.keyPath,A))}else{const P=oo(x,m.values[E]),N=a.fire.call(B,P,A,x,g);if(N){const C=m.values[E];Object.keys(N).forEach($=>{at(C,$)?C[$]=N[$]:vt(C,$,N[$])})}}return B});return n.mutate(m).then(({failures:A,results:E,numFailures:x,lastResult:B})=>{for(let P=0;P<w.length;++P){const N=E?E[P]:w[P],C=S[P];N==null?C.onerror&&C.onerror(A[P]):C.onsuccess&&C.onsuccess(m.type==="put"&&b[P]?m.values[P]:N)}return{failures:A,results:E,numFailures:x,lastResult:B}}).catch(A=>(S.forEach(E=>E.onerror&&E.onerror(A)),Promise.reject(A)))})}function h(m,g,w){return n.query({trans:m,values:!1,query:{index:r,range:g},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:m}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:h(m,{...g,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function Us(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)Je(t.keys[i],e[o])===0&&(r.push(n?nr(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}const fu={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Us(r.keys,r.trans._cache,r.cache==="clone");return i?V.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?nr(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function so(e){return!("from"in e)}const Ct=function(e,t){if(!this){const n=new Ct;return e&&"d"in e&&Ge(n,e),n}Ge(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Qn(e,t,n){const r=Je(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(so(e))return Ge(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(Je(n,e.from)<0)return i?Qn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Ko(e);if(Je(t,e.to)>0)return o?Qn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Ko(e);Je(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Je(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&Kr(e,i),o&&s&&Kr(e,o)}function Kr(e,t){so(t)||function n(r,{from:i,to:o,l:s,r:c}){Qn(r,i,o),s&&n(r,s),c&&n(r,c)}(e,t)}function du(e,t){const n=ji(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=ji(e);let s=o.next(i.from),c=s.value;for(;!r.done&&!s.done;){if(Je(c.from,i.to)<=0&&Je(c.to,i.from)>=0)return!0;Je(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(s=o.next(i.from)).value}return!1}function ji(e){let t=so(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Je(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Je(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Ko(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],s[i]=c[o],e[o]=s,s.d=Fo(s)}e.d=Fo(e)}function Fo({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}En(Ct.prototype,{add(e){return Kr(this,e),this},addKey(e){return Qn(this,e,e),this},addKeys(e){return e.forEach(t=>Qn(this,t,t)),this},[yi](){return ji(this)}});const hu={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Ct(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:c,outbound:l}=s,a={...i,mutate:m=>{const g=m.trans,w=g.mutatedParts||(g.mutatedParts={}),b=N=>{const C=`idb://${t}/${r}/${N}`;return w[C]||(w[C]=new Ct)},S=b(""),A=b(":dels"),{type:E}=m;let[x,B]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const P=m.trans._cache;return i.mutate(m).then(N=>{if(Ye(x)){E!=="delete"&&(x=N.results),S.addKeys(x);const C=Us(x,P);C||E==="add"||A.addKeys(x),(C||B)&&function($,v,d,T){function k(Y){const W=$(Y.name||"");function oe(ie){return ie!=null?Y.extractKey(ie):null}const re=ie=>Y.multiEntry&&Ye(ie)?ie.forEach(se=>W.addKey(se)):W.addKey(ie);(d||T).forEach((ie,se)=>{const Pe=d&&oe(d[se]),Ce=T&&oe(T[se]);Je(Pe,Ce)!==0&&(Pe!=null&&re(Pe),Ce!=null&&re(Ce))})}v.indexes.forEach(k)}(b,o,C,B)}else if(x){const C={from:x.lower,to:x.upper};A.add(C),S.add(C)}else S.add(n),A.add(n),o.indexes.forEach(C=>b(C.name).add(n));return N})}},f=({query:{index:m,range:g}})=>{var w,b;return[m,new Ct((w=g.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=g.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},h={get:m=>[s,new Ct(m.key)],getMany:m=>[s,new Ct().addKeys(m.keys)],count:f,query:f,openCursor:f};return Re(h).forEach(m=>{a[m]=function(g){const{subscr:w}=Q;if(w){const b=B=>{const P=`idb://${t}/${r}/${B}`;return w[P]||(w[P]=new Ct)},S=b(""),A=b(":dels"),[E,x]=h[m](g);if(b(E.name||"").add(x),!E.isPrimaryKey){if(m!=="count"){const B=m==="query"&&l&&g.values&&i.query({...g,values:!1});return i[m].apply(this,arguments).then(P=>{if(m==="query"){if(l&&g.values)return B.then(({result:C})=>(S.addKeys(C),P));const N=g.values?P.result.map(c):P.result;g.values?S.addKeys(N):A.addKeys(N)}else if(m==="openCursor"){const N=P,C=g.values;return N&&Object.create(N,{key:{get:()=>(A.addKey(N.primaryKey),N.key)},primaryKey:{get(){const $=N.primaryKey;return A.addKey($),$}},value:{get:()=>(C&&S.addKey(N.primaryKey),N.value)}})}return P})}A.add(n)}}return i[m].apply(this,arguments)}}),a}}}};class Ie{constructor(t,n){this._middlewares={},this.verno=0;const r=Ie.dependencies;this._options=n={addons:Ie.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new V(c=>{o.dbReadyResolve=c}),o.openCanceller=new V((c,l)=>{o.cancelOpen=l}),this._state=o,this.name=t,this.on=Fn(this,"populate","blocked","versionchange","close",{ready:[Zi,Se]}),this.on.ready.subscribe=ms(this.on.ready.subscribe,c=>(l,a)=>{Ie.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||V.resolve().then(l),a&&c(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),a&&c(l);else{c(l);const h=this;a||c(function m(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(m)})}})}),this.Collection=(s=this,Cn(Gc.prototype,function(c,l){this.db=s;let a=js,f=null;if(l)try{a=l()}catch(w){f=w}const h=c._ctx,m=h.table,g=m.hook.reading.fire;this._ctx={table:m,index:h.index,isPrimKey:!h.index||m.schema.primKey.keyPath&&h.index===m.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:h.or,valueMapper:g!==Hn?g:null}})),this.Table=function(c){return Cn(Jc.prototype,function(l,a,f){this.db=c,this._tx=f,this.name=l,this.schema=a,this.hook=c._allTables[l]?c._allTables[l].hook:Fn(null,{creating:[$c,Se],reading:[Rc,Hn],updating:[Kc,Se],deleting:[Lc,Se]})})}(this),this.Transaction=function(c){return Cn(eu.prototype,function(l,a,f,h,m){this.db=c,this.mode=l,this.storeNames=a,this.schema=f,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=Fn(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new V((g,w)=>{this._resolve=g,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var w=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):w&&this.idbtrans&&this.idbtrans.abort(),Le(g)})})}(this),this.Version=function(c){return Cn(ou.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return Cn($s.prototype,function(l,a,f){this.db=c,this._ctx={table:l,index:a===":id"?null:a,or:f};const h=c._deps.indexedDB;if(!h)throw new ne.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(m,g)=>h.cmp(g,m),this._max=(m,g)=>h.cmp(m,g)>0?m:g,this._min=(m,g)=>h.cmp(m,g)<0?m:g,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=Xn(n.IDBKeyRange),this._createTransaction=(c,l,a,f)=>new this.Transaction(c,l,a,this._options.chromeTransactionDurability,f),this._fireOnBlocked=c=>{this.on("blocked").fire(c),Kn.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(c))},this.use(uu),this.use(lu),this.use(hu),this.use(fu),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new ne.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(ru),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||Q.letThrough||this._vip)?t():new V((n,r)=>{if(this._state.openComplete)return r(new ne.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ne.DatabaseClosed);this.open().catch(Se)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r??10,name:i}),o.sort((s,c)=>s.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return au(this)}_close(){const t=this._state,n=Kn.indexOf(this);if(n>=0&&Kn.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new V(r=>{t.dbReadyResolve=r}),t.openCanceller=new V((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new ne.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new V((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=ke(()=>{(function({indexedDB:c,IDBKeyRange:l},a){!io(c)&&a!=="__dbnames"&&ro(c,l).delete(a).catch(Se)})(this._deps,this.name),r()}),s.onerror=xt(i),s.onblocked=this._fireOnBlocked};if(t)throw new ne.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Re(this._allTables).map(t=>this._allTables[t])}transaction(){const t=cu.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=Q.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const o=t.indexOf("?")!==-1;let s,c;t=t.replace("!","").replace("?","");try{if(c=n.map(a=>{var f=a instanceof this.Table?a.name:a;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t==="readonly")s="readonly";else{if(t!="rw"&&t!="readwrite")throw new ne.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if(i.mode==="readonly"&&s==="readwrite"){if(!o)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(a=>{if(i&&i.storeNames.indexOf(a)===-1){if(!o)throw new ne.SubTransaction("Table "+a+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(a){return i?i._promise(null,(f,h)=>{h(a)}):Le(a)}const l=Ms.bind(null,this,s,c,i,r);return i?i._promise(s,l,"lock"):Q.trans?kn(Q.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!at(this._allTables,t))throw new ne.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const pu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class yu{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[pu](){return this}}function Ws(e,t){return Re(t).forEach(n=>{Kr(e[n]||(e[n]=new Ct),t[n])}),e}function mu(e){return new yu(t=>{const n=Gi(e);let r=!1,i={},o={};const s={get closed(){return r},unsubscribe:()=>{r=!0,qt.storagemutated.unsubscribe(f)}};t.start&&t.start(s);let c=!1,l=!1;function a(){return Re(o).some(m=>i[m]&&du(i[m],o[m]))}const f=m=>{Ws(i,m),a()&&h()},h=()=>{if(c||r)return;i={};const m={},g=function(w){n&&On();const b=()=>Wt(e,{subscr:w,trans:null}),S=Q.trans?kn(Q.transless,b):b();return n&&S.then(jt,jt),S}(m);l||(qt("storagemutated",f),l=!0),c=!0,Promise.resolve(g).then(w=>{c=!1,r||(a()?h():(i={},o=m,t.next&&t.next(w)))},w=>{c=!1,t.error&&t.error(w),s.unsubscribe()})};return h(),s})}let Ri;try{Ri={indexedDB:Oe.indexedDB||Oe.mozIndexedDB||Oe.webkitIndexedDB||Oe.msIndexedDB,IDBKeyRange:Oe.IDBKeyRange||Oe.webkitIDBKeyRange}}catch{Ri={indexedDB:null,IDBKeyRange:null}}const Gt=Ie;function Or(e){let t=Nt;try{Nt=!0,qt.storagemutated.fire(e)}finally{Nt=t}}En(Gt,{...wr,delete:e=>new Gt(e,{addons:[]}).delete(),exists:e=>new Gt(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return io(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!=="__dbnames")):ro(t,n).toCollection().primaryKeys()}(Gt.dependencies).then(e)}catch{return Le(new ne.MissingAPI)}},defineClass:()=>function(e){Ge(this,e)},ignoreTransaction:e=>Q.trans?kn(Q.transless,e):e(),vip:Bi,async:function(e){return function(){try{var t=Di(e.apply(this,arguments));return t&&typeof t.then=="function"?t:V.resolve(t)}catch(n){return Le(n)}}},spawn:function(e,t,n){try{var r=Di(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:V.resolve(r)}catch(i){return Le(i)}},currentTransaction:{get:()=>Q.trans||null},waitFor:function(e,t){const n=V.resolve(typeof e=="function"?Gt.ignoreTransaction(e):e).timeout(t||6e4);return Q.trans?Q.trans.waitFor(n):n},Promise:V,debug:{get:()=>Ot,set:e=>{Ss(e,e==="dexie"?()=>!0:Ds)}},derive:wn,extend:Ge,props:En,override:ms,Events:Fn,on:qt,liveQuery:mu,extendObservabilitySet:Ws,getByKeyPath:Dt,setByKeyPath:vt,delByKeyPath:function(e,t){typeof t=="string"?vt(e,t,void 0):"length"in t&&[].map.call(t,function(n){vt(e,n,void 0)})},shallowClone:bs,deepClone:nr,getObjectDiff:oo,cmp:Je,asap:gs,minKey:-(1/0),addons:[],connections:Kn,errnames:Qi,dependencies:Ri,semVer:"3.2.3",version:"3.2.3".split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),Gt.maxKey=Xn(Gt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(qt("storagemutated",e=>{if(!Nt){let t;zr?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Nt=!0,dispatchEvent(t),Nt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{Nt||Or(e)}));let Nt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");typeof e.unref=="function"&&e.unref(),qt("storagemutated",t=>{Nt||e.postMessage(t)}),e.onmessage=t=>{t.data&&Or(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){qt("storagemutated",t=>{try{Nt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key==="x-storagemutated-1"){const n=JSON.parse(t.newValue);n&&Or(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type==="x-storagemutated-1"&&Or(t.changedParts)})}V.rejectionMapper=function(e,t){if(!e||e instanceof _n||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Io[e.name])return e;var n=new Io[e.name](t||e.message,e);return"stack"in e&&Bt(n,"stack",{get:function(){return this.inner.stack}}),n},Ss(Ot,Ds);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Yt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{a(r.next(f))}catch(h){s(h)}}function l(f){try{a(r.throw(f))}catch(h){s(h)}}function a(f){f.done?o(f.value):i(f.value).then(c,l)}a((r=r.apply(e,t||[])).next())})}function mt(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return l([a,f])}}function l(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(f){a=[6,f],i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function gu(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function vu(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function Vs(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function qs(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var $i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ao(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Hr=ao(function(e,t){(function(n,r){e.exports=r()})($i,function(){function n(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(D){return typeof D}:n=function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},n(I)}function r(I,D,j,R,M,de,ye){try{var fe=I[de](ye),G=fe.value}catch(Ue){j(Ue);return}fe.done?D(G):Promise.resolve(G).then(R,M)}function i(I){return function(){var D=this,j=arguments;return new Promise(function(R,M){var de=I.apply(D,j);function ye(G){r(de,R,M,ye,fe,"next",G)}function fe(G){r(de,R,M,ye,fe,"throw",G)}ye(void 0)})}}function o(I,D){if(!(I instanceof D))throw new TypeError("Cannot call a class as a function")}function s(I,D){for(var j=0;j<D.length;j++){var R=D[j];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}function c(I,D,j){return D&&s(I.prototype,D),j&&s(I,j),I}function l(I,D,j){return D in I?Object.defineProperty(I,D,{value:j,enumerable:!0,configurable:!0,writable:!0}):I[D]=j,I}function a(I,D){var j=Object.keys(I);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(I);D&&(R=R.filter(function(M){return Object.getOwnPropertyDescriptor(I,M).enumerable})),j.push.apply(j,R)}return j}function f(I){for(var D=1;D<arguments.length;D++){var j=arguments[D]!=null?arguments[D]:{};D%2?a(Object(j),!0).forEach(function(R){l(I,R,j[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(j)):a(Object(j)).forEach(function(R){Object.defineProperty(I,R,Object.getOwnPropertyDescriptor(j,R))})}return I}function h(I,D){return w(I)||S(I,D)||E()}function m(I){return g(I)||b(I)||A()}function g(I){if(Array.isArray(I)){for(var D=0,j=new Array(I.length);D<I.length;D++)j[D]=I[D];return j}}function w(I){if(Array.isArray(I))return I}function b(I){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]")return Array.from(I)}function S(I,D){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var j=[],R=!0,M=!1,de=void 0;try{for(var ye=I[Symbol.iterator](),fe;!(R=(fe=ye.next()).done)&&(j.push(fe.value),!(D&&j.length===D));R=!0);}catch(G){M=!0,de=G}finally{try{!R&&ye.return!=null&&ye.return()}finally{if(M)throw de}}return j}}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function E(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var x=function I(D){o(this,I),this.p=new Promise(D)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(I,D){var j=this;return new x(function(R,M){j.p.then(function(de){R(I?I(de):de)}).catch(function(de){return D?D(de):Promise.reject(de)}).then(R,M)})},x.prototype.catch=function(I){return this.then(null,I)},x.resolve=function(I){return new x(function(D){D(I)})},x.reject=function(I){return new x(function(D,j){j(I)})},["all","race"].forEach(function(I){x[I]=function(D){return new x(function(j,R){Promise[I](D.map(function(M){return M&&M.constructor&&M.constructor.__typeson__type__==="TypesonPromise"?M.p:M})).then(j,R)})}});var B={},P=B.toString,N={}.hasOwnProperty,C=Object.getPrototypeOf,$=N.toString;function v(I,D){return W(I)&&typeof I.then=="function"&&(!D||typeof I.catch=="function")}function d(I){return P.call(I).slice(8,-1)}function T(I,D){if(!I||n(I)!=="object")return!1;var j=C(I);if(!j)return D===null;var R=N.call(j,"constructor")&&j.constructor;return typeof R!="function"?D===null:D===R||D!==null&&$.call(R)===$.call(D)||typeof D=="function"&&typeof R.__typeson__type__=="string"&&R.__typeson__type__===D.__typeson__type__}function k(I){if(!I||d(I)!=="Object")return!1;var D=C(I);return D?T(I,Object):!0}function Y(I){if(!I||d(I)!=="Object")return!1;var D=C(I);return D?T(I,Object)||Y(D):!0}function W(I){return I&&n(I)==="object"}function oe(I){return I.replace(/~/g,"~0").replace(/\./g,"~1")}function re(I){return I.replace(/~1/g,".").replace(/~0/g,"~")}function ie(I,D){if(D==="")return I;var j=D.indexOf(".");if(j>-1){var R=I[re(D.slice(0,j))];return R===void 0?void 0:ie(R,D.slice(j+1))}return I[re(D)]}function se(I,D,j){if(D==="")return j;var R=D.indexOf(".");if(R>-1){var M=I[re(D.slice(0,R))];return se(M,D.slice(R+1),j)}return I[re(D)]=j,I}function Pe(I){return I===null?"null":Array.isArray(I)?"array":n(I)}var Ce=Object.keys,$e=Array.isArray,Fe={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function J(I,D){if(I.keypath==="")return-1;var j=I.keypath.match(/\./g)||0,R=D.keypath.match(/\./g)||0;return j&&(j=j.length),R&&(R=R.length),j>R?-1:j<R?1:I.keypath<D.keypath?-1:I.keypath>D.keypath}var ve=function(){function I(D){o(this,I),this.options=D,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c(I,[{key:"stringify",value:function(j,R,M,de){de=f({},this.options,{},de,{stringification:!0});var ye=this.encapsulate(j,null,de);return $e(ye)?JSON.stringify(ye[0],R,M):ye.then(function(fe){return JSON.stringify(fe,R,M)})}},{key:"stringifySync",value:function(j,R,M,de){return this.stringify(j,R,M,f({throwOnBadSyncType:!0},de,{sync:!0}))}},{key:"stringifyAsync",value:function(j,R,M,de){return this.stringify(j,R,M,f({throwOnBadSyncType:!0},de,{sync:!1}))}},{key:"parse",value:function(j,R,M){return M=f({},this.options,{},M,{parse:!0}),this.revive(JSON.parse(j,R),M)}},{key:"parseSync",value:function(j,R,M){return this.parse(j,R,f({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"parseAsync",value:function(j,R,M){return this.parse(j,R,f({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"specialTypeNames",value:function(j,R){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M.returnTypeNames=!0,this.encapsulate(j,R,M)}},{key:"rootTypeName",value:function(j,R){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return M.iterateNone=!0,this.encapsulate(j,R,M)}},{key:"encapsulate",value:function(j,R,M){M=f({sync:!0},this.options,{},M);var de=M,ye=de.sync,fe=this,G={},Ue=[],Xe=[],et=[],ft="cyclic"in M?M.cyclic:!0,dt=M,kt=dt.encapsulateObserver,tt=we("",j,ft,R||{},et);function ht(z){var y=Object.values(G);if(M.iterateNone)return y.length?y[0]:I.getJSONType(z);if(y.length){if(M.returnTypeNames)return m(new Set(y));!z||!k(z)||Fe.call(z,"$types")?z={$:z,$types:{$:G}}:z.$types=G}else W(z)&&Fe.call(z,"$types")&&(z={$:z,$types:!0});return M.returnTypeNames?!1:z}function Ne(z,y){return be.apply(this,arguments)}function be(){return be=i(regeneratorRuntime.mark(function z(y,u){var p;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Promise.all(u.map(function(L){return L[1].p}));case 2:return p=O.sent,O.next=5,Promise.all(p.map(function(){var L=i(regeneratorRuntime.mark(function F(H){var U,ee,ce,ue,ge,pe,he,xe,Ae,ae,We,q,K,Z;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(U=[],ee=u.splice(0,1),ce=h(ee,1),ue=ce[0],ge=h(ue,7),pe=ge[0],he=ge[2],xe=ge[3],Ae=ge[4],ae=ge[5],We=ge[6],q=we(pe,H,he,xe,U,!0,We),K=T(q,x),!(pe&&K)){te.next=11;break}return te.next=8,q.p;case 8:return Z=te.sent,Ae[ae]=Z,te.abrupt("return",Ne(y,U));case 11:return pe?Ae[ae]=q:K?y=q.p:y=q,te.abrupt("return",Ne(y,U));case 13:case"end":return te.stop()}},F)}));return function(F){return L.apply(this,arguments)}}()));case 5:return O.abrupt("return",y);case 6:case"end":return O.stop()}},z)})),be.apply(this,arguments)}function me(z,y,u){Object.assign(z,y);var p=Ze.map(function(_){var O=z[_];return delete z[_],O});u(),Ze.forEach(function(_,O){z[_]=p[O]})}function we(z,y,u,p,_,O,L){var F,H={},U=n(y),ee=kt?function(K){var Z=L||p.type||I.getJSONType(y);kt(Object.assign(K||H,{keypath:z,value:y,cyclic:u,stateObj:p,promisesData:_,resolvingTypesonPromise:O,awaitingTypesonPromise:T(y,x)},{type:Z}))}:null;if(["string","boolean","number","undefined"].includes(U))return y===void 0||U==="number"&&(isNaN(y)||y===-1/0||y===1/0)?(p.replaced?F=y:F=Be(z,y,p,_,!1,O,ee),F!==y&&(H={replaced:F})):F=y,ee&&ee(),F;if(y===null)return ee&&ee(),y;if(u&&!p.iterateIn&&!p.iterateUnsetNumeric&&y&&n(y)==="object"){var ce=Ue.indexOf(y);if(ce<0)u===!0&&(Ue.push(y),Xe.push(z));else return G[z]="#",ee&&ee({cyclicKeypath:Xe[ce]}),"#"+Xe[ce]}var ue=k(y),ge=$e(y),pe=(ue||ge)&&(!fe.plainObjectReplacers.length||p.replaced)||p.iterateIn?y:Be(z,y,p,_,ue||ge,null,ee),he;if(pe!==y?(F=pe,H={replaced:pe}):z===""&&T(y,x)?(_.push([z,y,u,p,void 0,void 0,p.type]),F=y):ge&&p.iterateIn!=="object"||p.iterateIn==="array"?(he=new Array(y.length),H={clone:he}):!["function","symbol"].includes(n(y))&&!("toJSON"in y)&&!T(y,x)&&!T(y,Promise)&&!T(y,ArrayBuffer)||ue||p.iterateIn==="object"?(he={},p.addLength&&(he.length=y.length),H={clone:he}):F=y,ee&&ee(),M.iterateNone)return he||F;if(!he)return F;if(p.iterateIn){var xe=function(Z){var X={ownKeys:Fe.call(y,Z)};me(p,X,function(){var te=z+(z?".":"")+oe(Z),le=we(te,y[Z],!!u,p,_,O);T(le,x)?_.push([te,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})};for(var Ae in y)xe(Ae);ee&&ee({endIterateIn:!0,end:!0})}else Ce(y).forEach(function(K){var Z=z+(z?".":"")+oe(K),X={ownKeys:!0};me(p,X,function(){var te=we(Z,y[K],!!u,p,_,O);T(te,x)?_.push([Z,te,!!u,p,he,K,p.type]):te!==void 0&&(he[K]=te)})}),ee&&ee({endIterateOwn:!0,end:!0});if(p.iterateUnsetNumeric){for(var ae=y.length,We=function(Z){if(!(Z in y)){var X=z+(z?".":"")+Z,te={ownKeys:!1};me(p,te,function(){var le=we(X,void 0,!!u,p,_,O);T(le,x)?_.push([X,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})}},q=0;q<ae;q++)We(q);ee&&ee({endIterateUnsetNumeric:!0,end:!0})}return he}function Be(z,y,u,p,_,O,L){for(var F=_?fe.plainObjectReplacers:fe.nonplainObjectReplacers,H=F.length;H--;){var U=F[H];if(U.test(y,u)){var ee=U.type;if(fe.revivers[ee]){var ce=G[z];G[z]=ce?[ee].concat(ce):ee}if(Object.assign(u,{type:ee,replaced:!0}),(ye||!U.replaceAsync)&&!U.replace)return L&&L({typeDetected:!0}),we(z,y,ft&&"readonly",u,p,O,ee);L&&L({replacing:!0});var ue=ye||!U.replaceAsync?"replace":"replaceAsync";return we(z,U[ue](y,u),ft&&"readonly",u,p,O,ee)}}return y}return et.length?ye&&M.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Ne(tt,et)).then(ht):!ye&&M.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():M.stringification&&ye?[ht(tt)]:ye?ht(tt):Promise.resolve(ht(tt))}},{key:"encapsulateSync",value:function(j,R,M){return this.encapsulate(j,R,f({throwOnBadSyncType:!0},M,{sync:!0}))}},{key:"encapsulateAsync",value:function(j,R,M){return this.encapsulate(j,R,f({throwOnBadSyncType:!0},M,{sync:!1}))}},{key:"revive",value:function(j,R){var M=j&&j.$types;if(!M)return j;if(M===!0)return j.$;R=f({sync:!0},this.options,{},R);var de=R,ye=de.sync,fe=[],G={},Ue=!0;M.$&&k(M.$)&&(j=j.$,M=M.$,Ue=!1);var Xe=this;function et(be,me){var we=Xe.revivers[be]||[],Be=h(we,1),z=Be[0];if(!z)throw new Error("Unregistered type: "+be);return ye&&!("revive"in z)?me:z[ye&&z.revive?"revive":!ye&&z.reviveAsync?"reviveAsync":"revive"](me,G)}function ft(){var be=[];if(Object.entries(M).forEach(function(me){var we=h(me,2),Be=we[0],z=we[1];z!=="#"&&[].concat(z).forEach(function(y){var u=Xe.revivers[y]||[null,{}],p=h(u,2),_=p[1].plain;_&&(be.push({keypath:Be,type:y}),delete M[Be])})}),!!be.length)return be.sort(J).reduce(function me(we,Be){var z=Be.keypath,y=Be.type;if(v(we))return we.then(function(_){return me(_,{keypath:z,type:y})});var u=ie(j,z);if(u=et(y,u),T(u,x))return u.then(function(_){var O=se(j,z,_);O===_&&(j=O)});var p=se(j,z,u);p===u&&(j=p)},void 0)}var dt=[];function kt(be,me,we,Be,z){if(!(Ue&&be==="$types")){var y=M[be],u=$e(me);if(u||k(me)){var p=u?new Array(me.length):{};for(Ce(me).forEach(function(ce){var ue=kt(be+(be?".":"")+oe(ce),me[ce],we||p,p,ce),ge=function(he){return T(he,Me)?p[ce]=void 0:he!==void 0&&(p[ce]=he),he};T(ue,x)?dt.push(ue.then(function(pe){return ge(pe)})):ge(ue)}),me=p;fe.length;){var _=h(fe[0],4),O=_[0],L=_[1],F=_[2],H=_[3],U=ie(O,L);if(U!==void 0)F[H]=U;else break;fe.splice(0,1)}}if(!y)return me;if(y==="#"){var ee=ie(we,me.slice(1));return ee===void 0&&fe.push([we,me.slice(1),Be,z]),ee}return[].concat(y).reduce(function ce(ue,ge){return T(ue,x)?ue.then(function(pe){return ce(pe,ge)}):et(ge,ue)},me)}}function tt(be){return T(be,Me)?void 0:be}var ht=ft(),Ne;return T(ht,x)?Ne=ht.then(function(){return j}):(Ne=kt("",j,null),dt.length&&(Ne=x.resolve(Ne).then(function(be){return x.all([be].concat(dt))}).then(function(be){var me=h(be,1),we=me[0];return we}))),v(Ne)?ye&&R.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():T(Ne,x)?Ne.p.then(tt):Ne:!ye&&R.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ye?tt(Ne):Promise.resolve(tt(Ne))}},{key:"reviveSync",value:function(j,R){return this.revive(j,f({throwOnBadSyncType:!0},R,{sync:!0}))}},{key:"reviveAsync",value:function(j,R){return this.revive(j,f({throwOnBadSyncType:!0},R,{sync:!1}))}},{key:"register",value:function(j,R){return R=R||{},[].concat(j).forEach(function M(de){var ye=this;if($e(de))return de.map(function(fe){return M.call(ye,fe)});de&&Ce(de).forEach(function(fe){if(fe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(I.JSON_TYPES.includes(fe))throw new TypeError("Plain JSON object types are reserved as type names");var G=de[fe],Ue=G&&G.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Xe=Ue.filter(function(we){return we.type===fe});if(Xe.length&&(Ue.splice(Ue.indexOf(Xe[0]),1),delete this.revivers[fe],delete this.types[fe]),typeof G=="function"){var et=G;G={test:function(Be){return Be&&Be.constructor===et},replace:function(Be){return f({},Be)},revive:function(Be){return Object.assign(Object.create(et.prototype),Be)}}}else if($e(G)){var ft=G,dt=h(ft,3),kt=dt[0],tt=dt[1],ht=dt[2];G={test:kt,replace:tt,revive:ht}}if(!(!G||!G.test)){var Ne={type:fe,test:G.test.bind(G)};G.replace&&(Ne.replace=G.replace.bind(G)),G.replaceAsync&&(Ne.replaceAsync=G.replaceAsync.bind(G));var be=typeof R.fallback=="number"?R.fallback:R.fallback?0:1/0;if(G.testPlainObjects?this.plainObjectReplacers.splice(be,0,Ne):this.nonplainObjectReplacers.splice(be,0,Ne),G.revive||G.reviveAsync){var me={};G.revive&&(me.revive=G.revive.bind(G)),G.reviveAsync&&(me.reviveAsync=G.reviveAsync.bind(G)),this.revivers[fe]=[me,{plain:G.testPlainObjects}]}this.types[fe]=G}},this)},this),this}}]),I}(),Me=function I(){o(this,I)};return Me.__typeson__type__="TypesonUndefined",ve.Undefined=Me,ve.Promise=x,ve.isThenable=v,ve.toStringTag=d,ve.hasConstructorOf=T,ve.isObject=W,ve.isPlainObject=k,ve.isUserObject=Y,ve.escapeKeyPathComponent=oe,ve.unescapeKeyPathComponent=re,ve.getByKeyPath=ie,ve.getJSONType=Pe,ve.JSON_TYPES=["null","boolean","number","string","array","object"],ve})}),bu=ao(function(e,t){(function(n,r){e.exports=r()})($i,function(){function n(y){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(y)}function r(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function i(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function o(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function s(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function c(y){return function(p){if(Array.isArray(p))return l(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||function(p,_){if(p){if(typeof p=="string")return l(p,_);var O=Object.prototype.toString.call(p).slice(8,-1);if(O==="Object"&&p.constructor&&(O=p.constructor.name),O==="Map"||O==="Set")return Array.from(p);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return l(p,_)}}(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function f(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function h(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function m(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function g(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function w(y){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?g(Object(p),!0).forEach(function(_){m(y,_,p[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(p,_))})}return y}function b(y,u){return function(_){if(Array.isArray(_))return _}(y)||function(_,O){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var L=[],F=!0,H=!1,U=void 0;try{for(var ee,ce=_[Symbol.iterator]();!(F=(ee=ce.next()).done)&&(L.push(ee.value),!O||L.length!==O);F=!0);}catch(ue){H=!0,U=ue}finally{try{F||ce.return==null||ce.return()}finally{if(H)throw U}}return L}}(y,u)||A(y,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(y){return function(p){if(Array.isArray(p))return E(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||A(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function A(y,u){if(y){if(typeof y=="string")return E(y,u);var p=Object.prototype.toString.call(y).slice(8,-1);return p==="Object"&&y.constructor&&(p=y.constructor.name),p==="Map"||p==="Set"?Array.from(y):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?E(y,u):void 0}}function E(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}var x=function y(u){f(this,y),this.p=new Promise(u)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(y,u){var p=this;return new x(function(_,O){p.p.then(function(L){_(y?y(L):L)}).catch(function(L){return u?u(L):Promise.reject(L)}).then(_,O)})},x.prototype.catch=function(y){return this.then(null,y)},x.resolve=function(y){return new x(function(u){u(y)})},x.reject=function(y){return new x(function(u,p){p(y)})},["all","race"].forEach(function(y){x[y]=function(u){return new x(function(p,_){Promise[y](u.map(function(O){return O&&O.constructor&&O.constructor.__typeson__type__==="TypesonPromise"?O.p:O})).then(p,_)})}});var B={}.toString,P={}.hasOwnProperty,N=Object.getPrototypeOf,C=P.toString;function $(y,u){return k(y)&&typeof y.then=="function"&&(!u||typeof y.catch=="function")}function v(y){return B.call(y).slice(8,-1)}function d(y,u){if(!y||a(y)!=="object")return!1;var p=N(y);if(!p)return u===null;var _=P.call(p,"constructor")&&p.constructor;return typeof _!="function"?u===null:u===_||u!==null&&C.call(_)===C.call(u)||typeof u=="function"&&typeof _.__typeson__type__=="string"&&_.__typeson__type__===u.__typeson__type__}function T(y){return!(!y||v(y)!=="Object")&&(!N(y)||d(y,Object))}function k(y){return y&&a(y)==="object"}function Y(y){return y.replace(/~/g,"~0").replace(/\./g,"~1")}function W(y){return y.replace(/~1/g,".").replace(/~0/g,"~")}function oe(y,u){if(u==="")return y;var p=u.indexOf(".");if(p>-1){var _=y[W(u.slice(0,p))];return _===void 0?void 0:oe(_,u.slice(p+1))}return y[W(u)]}function re(y,u,p){if(u==="")return p;var _=u.indexOf(".");return _>-1?re(y[W(u.slice(0,_))],u.slice(_+1),p):(y[W(u)]=p,y)}function ie(y,u,p){return p?u?u(y):y:(y&&y.then||(y=Promise.resolve(y)),u?y.then(u):y)}var se=Object.keys,Pe=Array.isArray,Ce={}.hasOwnProperty,$e=["type","replaced","iterateIn","iterateUnsetNumeric"];function Fe(y){return function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];try{return Promise.resolve(y.apply(this,u))}catch(_){return Promise.reject(_)}}}function Ze(y,u){if(y.keypath==="")return-1;var p=y.keypath.match(/\./g)||0,_=u.keypath.match(/\./g)||0;return p&&(p=p.length),_&&(_=_.length),p>_?-1:p<_?1:y.keypath<u.keypath?-1:y.keypath>u.keypath}var J=function(){function y(u){f(this,y),this.options=u,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(p,_,O){return _&&h(p.prototype,_),O&&h(p,O),p}(y,[{key:"stringify",value:function(p,_,O,L){L=w(w(w({},this.options),L),{},{stringification:!0});var F=this.encapsulate(p,null,L);return Pe(F)?JSON.stringify(F[0],_,O):F.then(function(H){return JSON.stringify(H,_,O)})}},{key:"stringifySync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!0}))}},{key:"stringifyAsync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!1}))}},{key:"parse",value:function(p,_,O){return O=w(w(w({},this.options),O),{},{parse:!0}),this.revive(JSON.parse(p,_),O)}},{key:"parseSync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"parseAsync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"specialTypeNames",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.returnTypeNames=!0,this.encapsulate(p,_,O)}},{key:"rootTypeName",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.iterateNone=!0,this.encapsulate(p,_,O)}},{key:"encapsulate",value:function(p,_,O){var L=Fe(function(q,K){return ie(Promise.all(K.map(function(Z){return Z[1].p})),function(Z){return ie(Promise.all(Z.map(Fe(function(X){var te=!1,le=[],nt=b(K.splice(0,1),1),De=b(nt[0],7),Qe=De[0],ct=De[2],_e=De[3],ut=De[4],Ee=De[5],rt=De[6],ze=ae(Qe,X,ct,_e,le,!0,rt),pt=d(ze,x);return function(Xr,ar){var un=Xr();return un&&un.then?un.then(ar):ar(un)}(function(){if(Qe&&pt)return ie(ze.p,function(yt){return ut[Ee]=yt,te=!0,L(q,le)})},function(yt){return te?yt:(Qe?ut[Ee]=ze:q=pt?ze.p:ze,L(q,le))})}))),function(){return q})})}),F=(O=w(w({sync:!0},this.options),O)).sync,H=this,U={},ee=[],ce=[],ue=[],ge=!("cyclic"in O)||O.cyclic,pe=O.encapsulateObserver,he=ae("",p,ge,_||{},ue);function xe(q){var K=Object.values(U);if(O.iterateNone)return K.length?K[0]:y.getJSONType(q);if(K.length){if(O.returnTypeNames)return S(new Set(K));q&&T(q)&&!Ce.call(q,"$types")?q.$types=U:q={$:q,$types:{$:U}}}else k(q)&&Ce.call(q,"$types")&&(q={$:q,$types:!0});return!O.returnTypeNames&&q}function Ae(q,K,Z){Object.assign(q,K);var X=$e.map(function(te){var le=q[te];return delete q[te],le});Z(),$e.forEach(function(te,le){q[te]=X[le]})}function ae(q,K,Z,X,te,le,nt){var De,Qe={},ct=a(K),_e=pe?function($t){var He=nt||X.type||y.getJSONType(K);pe(Object.assign($t||Qe,{keypath:q,value:K,cyclic:Z,stateObj:X,promisesData:te,resolvingTypesonPromise:le,awaitingTypesonPromise:d(K,x)},{type:He}))}:null;if(["string","boolean","number","undefined"].includes(ct))return K===void 0||Number.isNaN(K)||K===Number.NEGATIVE_INFINITY||K===Number.POSITIVE_INFINITY?(De=X.replaced?K:We(q,K,X,te,!1,le,_e))!==K&&(Qe={replaced:De}):De=K,_e&&_e(),De;if(K===null)return _e&&_e(),K;if(Z&&!X.iterateIn&&!X.iterateUnsetNumeric&&K&&a(K)==="object"){var ut=ee.indexOf(K);if(!(ut<0))return U[q]="#",_e&&_e({cyclicKeypath:ce[ut]}),"#"+ce[ut];Z===!0&&(ee.push(K),ce.push(q))}var Ee,rt=T(K),ze=Pe(K),pt=(rt||ze)&&(!H.plainObjectReplacers.length||X.replaced)||X.iterateIn?K:We(q,K,X,te,rt||ze,null,_e);if(pt!==K?(De=pt,Qe={replaced:pt}):q===""&&d(K,x)?(te.push([q,K,Z,X,void 0,void 0,X.type]),De=K):ze&&X.iterateIn!=="object"||X.iterateIn==="array"?(Ee=new Array(K.length),Qe={clone:Ee}):(["function","symbol"].includes(a(K))||"toJSON"in K||d(K,x)||d(K,Promise)||d(K,ArrayBuffer))&&!rt&&X.iterateIn!=="object"?De=K:(Ee={},X.addLength&&(Ee.length=K.length),Qe={clone:Ee}),_e&&_e(),O.iterateNone)return Ee||De;if(!Ee)return De;if(X.iterateIn){var yt=function(He){var Tt={ownKeys:Ce.call(K,He)};Ae(X,Tt,function(){var Jt=q+(q?".":"")+Y(He),cr=ae(Jt,K[He],!!Z,X,te,le);d(cr,x)?te.push([Jt,cr,!!Z,X,Ee,He,X.type]):cr!==void 0&&(Ee[He]=cr)})};for(var Xr in K)yt(Xr);_e&&_e({endIterateIn:!0,end:!0})}else se(K).forEach(function($t){var He=q+(q?".":"")+Y($t);Ae(X,{ownKeys:!0},function(){var Tt=ae(He,K[$t],!!Z,X,te,le);d(Tt,x)?te.push([He,Tt,!!Z,X,Ee,$t,X.type]):Tt!==void 0&&(Ee[$t]=Tt)})}),_e&&_e({endIterateOwn:!0,end:!0});if(X.iterateUnsetNumeric){for(var ar=K.length,un=function(He){if(!(He in K)){var Tt=q+(q?".":"")+He;Ae(X,{ownKeys:!1},function(){var Jt=ae(Tt,void 0,!!Z,X,te,le);d(Jt,x)?te.push([Tt,Jt,!!Z,X,Ee,He,X.type]):Jt!==void 0&&(Ee[He]=Jt)})}},Qr=0;Qr<ar;Qr++)un(Qr);_e&&_e({endIterateUnsetNumeric:!0,end:!0})}return Ee}function We(q,K,Z,X,te,le,nt){for(var De=te?H.plainObjectReplacers:H.nonplainObjectReplacers,Qe=De.length;Qe--;){var ct=De[Qe];if(ct.test(K,Z)){var _e=ct.type;if(H.revivers[_e]){var ut=U[q];U[q]=ut?[_e].concat(ut):_e}return Object.assign(Z,{type:_e,replaced:!0}),!F&&ct.replaceAsync||ct.replace?(nt&&nt({replacing:!0}),ae(q,ct[F||!ct.replaceAsync?"replace":"replaceAsync"](K,Z),ge&&"readonly",Z,X,le,_e)):(nt&&nt({typeDetected:!0}),ae(q,K,ge&&"readonly",Z,X,le,_e))}}return K}return ue.length?F&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(L(he,ue)).then(xe):!F&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():O.stringification&&F?[xe(he)]:F?xe(he):Promise.resolve(xe(he))}},{key:"encapsulateSync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"revive",value:function(p,_){var O=p&&p.$types;if(!O)return p;if(O===!0)return p.$;var L=(_=w(w({sync:!0},this.options),_)).sync,F=[],H={},U=!0;O.$&&T(O.$)&&(p=p.$,O=O.$,U=!1);var ee=this;function ce(xe,Ae){var ae=b(ee.revivers[xe]||[],1)[0];if(!ae)throw new Error("Unregistered type: "+xe);return L&&!("revive"in ae)?Ae:ae[L&&ae.revive?"revive":!L&&ae.reviveAsync?"reviveAsync":"revive"](Ae,H)}var ue=[];function ge(xe){return d(xe,ve)?void 0:xe}var pe,he=function(){var Ae=[];if(Object.entries(O).forEach(function(ae){var We=b(ae,2),q=We[0],K=We[1];K!=="#"&&[].concat(K).forEach(function(Z){b(ee.revivers[Z]||[null,{}],2)[1].plain&&(Ae.push({keypath:q,type:Z}),delete O[q])})}),Ae.length)return Ae.sort(Ze).reduce(function ae(We,q){var K=q.keypath,Z=q.type;if($(We))return We.then(function(le){return ae(le,{keypath:K,type:Z})});var X=oe(p,K);if(d(X=ce(Z,X),x))return X.then(function(le){var nt=re(p,K,le);nt===le&&(p=nt)});var te=re(p,K,X);te===X&&(p=te)},void 0)}();return d(he,x)?pe=he.then(function(){return p}):(pe=function xe(Ae,ae,We,q,K){if(!U||Ae!=="$types"){var Z=O[Ae],X=Pe(ae);if(X||T(ae)){var te=X?new Array(ae.length):{};for(se(ae).forEach(function(Ee){var rt=xe(Ae+(Ae?".":"")+Y(Ee),ae[Ee],We||te,te,Ee),ze=function(yt){return d(yt,ve)?te[Ee]=void 0:yt!==void 0&&(te[Ee]=yt),yt};d(rt,x)?ue.push(rt.then(function(pt){return ze(pt)})):ze(rt)}),ae=te;F.length;){var le=b(F[0],4),nt=le[0],De=le[1],Qe=le[2],ct=le[3],_e=oe(nt,De);if(_e===void 0)break;Qe[ct]=_e,F.splice(0,1)}}if(!Z)return ae;if(Z==="#"){var ut=oe(We,ae.slice(1));return ut===void 0&&F.push([We,ae.slice(1),q,K]),ut}return[].concat(Z).reduce(function Ee(rt,ze){return d(rt,x)?rt.then(function(pt){return Ee(pt,ze)}):ce(ze,rt)},ae)}}("",p,null),ue.length&&(pe=x.resolve(pe).then(function(xe){return x.all([xe].concat(ue))}).then(function(xe){return b(xe,1)[0]}))),$(pe)?L&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(pe,x)?pe.p.then(ge):pe:!L&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():L?ge(pe):Promise.resolve(ge(pe))}},{key:"reviveSync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!0}))}},{key:"reviveAsync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!1}))}},{key:"register",value:function(p,_){return _=_||{},[].concat(p).forEach(function O(L){var F=this;if(Pe(L))return L.map(function(H){return O.call(F,H)});L&&se(L).forEach(function(H){if(H==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(y.JSON_TYPES.includes(H))throw new TypeError("Plain JSON object types are reserved as type names");var U=L[H],ee=U&&U.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ce=ee.filter(function(Ae){return Ae.type===H});if(ce.length&&(ee.splice(ee.indexOf(ce[0]),1),delete this.revivers[H],delete this.types[H]),typeof U=="function"){var ue=U;U={test:function(ae){return ae&&ae.constructor===ue},replace:function(ae){return w({},ae)},revive:function(ae){return Object.assign(Object.create(ue.prototype),ae)}}}else if(Pe(U)){var ge=b(U,3);U={test:ge[0],replace:ge[1],revive:ge[2]}}if(U&&U.test){var pe={type:H,test:U.test.bind(U)};U.replace&&(pe.replace=U.replace.bind(U)),U.replaceAsync&&(pe.replaceAsync=U.replaceAsync.bind(U));var he=typeof _.fallback=="number"?_.fallback:_.fallback?0:Number.POSITIVE_INFINITY;if(U.testPlainObjects?this.plainObjectReplacers.splice(he,0,pe):this.nonplainObjectReplacers.splice(he,0,pe),U.revive||U.reviveAsync){var xe={};U.revive&&(xe.revive=U.revive.bind(U)),U.reviveAsync&&(xe.reviveAsync=U.reviveAsync.bind(U)),this.revivers[H]=[xe,{plain:U.testPlainObjects}]}this.types[H]=U}},this)},this),this}}]),y}(),ve=function y(){f(this,y)};ve.__typeson__type__="TypesonUndefined",J.Undefined=ve,J.Promise=x,J.isThenable=$,J.toStringTag=v,J.hasConstructorOf=d,J.isObject=k,J.isPlainObject=T,J.isUserObject=function y(u){if(!u||v(u)!=="Object")return!1;var p=N(u);return!p||d(u,Object)||y(p)},J.escapeKeyPathComponent=Y,J.unescapeKeyPathComponent=W,J.getByKeyPath=oe,J.getJSONType=function(u){return u===null?"null":Array.isArray(u)?"array":a(u)},J.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Me={userObject:{test:function(u,p){return J.isUserObject(u)},replace:function(u){return function(_){for(var O=1;O<arguments.length;O++){var L=arguments[O]!=null?arguments[O]:{};O%2?s(Object(L),!0).forEach(function(F){o(_,F,L[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(L)):s(Object(L)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(L,F))})}return _}({},u)},revive:function(u){return u}}},I=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(u,p){return!!Array.isArray(u)&&(Object.keys(u).some(function(_){return String(Number.parseInt(_))!==_})&&(p.iterateIn="object",p.addLength=!0),!0)},replace:function(u,p){return p.iterateUnsetNumeric=!0,u},revive:function(u){if(Array.isArray(u))return u;var p=[];return Object.keys(u).forEach(function(_){var O=u[_];p[_]=O}),p}}},{sparseUndefined:{test:function(u,p){return u===void 0&&p.ownKeys===!1},replace:function(u){return 0},revive:function(u){}}}],D={undef:{test:function(u,p){return u===void 0&&(p.ownKeys||!("ownKeys"in p))},replace:function(u){return 0},revive:function(u){return new J.Undefined}}},j={StringObject:{test:function(u){return J.toStringTag(u)==="String"&&n(u)==="object"},replace:function(u){return String(u)},revive:function(u){return new String(u)}},BooleanObject:{test:function(u){return J.toStringTag(u)==="Boolean"&&n(u)==="object"},replace:function(u){return!!u},revive:function(u){return new Boolean(u)}},NumberObject:{test:function(u){return J.toStringTag(u)==="Number"&&n(u)==="object"},replace:function(u){return Number(u)},revive:function(u){return new Number(u)}}},R=[{nan:{test:function(u){return Number.isNaN(u)},replace:function(u){return"NaN"},revive:function(u){return Number.NaN}}},{infinity:{test:function(u){return u===Number.POSITIVE_INFINITY},replace:function(u){return"Infinity"},revive:function(u){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(u){return u===Number.NEGATIVE_INFINITY},replace:function(u){return"-Infinity"},revive:function(u){return Number.NEGATIVE_INFINITY}}}],M={date:{test:function(u){return J.toStringTag(u)==="Date"},replace:function(u){var p=u.getTime();return Number.isNaN(p)?"NaN":p},revive:function(u){return u==="NaN"?new Date(Number.NaN):new Date(u)}}},de={regexp:{test:function(u){return J.toStringTag(u)==="RegExp"},replace:function(u){return{source:u.source,flags:(u.global?"g":"")+(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.sticky?"y":"")+(u.unicode?"u":"")}},revive:function(u){var p=u.source,_=u.flags;return new RegExp(p,_)}}},ye={map:{test:function(u){return J.toStringTag(u)==="Map"},replace:function(u){return c(u.entries())},revive:function(u){return new Map(u)}}},fe={set:{test:function(u){return J.toStringTag(u)==="Set"},replace:function(u){return c(u.values())},revive:function(u){return new Set(u)}}},G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue=new Uint8Array(256),Xe=0;Xe<G.length;Xe++)Ue[G.charCodeAt(Xe)]=Xe;var et=function(u,p,_){_==null&&(_=u.byteLength);for(var O=new Uint8Array(u,p||0,_),L=O.length,F="",H=0;H<L;H+=3)F+=G[O[H]>>2],F+=G[(3&O[H])<<4|O[H+1]>>4],F+=G[(15&O[H+1])<<2|O[H+2]>>6],F+=G[63&O[H+2]];return L%3==2?F=F.slice(0,-1)+"=":L%3==1&&(F=F.slice(0,-2)+"=="),F},ft=function(u){var p,_,O,L,F=u.length,H=.75*u.length,U=0;u[u.length-1]==="="&&(H--,u[u.length-2]==="="&&H--);for(var ee=new ArrayBuffer(H),ce=new Uint8Array(ee),ue=0;ue<F;ue+=4)p=Ue[u.charCodeAt(ue)],_=Ue[u.charCodeAt(ue+1)],O=Ue[u.charCodeAt(ue+2)],L=Ue[u.charCodeAt(ue+3)],ce[U++]=p<<2|_>>4,ce[U++]=(15&_)<<4|O>>2,ce[U++]=(3&O)<<6|63&L;return ee},dt={arraybuffer:{test:function(u){return J.toStringTag(u)==="ArrayBuffer"},replace:function(u,p){p.buffers||(p.buffers=[]);var _=p.buffers.indexOf(u);return _>-1?{index:_}:(p.buffers.push(u),et(u))},revive:function(u,p){if(p.buffers||(p.buffers=[]),n(u)==="object")return p.buffers[u.index];var _=ft(u);return p.buffers.push(_),_}}},kt=typeof self>"u"?$i:self,tt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(y){var u=y,p=kt[u];p&&(tt[y.toLowerCase()]={test:function(O){return J.toStringTag(O)===u},replace:function(O,L){var F=O.buffer,H=O.byteOffset,U=O.length;L.buffers||(L.buffers=[]);var ee=L.buffers.indexOf(F);return ee>-1?{index:ee,byteOffset:H,length:U}:(L.buffers.push(F),{encoded:et(F),byteOffset:H,length:U})},revive:function(O,L){L.buffers||(L.buffers=[]);var F,H=O.byteOffset,U=O.length,ee=O.encoded,ce=O.index;return"index"in O?F=L.buffers[ce]:(F=ft(ee),L.buffers.push(F)),new p(F,H,U)}})});var ht={dataview:{test:function(u){return J.toStringTag(u)==="DataView"},replace:function(u,p){var _=u.buffer,O=u.byteOffset,L=u.byteLength;p.buffers||(p.buffers=[]);var F=p.buffers.indexOf(_);return F>-1?{index:F,byteOffset:O,byteLength:L}:(p.buffers.push(_),{encoded:et(_),byteOffset:O,byteLength:L})},revive:function(u,p){p.buffers||(p.buffers=[]);var _,O=u.byteOffset,L=u.byteLength,F=u.encoded,H=u.index;return"index"in u?_=p.buffers[H]:(_=ft(F),p.buffers.push(_)),new DataView(_,O,L)}}},Ne={IntlCollator:{test:function(u){return J.hasConstructorOf(u,Intl.Collator)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.Collator(u.locale,u)}},IntlDateTimeFormat:{test:function(u){return J.hasConstructorOf(u,Intl.DateTimeFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.DateTimeFormat(u.locale,u)}},IntlNumberFormat:{test:function(u){return J.hasConstructorOf(u,Intl.NumberFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.NumberFormat(u.locale,u)}}};function be(y){for(var u=new Uint8Array(y.length),p=0;p<y.length;p++)u[p]=y.charCodeAt(p);return u.buffer}var me={file:{test:function(u){return J.toStringTag(u)==="File"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad File access: "+p.status);return{type:u.type,stringContents:p.responseText,name:u.name,lastModified:u.lastModified}},revive:function(u){var p=u.name,_=u.type,O=u.stringContents,L=u.lastModified;return new File([be(O)],p,{type:_,lastModified:L})},replaceAsync:function(u){return new J.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result,name:u.name,lastModified:u.lastModified})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}},we={bigint:{test:function(u){return typeof u=="bigint"},replace:function(u){return String(u)},revive:function(u){return BigInt(u)}}},Be={bigintObject:{test:function(u){return n(u)==="object"&&J.hasConstructorOf(u,BigInt)},replace:function(u){return String(u)},revive:function(u){return new Object(BigInt(u))}}},z={cryptokey:{test:function(u){return J.toStringTag(u)==="CryptoKey"&&u.extractable},replaceAsync:function(u){return new J.Promise(function(p,_){crypto.subtle.exportKey("jwk",u).catch(function(O){_(O)}).then(function(O){p({jwk:O,algorithm:u.algorithm,usages:u.usages})})})},revive:function(u){var p=u.jwk,_=u.algorithm,O=u.usages;return crypto.subtle.importKey("jwk",p,_,!0,O)}}};return[Me,D,I,j,R,M,de,{imagedata:{test:function(u){return J.toStringTag(u)==="ImageData"},replace:function(u){return{array:c(u.data),width:u.width,height:u.height}},revive:function(u){return new ImageData(new Uint8ClampedArray(u.array),u.width,u.height)}}},{imagebitmap:{test:function(u){return J.toStringTag(u)==="ImageBitmap"||u&&u.dataset&&u.dataset.toStringTag==="ImageBitmap"},replace:function(u){var p=document.createElement("canvas");return p.getContext("2d").drawImage(u,0,0),p.toDataURL()},revive:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,p},reviveAsync:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,createImageBitmap(p)}}},me,{file:me.file,filelist:{test:function(u){return J.toStringTag(u)==="FileList"},replace:function(u){for(var p=[],_=0;_<u.length;_++)p[_]=u.item(_);return p},revive:function(u){return new(function(){function p(){r(this,p),this._files=arguments[0],this.length=this._files.length}return function(O,L,F){return L&&i(O.prototype,L),F&&i(O,F),O}(p,[{key:"item",value:function(O){return this._files[O]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),p}())(u)}}},{blob:{test:function(u){return J.toStringTag(u)==="Blob"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad Blob access: "+p.status);return{type:u.type,stringContents:p.responseText}},revive:function(u){var p=u.type,_=u.stringContents;return new Blob([be(_)],{type:p})},replaceAsync:function(u){return new J.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}}].concat(typeof Map=="function"?ye:[],typeof Set=="function"?fe:[],typeof ArrayBuffer=="function"?dt:[],typeof Uint8Array=="function"?tt:[],typeof DataView=="function"?ht:[],typeof Intl<"u"?Ne:[],typeof crypto<"u"?z:[],typeof BigInt<"u"?[we,Be]:[])})}),mn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bn=new Uint8Array(256);for(var vr=0;vr<mn.length;vr++)Bn[mn.codePointAt(vr)]=vr;var Li=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),o=i.length,s="",c=0;c<o;c+=3)s+=mn[i[c]>>2],s+=mn[(i[c]&3)<<4|i[c+1]>>4],s+=mn[(i[c+1]&15)<<2|i[c+2]>>6],s+=mn[i[c+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},Ys=function(t){var n=t.length,r=t.length*.75,i=0,o,s,c,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var a=new ArrayBuffer(r),f=new Uint8Array(a),h=0;h<n;h+=4)o=Bn[t.codePointAt(h)],s=Bn[t.codePointAt(h+1)],c=Bn[t.codePointAt(h+2)],l=Bn[t.codePointAt(h+3)],f[i++]=o<<2|s>>4,f[i++]=(s&15)<<4|c>>2,f[i++]=(c&3)<<6|l&63;return a},wu=typeof self>"u"?global:self,zs={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=wu[t];n&&(zs[e.toLowerCase()+"2"]={test:function(r){return Hr.toStringTag(r)===t},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var _u={arraybuffer:{test:function(e){return Hr.toStringTag(e)==="ArrayBuffer"},replace:function(e){return Li(e,0,e.byteLength)},revive:function(e){var t=Ys(e);return t}}},lt=new Hr().register(bu),Su="FileReaderSync"in self,Fr=[],ai=0;lt.register([_u,zs,{blob2:{test:function(e){return Hr.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Su){var t=qs(e,"binary"),n=Li(t,0,t.byteLength);return{type:e.type,data:n}}else{Fr.push(e);var r={type:e.type,data:{start:ai,end:ai+e.size}};return ai+=e.size,r}},finalize:function(e,t){e.data=Li(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([Ys(n)],{type:t})}}}]);lt.mustFinalize=function(){return Fr.length>0};lt.finalize=function(e){return Yt(void 0,void 0,void 0,function(){var t,n,r,i,o,s,c,l,a,f;return mt(this,function(h){switch(h.label){case 0:return[4,Vs(new Blob(Fr),"binary")];case 1:if(t=h.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(c in o)l=o[c],a=lt.types[l],a&&a.finalize&&(f=Ie.getByKeyPath(i,s?"$."+c:c),a.finalize(f,t.slice(f.start,f.end)))}}return Fr=[],[2]}})})};var xu=2e3;function Hs(e,t){return Yt(this,void 0,void 0,function(){function n(){return Yt(this,void 0,void 0,function(){var a,f,h,m,g,w,b,S,A;return mt(this,function(E){switch(E.label){case 0:return[4,Promise.all(e.tables.map(function(x){return x.count()}))];case 1:a=E.sent(),a.forEach(function(x,B){return i[B].rowCount=x}),l.totalRows=a.reduce(function(x,B){return x+B}),f=JSON.stringify(s,void 0,o?2:void 0),h=f.lastIndexOf("]"),m=f.substring(0,h),r.push(m),g=t.filter,w=function(x){var B,P,N,C,$,v,d,T,k,Y,W,oe;return mt(this,function(re){switch(re.label){case 0:B=e.table(x),P=B.schema.primKey,N=!!P.keyPath,C=t.numRowsPerChunk||xu,$=N?{tableName:B.name,inbound:!0,rows:[]}:{tableName:B.name,inbound:!1,rows:[]},v=JSON.stringify($,void 0,o?2:void 0),o&&(v=v.split(`
`).join(`
    `)),d=v.lastIndexOf("]"),r.push(v.substring(0,d)),T=null,k=0,Y=!0,W=function(){var ie,se,Pe,Ce,J,$e,Fe,Ze,J;return mt(this,function(ve){switch(ve.label){case 0:return c&&Ie.ignoreTransaction(function(){return c(l)}),ie=T==null?B.limit(C):B.where(":id").above(T).limit(C),[4,ie.toArray()];case 1:return se=ve.sent(),se.length===0?[2,"break"]:(T!=null&&k>0&&(r.push(","),o&&r.push(`
      `)),Y=se.length===C,N?(Pe=g?se.filter(function(Me){return g(x,Me)}):se,Ce=Pe.map(function(Me){return lt.encapsulate(Me)}),lt.mustFinalize()?[4,Ie.waitFor(lt.finalize(Ce))]:[3,3]):[3,4]);case 2:ve.sent(),ve.label=3;case 3:return J=JSON.stringify(Ce,void 0,o?2:void 0),o&&(J=J.split(`
`).join(`
      `)),r.push(new Blob([J.substring(1,J.length-1)])),k=Pe.length,T=se.length>0?Ie.getByKeyPath(se[se.length-1],P.keyPath):null,[3,8];case 4:return[4,ie.primaryKeys()];case 5:return $e=ve.sent(),Fe=$e.map(function(Me,I){return[Me,se[I]]}),g&&(Fe=Fe.filter(function(Me){var I=Me[0],D=Me[1];return g(x,D,I)})),Ze=Fe.map(function(Me){return lt.encapsulate(Me)}),lt.mustFinalize()?[4,Ie.waitFor(lt.finalize(Ze))]:[3,7];case 6:ve.sent(),ve.label=7;case 7:J=JSON.stringify(Ze,void 0,o?2:void 0),o&&(J=J.split(`
`).join(`
      `)),r.push(new Blob([J.substring(1,J.length-1)])),k=Fe.length,T=$e.length>0?$e[$e.length-1]:null,ve.label=8;case 8:return l.completedRows+=se.length,[2]}})},re.label=1;case 1:return Y?[5,W()]:[3,3];case 2:return oe=re.sent(),oe==="break"?[3,3]:[3,1];case 3:return r.push(v.substr(d)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}})},b=0,S=i,E.label=2;case 2:return b<S.length?(A=S[b].name,[5,w(A)]):[3,5];case 3:E.sent(),E.label=4;case 4:return b++,[3,2];case 5:return r.push(f.substr(h)),l.done=!0,c&&Ie.ignoreTransaction(function(){return c(l)}),[2]}})})}var r,i,o,s,c,l;return mt(this,function(a){switch(a.label){case 0:t=t||{},r=[],i=e.tables.map(function(f){return{name:f.name,schema:gu(f),rowCount:0}}),o=t.prettyJson,s={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},c=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return lt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var Au=1,Eu={Stream:function(){}},Ou=ao(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(v){return new g(v)},n.CParser=g,n.CStream=b,n.createStream=w,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(v){return v!=="error"&&v!=="end"}),s=0,c;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var l in n.STATE)n.STATE[n.STATE[l]]=l;s=n.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(v){function d(){this.__proto__=v}return d.prototype=v,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(v){return v.__proto__}),Object.keys||(Object.keys=function(v){var d=[];for(var T in v)v.hasOwnProperty(T)&&d.push(T);return d});function f(v){var d=Math.max(n.MAX_BUFFER_LENGTH,10),T=0;for(var k in i){var Y=v[k]===void 0?0:v[k].length;if(Y>d)switch(k){case"text":closeText(v);break;default:P(v,"Max buffer length exceeded: "+k)}T=Math.max(T,Y)}v.bufferCheckPosition=n.MAX_BUFFER_LENGTH-T+v.position}function h(v){for(var d in i)v[d]=i[d]}var m=/[\\"\n]/g;function g(v){if(!(this instanceof g))return new g(v);var d=this;h(d),d.bufferCheckPosition=n.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=v||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=s.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,S(d,"onready")}g.prototype={end:function(){N(this)},write:$,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{c=Eu.Stream}catch{c=function(){}}function w(v){return new b(v)}function b(v){if(!(this instanceof b))return new b(v);this._parser=new g(v),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;c.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(T){d.emit("error",T),d._parser.error=null},o.forEach(function(T){Object.defineProperty(d,"on"+T,{get:function(){return d._parser["on"+T]},set:function(k){if(!k)return d.removeAllListeners(T),d._parser["on"+T]=k,k;d.on(T,k)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(c.prototype,{constructor:{value:b}}),b.prototype.write=function(v){v=new Buffer(v);for(var d=0;d<v.length;d++){var T=v[d];if(this.bytes_remaining>0){for(var k=0;k<this.bytes_remaining;k++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+k]=v[k];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+k-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&T>=128)if(T>=194&&T<=223&&(this.bytes_in_sequence=2),T>=224&&T<=239&&(this.bytes_in_sequence=3),T>=240&&T<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>v.length){for(var Y=0;Y<=v.length-1-d;Y++)this.temp_buffs[this.bytes_in_sequence][Y]=v[d+Y];return this.bytes_remaining=d+this.bytes_in_sequence-v.length,!0}else{this.string=v.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var W=d;W<v.length&&!(v[W]>=128);W++);this.string=v.slice(d,W).toString(),this._parser.write(this.string),this.emit("data",this.string),d=W-1}},b.prototype.end=function(v){return v&&v.length&&this._parser.write(v.toString()),this._parser.end(),!0},b.prototype.on=function(v,d){var T=this;return!T._parser["on"+v]&&o.indexOf(v)!==-1&&(T._parser["on"+v]=function(){var k=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);k.splice(0,0,v),T.emit.apply(T,k)}),c.prototype.on.call(T,v,d)},b.prototype.destroy=function(){h(this._parser),this.emit("close")};function S(v,d,T){n.INFO&&console.log("-- emit",d,T),v[d]&&v[d](T)}function A(v,d,T){E(v),S(v,d,T)}function E(v,d){v.textNode=B(v.opt,v.textNode),v.textNode!==void 0&&S(v,d||"onvalue",v.textNode),v.textNode=void 0}function x(v){v.numberNode&&S(v,"onvalue",parseFloat(v.numberNode)),v.numberNode=""}function B(v,d){return d===void 0||(v.trim&&(d=d.trim()),v.normalize&&(d=d.replace(/\s+/g," "))),d}function P(v,d){return E(v),d+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c,d=new Error(d),v.error=d,S(v,"onerror",d),v}function N(v){return(v.state!==s.VALUE||v.depth!==0)&&P(v,"Unexpected end"),E(v),v.c="",v.closed=!0,S(v,"onend"),g.call(v,v.opt),v}function C(v){return v===a.carriageReturn||v===a.lineFeed||v===a.space||v===a.tab}function $(v){var d=this;if(this.error)throw this.error;if(d.closed)return P(d,"Cannot write after close. Assign an onready handler.");if(v===null)return N(d);var T=0,k=v.charCodeAt(0),Y=d.p;for(n.DEBUG&&console.log("write -> ["+v+"]");k&&(Y=k,d.c=k=v.charCodeAt(T++),Y!==k?d.p=Y:Y=d.p,!!k);)switch(n.DEBUG&&console.log(T,k,n.STATE[d.state]),d.position++,k===a.lineFeed?(d.line++,d.column=0):d.column++,d.state){case s.BEGIN:k===a.openBrace?d.state=s.OPEN_OBJECT:k===a.openBracket?d.state=s.OPEN_ARRAY:C(k)||P(d,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(C(k))continue;if(d.state===s.OPEN_KEY)d.stack.push(s.CLOSE_KEY);else if(k===a.closeBrace){S(d,"onopenobject"),this.depth++,S(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_OBJECT);k===a.doubleQuote?d.state=s.STRING:P(d,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(C(k))continue;d.state,s.CLOSE_KEY,k===a.colon?(d.state===s.CLOSE_OBJECT?(d.stack.push(s.CLOSE_OBJECT),E(d,"onopenobject"),this.depth++):E(d,"onkey"),d.state=s.VALUE):k===a.closeBrace?(A(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE):k===a.comma?(d.state===s.CLOSE_OBJECT&&d.stack.push(s.CLOSE_OBJECT),E(d),d.state=s.OPEN_KEY):P(d,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(C(k))continue;if(d.state===s.OPEN_ARRAY)if(S(d,"onopenarray"),this.depth++,d.state=s.VALUE,k===a.closeBracket){S(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_ARRAY);k===a.doubleQuote?d.state=s.STRING:k===a.openBrace?d.state=s.OPEN_OBJECT:k===a.openBracket?d.state=s.OPEN_ARRAY:k===a.t?d.state=s.TRUE:k===a.f?d.state=s.FALSE:k===a.n?d.state=s.NULL:k===a.minus?d.numberNode+="-":a._0<=k&&k<=a._9?(d.numberNode+=String.fromCharCode(k),d.state=s.NUMBER_DIGIT):P(d,"Bad value");continue;case s.CLOSE_ARRAY:if(k===a.comma)d.stack.push(s.CLOSE_ARRAY),E(d,"onvalue"),d.state=s.VALUE;else if(k===a.closeBracket)A(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;else{if(C(k))continue;P(d,"Bad array")}continue;case s.STRING:d.textNode===void 0&&(d.textNode="");var W=T-1,oe=d.slashed,re=d.unicodeI;e:for(;;){for(n.DEBUG&&console.log(T,k,n.STATE[d.state],oe);re>0;)if(d.unicodeS+=String.fromCharCode(k),k=v.charCodeAt(T++),d.position++,re===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),re=0,W=T-1):re++,!k)break e;if(k===a.doubleQuote&&!oe){d.state=d.stack.pop()||s.VALUE,d.textNode+=v.substring(W,T-1),d.position+=T-1-W;break}if(k===a.backslash&&!oe&&(oe=!0,d.textNode+=v.substring(W,T-1),d.position+=T-1-W,k=v.charCodeAt(T++),d.position++,!k))break;if(oe){if(oe=!1,k===a.n?d.textNode+=`
`:k===a.r?d.textNode+="\r":k===a.t?d.textNode+="	":k===a.f?d.textNode+="\f":k===a.b?d.textNode+="\b":k===a.u?(re=1,d.unicodeS=""):d.textNode+=String.fromCharCode(k),k=v.charCodeAt(T++),d.position++,W=T-1,k)continue;break}m.lastIndex=T;var ie=m.exec(v);if(ie===null){T=v.length+1,d.textNode+=v.substring(W,T-1),d.position+=T-1-W;break}if(T=ie.index+1,k=v.charCodeAt(ie.index),!k){d.textNode+=v.substring(W,T-1),d.position+=T-1-W;break}}d.slashed=oe,d.unicodeI=re;continue;case s.TRUE:k===a.r?d.state=s.TRUE2:P(d,"Invalid true started with t"+k);continue;case s.TRUE2:k===a.u?d.state=s.TRUE3:P(d,"Invalid true started with tr"+k);continue;case s.TRUE3:k===a.e?(S(d,"onvalue",!0),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid true started with tru"+k);continue;case s.FALSE:k===a.a?d.state=s.FALSE2:P(d,"Invalid false started with f"+k);continue;case s.FALSE2:k===a.l?d.state=s.FALSE3:P(d,"Invalid false started with fa"+k);continue;case s.FALSE3:k===a.s?d.state=s.FALSE4:P(d,"Invalid false started with fal"+k);continue;case s.FALSE4:k===a.e?(S(d,"onvalue",!1),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid false started with fals"+k);continue;case s.NULL:k===a.u?d.state=s.NULL2:P(d,"Invalid null started with n"+k);continue;case s.NULL2:k===a.l?d.state=s.NULL3:P(d,"Invalid null started with nu"+k);continue;case s.NULL3:k===a.l?(S(d,"onvalue",null),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid null started with nul"+k);continue;case s.NUMBER_DECIMAL_POINT:k===a.period?(d.numberNode+=".",d.state=s.NUMBER_DIGIT):P(d,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:a._0<=k&&k<=a._9?d.numberNode+=String.fromCharCode(k):k===a.period?(d.numberNode.indexOf(".")!==-1&&P(d,"Invalid number has two dots"),d.numberNode+="."):k===a.e||k===a.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&P(d,"Invalid number has two exponential"),d.numberNode+="e"):k===a.plus||k===a.minus?(Y===a.e||Y===a.E||P(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(k)):(x(d),T--,d.state=d.stack.pop()||s.VALUE);continue;default:P(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&f(d),d}})(t)});function ku(e){var t=0,n=Tu(!0),r={pullAsync:function(i){return Yt(this,void 0,void 0,function(){var o,s,c;return mt(this,function(l){switch(l.label){case 0:return o=e.slice(t,t+i),t+=i,[4,Vs(o,"text")];case 1:return s=l.sent(),c=n.write(s),r.result=c||{},[2,c]}})})},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var s=qs(o,"text"),c=n.write(s);return r.result=c||{},c},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Tu(e){var t=Ou.parser(),n=0,r,i=[],o,s,c=!1,l=!1;return t.onopenobject=function(a){var f={};f.incomplete=!0,r||(r=f),o&&(i.push([s,o,l]),e&&(l?o.push(f):o[s]=f)),o=f,s=a,l=!1,++n},t.onkey=function(a){return s=a},t.onvalue=function(a){return l?o.push(a):o[s]=a},t.oncloseobject=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},t.onopenarray=function(){var a=[];a.incomplete=!0,r||(r=a),o&&(i.push([s,o,l]),e&&(l?o.push(a):o[s]=a)),o=a,l=!0,s=null,++n},t.onclosearray=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},{write:function(a){return t.write(a),r},done:function(){return c}}}var Js=1024;function Pu(e,t){return Yt(this,void 0,void 0,function(){var n,r,i,o;return mt(this,function(s){switch(s.label){case 0:return t=t||{},n=t.chunkSizeBytes||Js*1024,[4,Xs(e,n)];case 1:return r=s.sent(),i=r.result.data,o=new Ie(i.databaseName),o.version(i.databaseVersion).stores(vu(i)),[4,Gs(o,r,t)];case 2:return s.sent(),[2,o]}})})}function Gs(e,t,n){return Yt(this,void 0,void 0,function(){function r(){return Yt(this,void 0,void 0,function(){var w,b,S,A,E;return mt(this,function(x){switch(x.label){case 0:w=function(B){var P,N,C,$,v,d,T,k,Y,W,oe,re;return mt(this,function(ie){switch(ie.label){case 0:if(!B.rows)return[2,"break"];if(!B.rows.incomplete&&B.rows.length===0)return[2,"continue"];if(a&&Ie.ignoreTransaction(function(){return a(f)}),P=B.tableName,N=e.table(P),C=l.tables.filter(function(se){return se.name===P})[0].schema,!N){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(B.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&C.split(",")[0]!=N.schema.primKey.src)throw new Error("Primary key differs for table ".concat(B.tableName,". "));for($=B.rows,v=[],d=0;d<$.length&&(T=$[d],!T.incomplete);d++)v.push(lt.revive(T));return k=n.filter,Y=k?B.inbound?v.filter(function(se){return k(P,se)}):v.filter(function(se){var Pe=se[0],Ce=se[1];return k(P,Ce,Pe)}):v,W=B.inbound?[void 0,Y]:[Y.map(function(se){return se[0]}),v.map(function(se){return se[1]})],oe=W[0],re=W[1],n.overwriteValues?[4,N.bulkPut(re,oe)]:[3,2];case 1:return ie.sent(),[3,4];case 2:return[4,N.bulkAdd(re,oe)];case 3:ie.sent(),ie.label=4;case 4:return f.completedRows+=v.length,v.incomplete||(f.completedTables+=1),$.splice(0,v.length),[2]}})},b=0,S=l.data,x.label=1;case 1:return b<S.length?(A=S[b],[5,w(A)]):[3,4];case 2:if(E=x.sent(),E==="break")return[3,4];x.label=3;case 3:return b++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return!o.done()&&!o.eof()?c?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,Ie.waitFor(o.pullAsync(i))];case 6:x.sent(),x.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,c,l,a,f,h,m,g;return mt(this,function(w){switch(w.label){case 0:return n=n||{},i=n.chunkSizeBytes||Js*1024,[4,Xs(t,i)];case 1:if(o=w.sent(),s=o.result,c="FileReaderSync"in self,l=s.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(a=n.progressCallback,f={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(b,S){return b+S.rowCount},0),totalTables:l.tables.length},a&&Ie.ignoreTransaction(function(){return a(f)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=e.tables,w.label=2;case 2:return h<m.length?(g=m[h],[4,g.clear()]):[3,5];case 3:w.sent(),w.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return w.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:w.sent(),w.label=9;case 9:return f.done=!0,a&&Ie.ignoreTransaction(function(){return a(f)}),[2]}})})}function Xs(e,t){return Yt(this,void 0,void 0,function(){var n,r;return mt(this,function(i){switch(i.label){case 0:n="slice"in e?ku(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>Au)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}Ie.prototype.export=function(e){return Hs(this,e)};Ie.prototype.import=function(e,t){return Gs(this,e,t)};Ie.import=function(e,t){return Pu(e,t)};class Qs extends Ie{constructor(){super("AppDB");je(this,"dictionary");je(this,"practiceSettings");je(this,"statistic");je(this,"appSettings");this.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:""})}static recreateFromImport(n){Ke=n}}let Ke=new Qs;const Cu=e=>Ke.dictionary.add({...e}),Iu=e=>Ke.dictionary.put(e),Nu=e=>Ke.dictionary.delete(e),Bu=()=>Ke.dictionary.toArray(),Du=()=>Ke.dictionary.clear(),co=0,ju=()=>Ke.practiceSettings.get(co),Ru=e=>Ke.practiceSettings.put({...e},co),$u=e=>Ke.practiceSettings.update(co,e),Lu=e=>Ke.statistic.put(e),Ku=()=>Ke.statistic.toArray(),Fu=async e=>Ke.statistic.add({...e}),Mu=()=>Ke.statistic.clear(),Uu=async()=>Hs(Ke),Wu=async e=>{await Ke.delete(),Qs.recreateFromImport(await Ie.import(e))},uo=0,Vu=()=>Ke.appSettings.get(uo),qu=e=>Ke.appSettings.put({...e},uo),Yu=e=>Ke.appSettings.update(uo,e),Te={onAddWord:Cu,onEditWord:Iu,onDeleteWord:Nu,getDictionaryDataAsArray:Bu,onDictionaryClear:Du,getPracticeData:ju,initPracticeData:Ru,updatePracticeData:$u,updateStatistic:Lu,getStatisticDataAsArray:Ku,initStatisticData:Fu,onStatisticClear:Mu,exportAppDBData:Uu,importAppDBData:Wu,getAppSettings:Vu,initAppSettingsData:qu,updateAppSettingsData:Yu},zu=""+new URL("octopus-white-14148693.svg",import.meta.url).href;class Hu{constructor(t){je(this,"prevValue");je(this,"checker");je(this,"resolveCallback");je(this,"rejectCallback");this.prevValue=t.prevValue||"",this.checker=t.checker,this.resolveCallback=t.resolveCallback,this.rejectCallback=t.rejectCallback}handleEvent(t){const n=String(t.target.value);this.checker(n)?this.onResolveInput(n,t):this.onRejectInput(n,t)}onResolveInput(t,n){var r;this.updatePrevValue(t),(r=this.resolveCallback)==null||r.call(this,{event:n,curValue:t,prevValue:this.prevValue})}onRejectInput(t,n){var i;const r=n.target.selectionStart||0;this.restore(n.target,t,r),(i=this.rejectCallback)==null||i.call(this,{event:n,curValue:t,prevValue:this.prevValue})}restore(t,n,r){this.restorePrevValue(t),this.restorePrevCaretPos(t,n,r)}restorePrevValue(t){t.value=this.prevValue}restorePrevCaretPos(t,n,r){const i=n.length,o=r-(i-this.prevValue.length);t.setSelectionRange(o,o)}updatePrevValue(t){this.prevValue=t}getPrevValue(){return this.prevValue}}const Ju=()=>{Ut.trigger({type:"component",component:"addWord",backdropClasses:"!bg-cyan-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40 h-[calc(100vh-24px)] bottom-0 top-auto"})},jd=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}},Zs=`<img class='h-8' src='${zu}' alt='octa icon'/>`,Gu="break-all bg-red-400 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Xu="break-all bg-yellow-500 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Rd=e=>`-webkit-mask: url(${e}) no-repeat center / contain; mask: url(${e}) no-repeat center / contain;`,ea=e=>JSON.parse(JSON.stringify(e)),$d=e=>[...e].sort(()=>Math.random()-.5);function*Ld(e){const t=e.length;for(let n=0;n<t;n+=1)yield e[n]}const Kd=e=>new Hu(e),Fd=(e=0)=>e===0?"bg-slate-400":e<40?"bg-orange-400":e<75?"bg-amber-400":"bg-green-400",Md=e=>e===0?"bg-slate-300 hover:bg-slate-400 focus:bg-slate-400":e<40?"bg-orange-300 hover:bg-orange-400 focus:bg-orange-400":e<75?"bg-amber-300 hover:bg-amber-400 focus:bg-amber-400":"bg-green-300 hover:bg-green-400 focus:bg-green-400",ta=["January","February","March","April","May","June","July","August","September","October","November","December"],Qu=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ud={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},Wd=Qu.map(e=>e.slice(0,3)),Mo={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},Vd=e=>{e.sort((t,n)=>Mo[t]-Mo[n])},qd=(e,t)=>{let n=e.indexOf(t);for(;n!==-1;)e.splice(n,1),n=e.indexOf(t,n+1)},Yd=e=>{e.sort(({from:t},{from:n})=>Number(t.replace(":",""))-Number(n.replace(":","")))},na=e=>{e.code==="Escape"&&e.stopPropagation()},Zu=()=>{document.addEventListener("keydown",na)},el=()=>{document.removeEventListener("keydown",na)},tl=e=>{e.preventDefault()},nl=()=>{document.addEventListener("contextmenu",tl)},ra=e=>{zi.trigger({message:Zs+`<div>${e}</div>`,background:Gu,autohide:!1})},zd=e=>{zi.trigger({message:Zs+`<div>${e}</div>`,background:Xu})},rl=async e=>{ra("UnexpectedException: "+e),(await Un(()=>import("./ipcUtils-95eb8475.js").then(t=>t.i),[],import.meta.url)).sendToIpcMain("mainWinErr",e)},il=async({reason:e})=>{const t=`Unhandledrejection: ${e}`;ra(t),(await Un(()=>import("./ipcUtils-95eb8475.js").then(n=>n.i),[],import.meta.url)).sendToIpcMain("mainWinErr",t)},ol=()=>{window.onerror=rl,window.onunhandledrejection=il},sl=()=>{if(window.electron===void 0)throw"electron API is missing in window"},al={startWithSystem:!0,openAppWindowAtStart:!0},cl={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},ul={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},ll={basic:al,practice:{passive:cl,active:ul}},ia=()=>ea(ll),fl={practiceTarget:"original",practiceType:"section",sectionLastWordId:null,sectionSize:10},oa=()=>ea(fl);class sa{constructor(){je(this,"totalWordsAmount");je(this,"addedWordsAmount");je(this,"deletedWordsAmount");je(this,"wordTotalPracticeAmount");je(this,"wordOriginPracticeAmount");je(this,"wordTranslationPracticeAmount");je(this,"averagePracticeSuccess");je(this,"successfulPracticeCount");je(this,"unsuccessfulPracticeCount");this.totalWordsAmount=0,this.addedWordsAmount=0,this.deletedWordsAmount=0,this.wordTotalPracticeAmount=0,this.wordOriginPracticeAmount=0,this.wordTranslationPracticeAmount=0,this.averagePracticeSuccess=0,this.successfulPracticeCount=0,this.unsuccessfulPracticeCount=0}}const aa=()=>{const e=String(new Date().getFullYear()),t={};return ta.forEach(n=>{t[n]=new sa}),t.year=e,[t]},dl=async()=>{(await Un(()=>import("./DBUtilsFacadeDesktopBuild-4acf0dc7.js"),["./DBUtilsFacadeDesktopBuild-4acf0dc7.js","./ipcUtils-95eb8475.js"],import.meta.url)).initDBUtilsFacadeDesktopBuild()},hl=async()=>{let[e,t,n,r]=await Promise.all([Te.getDictionaryDataAsArray(),Te.getPracticeData(),Te.getStatisticDataAsArray(),Te.getAppSettings()]);return t===void 0&&(t=oa(),Te.initPracticeData(t)),n.length===0&&(n=aa(),Te.initStatisticData(n[0])),r===void 0&&(r=ia(),Te.initAppSettingsData(r)),[e,t,n,r]};class ca{constructor(t){je(this,"value");je(this,"subscriptions",[]);this.value=t}subscribe(t){return t(this.value),this.subscriptions.push(t),()=>this.unsubscribe(t)}update(t){this.set(t(this.value))}set(t){this.value=t,this.broadcast()}get(){return this.value}broadcast(){this.subscriptions.forEach(t=>t(this.value))}unsubscribe(t){this.subscriptions=this.subscriptions.filter(n=>n!==t)}}const zt=(e,t)=>{const n=new ca(e);return Object.assign(n,t),n},pl=zt(),yl=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},ml=(e,t)=>{_t.update(n=>(n.daySettings[e].interval=t,n))},gl=(e,t)=>{_t.update(n=>(n.daySettings[e].enabled=t,n))},vl=e=>{_t.update(t=>(yl(e,t),t))},bl=e=>{_t.update(t=>(delete t.daySettings[e],t))},wl=(e,t)=>{_t.update(n=>(n.daySettings[e].timeFrames=t,n))},_l=(e,t)=>{_t.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},pl.set(e),n})},Sl=e=>{_t.set(e)},xl=async()=>{_t.set((await Te.getAppSettings()).practice.active)},Al=e=>{_t=zt(e,{updateSettingKeyIntervalProp:ml,updateSettingKeyEnabledProp:gl,addSettingKey:vl,removeSettingKey:bl,updateTimeFrames:wl,copySettingsForDay:_l,reInit:Sl,reInitFromDB:xl})};let _t,or;const El=e=>{or.value=e},Ol=async()=>{or.set((await Te.getAppSettings()).basic)},kl=e=>{or=zt(e,{reInit:El,reInitFromDB:Ol})},Tl=zt(),Pl=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},Cl=(e,t)=>{St.update(n=>(n.daySettings[e].interval=t,n))},Il=(e,t)=>{St.update(n=>(n.daySettings[e].enabled=t,n))},Nl=e=>{St.update(t=>(Pl(e,t),t))},Bl=e=>{St.update(t=>(delete t.daySettings[e],t))},Dl=(e,t)=>{St.update(n=>(n.daySettings[e].timeFrames=t,n))},jl=(e,t)=>{St.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},Tl.set(e),n})},Rl=e=>{St.set(e)},$l=async()=>{St.set((await Te.getAppSettings()).practice.passive)},Ll=e=>{St=zt(e,{updateSettingKeyIntervalProp:Cl,updateSettingKeyEnabledProp:Il,addSettingKey:Nl,removeSettingKey:Bl,updateTimeFrames:Dl,copySettingsForDay:jl,reInit:Rl,reInitFromDB:$l})};let St,ua;const Kl=()=>{ua=wc([or,St,_t],([e,t,n])=>({basic:{...e},practice:{passive:{...t},active:{...n}}}))},Fl=e=>{Te.updateAppSettingsData(e)};let la;const Ml=()=>{la=ua.subscribe(Fl)},Hd=()=>{la()},Ul=e=>{Tn.set(e)},Wl=async()=>{Tn.set(await Te.getPracticeData())},Vl=e=>{Tn=zt({...e},{reInit:Ul,reInitFromDB:Wl})};let Tn;const ql=e=>{Te.updatePracticeData(e)},Yl=()=>{Tn.subscribe(ql)};class zl extends ca{subscribe(t){return this.subscriptions.push(t),()=>this.unsubscribe(t)}}const lo=(e,t)=>{const n=new zl(e);return Object.assign(n,t),n},Jr=lo(),Hl=e=>{Te.updateStatistic(e)},Jl=()=>{Jr.subscribe(Hl)},Ht=lo();let fa;const Gl=()=>{fa={add:Te.onAddWord,edit:Te.onEditWord,delete:Te.onDeleteWord}},Xl=([e,t])=>{fa[e](t)},Ql=()=>{Gl(),Ht.subscribe(Xl)},Zl=e=>{const t={...e,learnSuccess:0,practiceCount:0,successfulPracticeCount:0};sr(t),Ht.set(["edit",t])},sr=e=>{wt.update(t=>t.set(e.id,e))},fo=e=>wt.value.get(e),ef=e=>{const n={id:String(new Date().getTime()),learnSuccess:0,practiceCount:0,successfulPracticeCount:0,...e};sr(n),Ht.set(["add",n])},tf=(e,t)=>{const{learnSuccess:n,practiceCount:r,successfulPracticeCount:i}=e,o={id:e.id,learnSuccess:n,practiceCount:r,successfulPracticeCount:i,...t};sr(o),Ht.set(["edit",o])},nf=e=>{wt.update(t=>(t.delete(e),t)),Ht.set(["delete",e])},da=2,rf=e=>{const t=fo(e),n=t.practiceCount+1,r=t.successfulPracticeCount*100/n,i=Number(r.toFixed(da)),o={...t,practiceCount:n,learnSuccess:i};sr(o),Ht.set(["edit",o])},of=e=>{const t=fo(e),n=t.practiceCount+1,r=t.successfulPracticeCount+1,i=r*100/n,o=Number(i.toFixed(da)),s={...t,practiceCount:n,successfulPracticeCount:r,learnSuccess:o};sr(s),Ht.set(["edit",s])},sf=()=>{wt.value.clear()},af=async()=>{const e=await Te.getDictionaryDataAsArray();wt.value=ha(e)},ha=e=>{const t=new Map;return e.forEach(({id:n,...r})=>{t.set(n,{id:n,...r})}),t},cf=e=>{wt=zt(ha(e),{getById:fo,removeWord:nf,resetWordPractice:Zl,editWord:tf,addWord:ef,onUnsuccessfulPractice:rf,onSuccessfulPractice:of,clear:sf,reInitFromDB:af})};let wt;const uf=lo();let pa;const lf=({practiceTarget:e})=>{pa=e},ff=e=>{const t={};return ta.forEach(n=>{t[n]=new sa}),t.year=e,t},ho=(e,t)=>e.has(t)?e.get(t):ff(t),po=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}).split(" "),df=([e,t])=>{e in Uo&&Uo[e](t)},hf=()=>{cn.update(e=>{const[t,n]=po(),r=ho(e,n);return r[t].totalWordsAmount=wt.value.size,r[t].deletedWordsAmount+=1,e.set(n,r),Jr.set(r),e})},pf=()=>{cn.update(e=>{const[t,n]=po(),r=ho(e,n);return r[t].totalWordsAmount=wt.value.size,r[t].addedWordsAmount+=1,e.set(n,r),Jr.set(r),e})},Uo={add:pf,delete:hf},ya=(e,t)=>{cn.update(n=>{const[r,i]=po(),o=ho(n,i);return e==="successful"?o[r].successfulPracticeCount+=1:o[r].unsuccessfulPracticeCount+=1,t==="original"?o[r].wordOriginPracticeAmount+=1:o[r].wordTranslationPracticeAmount+=1,o[r].wordTotalPracticeAmount+=1,o[r].averagePracticeSuccess=Number((o[r].successfulPracticeCount/o[r].wordTotalPracticeAmount).toFixed(2))*100,n.set(i,o),Jr.set(o),n})},yf=e=>{ya(e,pa)},mf=()=>{Tn.subscribe(lf),Ht.subscribe(df),uf.subscribe(yf)},Jd=(e,t)=>{ya(e,t)};let cn;const yo=e=>{const t=new Map;return e.forEach(n=>{t.set(n.year,n)}),t},gf=e=>{cn.value=yo(e)},vf=async()=>{cn.set(yo(await Te.getStatisticDataAsArray()))},bf=e=>{cn=zt(yo(e),{reInit:gf,reInitFromDB:vf}),mf()},Gr=({backdropColor:e,backdropClasses:t=`!bg-${e}-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40`,title:n="Confirm to proceed",body:r,color:i,okBtnText:o,noBtnText:s,backdropActionName:c,response:l})=>({type:"component",component:"confirm",backdropClasses:t+" h-[calc(100vh-24px)] bottom-0 top-auto",response:a=>{a!==void 0&&l(a)},meta:{title:n,body:r,color:i,okBtnText:o,noBtnText:s,backdropActionName:c}}),ma=Et({newWordVariantsList:[],newWordTranslationsList:[],newWordDescription:""}),ga=()=>{ma.set({newWordVariantsList:[],newWordTranslationsList:[],newWordDescription:""})},va=e=>{e?ga():Ju()},wf=()=>{Ut.close();const e=Ui(ma);e.newWordVariantsList.length!==0||e.newWordTranslationsList.length!==0||e.newWordDescription.trim()!==""?Ut.trigger(Gr({backdropColor:"cyan",color:"cyan",body:'All entered word data will be <i class="text-cyan-400 bg-white rounded-md p-1">lost</i>.',backdropActionName:"addWordModalCloseConfirmAnswer",response:va})):ga()},ba=Et();let Ki;ba.subscribe(e=>Ki=e);const _f=()=>{Ut.close()},Sf=e=>{e&&(wt.resetWordPractice(Ki),ba.set(wt.getById(Ki.id))),Ut.trigger({type:"component",component:"wordPractice",backdropClasses:"!bg-pink-200 !bg-opacity-50 backdrop-blur-sm cursor-pointer !z-40 h-[calc(100vh-24px)] bottom-0 top-auto"})},xf=Et(),Wo={id:"loading",bgDrawer:"text-white",bgBackdrop:"bg-opacity-50 !z-30 h-[calc(100vh-24px)] bottom-0 top-auto",width:"w-full",height:"h-full",padding:"",rounded:"rounded-md"},mo=e=>{xf.set({OctaIconColor:e.OctaIconColor}),Zu(),ps.open({...Wo,bgBackdrop:`${Wo.bgBackdrop} bg-${e.bgBackdropColor}-500`})},go=()=>{ps.close(),el()},vo={bgBackdropColor:"red",OctaIconColor:"red"},wa=async()=>{wt.clear(),await Te.onDictionaryClear()},_a=async e=>{e&&(mo(vo),await wa(),go())},Gd=()=>{Ut.trigger(Gr({backdropColor:"red",color:"red",body:"All words in the dictionary and their data (e.g. practice) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i><br>This action doesn't affects app statistic",backdropActionName:"dictionaryResetConfirmAnswer",response:_a}))},Sa=async()=>{const e=aa();cn.reInit(e),await Te.onStatisticClear(),await Te.initStatisticData(e[0])},xa=async e=>{e&&(mo(vo),await Sa(),go())},Xd=()=>{Ut.trigger(Gr({backdropColor:"red",color:"red",body:"All statistic data (e.g. number of practice per month etc.) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i>",backdropActionName:"statisticResetConfirmAnswer",response:xa}))},Af=async()=>{const e=ia();St.reInit(e.practice.passive),_t.reInit(e.practice.active),or.reInit(e.basic),await Te.initAppSettingsData(e)},Ef=async()=>{const e=oa();Tn.reInit(e),await Te.initPracticeData(e)},Aa=async e=>{e&&(mo(vo),await wa(),await Ef(),await Sa(),await Af(),go())},Qd=()=>{Ut.trigger(Gr({backdropColor:"red",color:"red",body:"All app data (e.g. dictionary, statistic etc.) will be <i class='px-1 bg-white text-red-700 rounded-md'>deleted</i>",backdropActionName:"appResetConfirmAnswer",response:Aa}))};let Ea,Oa,ka;const Zd=e=>ka=e,eh=e=>Oa=e,th=e=>Ea=e,Of=e=>{e&&Ea.copySettingsForDay(Oa,ka)},Vo=Et(null),kf=e=>{Vo.set(e),Vo.set(null)};let Ta;const Tf=()=>{Ta={addWordModalClose:wf,addWordModalCloseConfirmAnswer:va,wordPracticeModalClose:_f,wordPracticeModalCloseConfirmAnswer:Sf,transferImportConfirmAnswer:kf,dictionaryResetConfirmAnswer:_a,statisticResetConfirmAnswer:xa,appResetConfirmAnswer:Aa,copyPracticeDaySettingsConfirmAnswer:Of}};const nh=(e,...t)=>{Mr=e,bo=t},Pf=()=>{Mr=null,bo=[]};let Mr,bo;const Cf=()=>{window.addEventListener("keydown",If)},If=({code:e})=>{!Mr||e!=="Escape"||setTimeout(()=>{Ta[Mr](...bo),Pf()},180)};hs.set({computePosition:Ja,autoUpdate:Ha,offset:Ua,shift:Va,flip:Ma,arrow:Ra});ol();dl().then(hl).then(async([e,t,n,r])=>{cf(e),Vl(t),bf(n),Ll(r.practice.passive),Al(r.practice.active),kl(r.basic),Kl(),Ql(),Yl(),Jl(),Ml(),Tf(),Cf(),nl(),(await Un(()=>import("./ipcUtils-95eb8475.js").then(o=>o.i),[],import.meta.url)).initDesktopActionListeners();const i=(await Un(()=>import("./App-1dfc85fb.js"),["./App-1dfc85fb.js","./ipcUtils-95eb8475.js","./App-c0943909.css"],import.meta.url)).default;new i({target:document.getElementById("app")}),sl()});export{od as $,Mf as A,pd as B,md as C,An as D,Ad as E,Ve as F,Mi as G,gd as H,as as I,Qf as J,ad as K,Td as L,Ff as M,id as N,td as O,zf as P,dd as Q,ed as R,Bd as S,kd as T,Od as U,fd as V,ld as W,To as X,sd as Y,Zf as Z,rd as _,ic as a,Yd as a$,Jf as a0,Df as a1,Ut as a2,Vf as a3,ud as a4,Id as a5,mc as a6,Pd as a7,gc as a8,Bf as a9,zd as aA,or as aB,Gd as aC,Xd as aD,Qd as aE,Te as aF,Vo as aG,mo as aH,Hd as aI,St as aJ,_t as aK,cn as aL,Ml as aM,go as aN,Gr as aO,kf as aP,Wd as aQ,Ed as aR,eh as aS,th as aT,Zd as aU,Ud as aV,Of as aW,nd as aX,yc as aY,vd as aZ,Uf as a_,cd as aa,ps as ab,Yf as ac,Sd as ad,xd as ae,zi as af,lc as ag,Rd as ah,Xf as ai,Ju as aj,hd as ak,Cd as al,bd as am,wt as an,Wf as ao,jd as ap,wc as aq,Md as ar,ba as as,Tn as at,Kd as au,pc as av,Ld as aw,$d as ax,Ui as ay,uf as az,nc as b,Dd as b0,qd as b1,Vd as b2,Tl as b3,pl as b4,ta as b5,zu as b6,xf as b7,Mr as b8,Ta as b9,bo as ba,Pf as bb,wf as bc,ma as bd,ga as be,nh as bf,Fd as bg,_f as bh,Sf as bi,Cu as bj,Iu as bk,Nu as bl,Du as bm,Fu as bn,Ru as bo,$u as bp,Lu as bq,qu as br,Yu as bs,Wu as bt,Jd as bu,jf as c,Rf as d,ss as e,hc as f,Lf as g,Vi as h,Nd as i,yd as j,Ga as k,Kf as l,Vr as m,qf as n,sn as o,Hf as p,rc as q,Za as r,Xa as s,ds as t,$f as u,Gf as v,Et as w,wd as x,_d as y,Rt as z};
