var ta=Object.defineProperty;var na=(e,t,n)=>t in e?ta(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var je=(e,t,n)=>(na(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ra="modulepreload",ia=function(e,t){return new URL(e,t).href},uo={},Fn=function(t,n,r){if(!n||n.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=ia(o,r),o in uo)return;uo[o]=!0;const s=o.endsWith(".css"),c=s?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const h=i[f];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const a=document.createElement("link");if(a.rel=s?"stylesheet":ra,s||(a.as="script",a.crossOrigin=""),a.href=o,document.head.appendChild(a),s)return new Promise((f,h)=>{a.addEventListener("load",f),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})};function Xn(e){return e.split("-")[1]}function Di(e){return e==="y"?"height":"width"}function Ht(e){return e.split("-")[0]}function Qn(e){return["top","bottom"].includes(Ht(e))?"x":"y"}function lo(e,t,n){let{reference:r,floating:i}=e;const o=r.x+r.width/2-i.width/2,s=r.y+r.height/2-i.height/2,c=Qn(t),l=Di(c),a=r[l]/2-i[l]/2,f=c==="x";let h;switch(Ht(t)){case"top":h={x:o,y:r.y-i.height};break;case"bottom":h={x:o,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:s};break;case"left":h={x:r.x-i.width,y:s};break;default:h={x:r.x,y:r.y}}switch(Xn(t)){case"start":h[c]-=a*(n&&f?-1:1);break;case"end":h[c]+=a*(n&&f?-1:1)}return h}const oa=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,c=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=lo(a,r,l),m=r,g={},w=0;for(let b=0;b<c.length;b++){const{name:S,fn:E}=c[b],{x:A,y:x,data:B,reset:P}=await E({x:f,y:h,initialPlacement:r,placement:m,strategy:i,middlewareData:g,rects:a,platform:s,elements:{reference:e,floating:t}});f=A??f,h=x??h,g={...g,[S]:{...g[S],...B}},P&&w<=50&&(w++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(a=P.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:f,y:h}=lo(a,m,l)),b=-1)}return{x:f,y:h,placement:m,strategy:i,middlewareData:g}};function Bo(e){return typeof e!="number"?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(e):{top:e,right:e,bottom:e,left:e}}function Ar(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function jo(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=t,w=Bo(g),b=c[m?h==="floating"?"reference":"floating":h],S=Ar(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(b)))==null||n?b:b.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:a,rootBoundary:f,strategy:l})),E=h==="floating"?{...s.floating,x:r,y:i}:s.reference,A=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),x=await(o.isElement==null?void 0:o.isElement(A))&&await(o.getScale==null?void 0:o.getScale(A))||{x:1,y:1},B=Ar(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:E,offsetParent:A,strategy:l}):E);return{top:(S.top-B.top+w.top)/x.y,bottom:(B.bottom-S.bottom+w.bottom)/x.y,left:(S.left-B.left+w.left)/x.x,right:(B.right-S.right+w.right)/x.x}}const sa=Math.min,aa=Math.max;function ii(e,t,n){return aa(e,sa(t,n))}const ca=e=>({name:"arrow",options:e,async fn(t){const{element:n,padding:r=0}=e||{},{x:i,y:o,placement:s,rects:c,platform:l,elements:a}=t;if(n==null)return{};const f=Bo(r),h={x:i,y:o},m=Qn(s),g=Di(m),w=await l.getDimensions(n),b=m==="y",S=b?"top":"left",E=b?"bottom":"right",A=b?"clientHeight":"clientWidth",x=c.reference[g]+c.reference[m]-h[m]-c.floating[g],B=h[m]-c.reference[m],P=await(l.getOffsetParent==null?void 0:l.getOffsetParent(n));let N=P?P[A]:0;N&&await(l.isElement==null?void 0:l.isElement(P))||(N=a.floating[A]||c.floating[g]);const C=x/2-B/2,$=f[S],v=N-w[g]-f[E],d=N/2-w[g]/2+C,k=ii($,d,v),T=Xn(s)!=null&&d!=k&&c.reference[g]/2-(d<$?f[S]:f[E])-w[g]/2<0;return{[m]:h[m]-(T?d<$?$-d:v-d:0),data:{[m]:k,centerOffset:d-k}}}}),ua=["top","right","bottom","left"];ua.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]);const la={left:"right",right:"left",bottom:"top",top:"bottom"};function Or(e){return e.replace(/left|right|bottom|top/g,t=>la[t])}function fa(e,t,n){n===void 0&&(n=!1);const r=Xn(e),i=Qn(e),o=Di(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=Or(s)),{main:s,cross:Or(s)}}const da={start:"end",end:"start"};function Hr(e){return e.replace(/start|end/g,t=>da[t])}const ha=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n;const{placement:r,middlewareData:i,rects:o,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:a=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...b}=e,S=Ht(r),E=Ht(s)===s,A=await(c.isRTL==null?void 0:c.isRTL(l.floating)),x=h||(E||!w?[Or(s)]:function(k){const T=Or(k);return[Hr(k),T,Hr(T)]}(s));h||g==="none"||x.push(...function(k,T,Y,q){const oe=Xn(k);let re=function(ie,se,ke){const Pe=["left","right"],Re=["right","left"],Ke=["top","bottom"],Ze=["bottom","top"];switch(ie){case"top":case"bottom":return ke?se?Re:Pe:se?Pe:Re;case"left":case"right":return se?Ke:Ze;default:return[]}}(Ht(k),Y==="start",q);return oe&&(re=re.map(ie=>ie+"-"+oe),T&&(re=re.concat(re.map(Hr)))),re}(s,w,g,A));const B=[s,...x],P=await jo(t,b),N=[];let C=((n=i.flip)==null?void 0:n.overflows)||[];if(a&&N.push(P[S]),f){const{main:k,cross:T}=fa(r,o,A);N.push(P[k],P[T])}if(C=[...C,{placement:r,overflows:N}],!N.every(k=>k<=0)){var $,v;const k=((($=i.flip)==null?void 0:$.index)||0)+1,T=B[k];if(T)return{data:{index:k,overflows:C},reset:{placement:T}};let Y=(v=C.filter(q=>q.overflows[0]<=0).sort((q,oe)=>q.overflows[1]-oe.overflows[1])[0])==null?void 0:v.placement;if(!Y)switch(m){case"bestFit":{var d;const q=(d=C.map(oe=>[oe.placement,oe.overflows.filter(re=>re>0).reduce((re,ie)=>re+ie,0)]).sort((oe,re)=>oe[1]-re[1])[0])==null?void 0:d[0];q&&(Y=q);break}case"initialPlacement":Y=s}if(r!==Y)return{reset:{placement:Y}}}return{}}}},pa=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,i=await async function(o,s){const{placement:c,platform:l,elements:a}=o,f=await(l.isRTL==null?void 0:l.isRTL(a.floating)),h=Ht(c),m=Xn(c),g=Qn(c)==="x",w=["left","top"].includes(h)?-1:1,b=f&&g?-1:1,S=typeof s=="function"?s(o):s;let{mainAxis:E,crossAxis:A,alignmentAxis:x}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...S};return m&&typeof x=="number"&&(A=m==="end"?-1*x:x),g?{x:A*b,y:E*w}:{x:E*w,y:A*b}}(t,e);return{x:n+i.x,y:r+i.y,data:i}}}};function ya(e){return e==="x"?"y":"x"}const ma=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:c={fn:S=>{let{x:E,y:A}=S;return{x:E,y:A}}},...l}=e,a={x:n,y:r},f=await jo(t,l),h=Qn(Ht(i)),m=ya(h);let g=a[h],w=a[m];if(o){const S=h==="y"?"bottom":"right";g=ii(g+f[h==="y"?"top":"left"],g,g-f[S])}if(s){const S=m==="y"?"bottom":"right";w=ii(w+f[m==="y"?"top":"left"],w,w-f[S])}const b=c.fn({...t,[h]:g,[m]:w});return{...b,data:{x:b.x-n,y:b.y-r}}}}};function ot(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gt(e){return ot(e).getComputedStyle(e)}function Do(e){return e instanceof ot(e).Node}function Kt(e){return Do(e)?(e.nodeName||"").toLowerCase():""}let ar;function Ro(){if(ar)return ar;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(ar=e.brands.map(t=>t.brand+"/"+t.version).join(" "),ar):navigator.userAgent}function bt(e){return e instanceof ot(e).HTMLElement}function st(e){return e instanceof ot(e).Element}function fo(e){return typeof ShadowRoot>"u"?!1:e instanceof ot(e).ShadowRoot||e instanceof ShadowRoot}function Un(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=gt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function ga(e){return["table","td","th"].includes(Kt(e))}function oi(e){const t=/firefox/i.test(Ro()),n=gt(e),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!r&&r!=="none"||t&&n.willChange==="filter"||t&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(i=>n.willChange.includes(i))||["paint","layout","strict","content"].some(i=>{const o=n.contain;return o!=null&&o.includes(i)})}function si(){return/^((?!chrome|android).)*safari/i.test(Ro())}function Kr(e){return["html","body","#document"].includes(Kt(e))}const ho=Math.min,Nn=Math.max,Tr=Math.round;function $o(e){const t=gt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=bt(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,c=Tr(n)!==o||Tr(r)!==s;return c&&(n=o,r=s),{width:n,height:r,fallback:c}}function Lo(e){return st(e)?e:e.contextElement}const Ko={x:1,y:1};function pn(e){const t=Lo(e);if(!bt(t))return Ko;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=$o(t);let s=(o?Tr(n.width):n.width)/r,c=(o?Tr(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),c&&Number.isFinite(c)||(c=1),{x:s,y:c}}function Zt(e,t,n,r){var i,o;t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),c=Lo(e);let l=Ko;t&&(r?st(r)&&(l=pn(r)):l=pn(e));const a=c?ot(c):window,f=si()&&n;let h=(s.left+(f&&((i=a.visualViewport)==null?void 0:i.offsetLeft)||0))/l.x,m=(s.top+(f&&((o=a.visualViewport)==null?void 0:o.offsetTop)||0))/l.y,g=s.width/l.x,w=s.height/l.y;if(c){const b=ot(c),S=r&&st(r)?ot(r):r;let E=b.frameElement;for(;E&&r&&S!==b;){const A=pn(E),x=E.getBoundingClientRect(),B=getComputedStyle(E);x.x+=(E.clientLeft+parseFloat(B.paddingLeft))*A.x,x.y+=(E.clientTop+parseFloat(B.paddingTop))*A.y,h*=A.x,m*=A.y,g*=A.x,w*=A.y,h+=x.x,m+=x.y,E=ot(E).frameElement}}return Ar({width:g,height:w,x:h,y:m})}function Lt(e){return((Do(e)?e.ownerDocument:e.document)||window.document).documentElement}function Fr(e){return st(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Fo(e){return Zt(Lt(e)).left+Fr(e).scrollLeft}function wn(e){if(Kt(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fo(e)&&e.host||Lt(e);return fo(t)?t.host:t}function Uo(e){const t=wn(e);return Kr(t)?t.ownerDocument.body:bt(t)&&Un(t)?t:Uo(t)}function Bn(e,t){var n;t===void 0&&(t=[]);const r=Uo(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=ot(r);return i?t.concat(o,o.visualViewport||[],Un(r)?r:[]):t.concat(r,Bn(r))}function po(e,t,n){let r;if(t==="viewport")r=function(s,c){const l=ot(s),a=Lt(s),f=l.visualViewport;let h=a.clientWidth,m=a.clientHeight,g=0,w=0;if(f){h=f.width,m=f.height;const b=si();(!b||b&&c==="fixed")&&(g=f.offsetLeft,w=f.offsetTop)}return{width:h,height:m,x:g,y:w}}(e,n);else if(t==="document")r=function(s){const c=Lt(s),l=Fr(s),a=s.ownerDocument.body,f=Nn(c.scrollWidth,c.clientWidth,a.scrollWidth,a.clientWidth),h=Nn(c.scrollHeight,c.clientHeight,a.scrollHeight,a.clientHeight);let m=-l.scrollLeft+Fo(s);const g=-l.scrollTop;return gt(a).direction==="rtl"&&(m+=Nn(c.clientWidth,a.clientWidth)-f),{width:f,height:h,x:m,y:g}}(Lt(e));else if(st(t))r=function(s,c){const l=Zt(s,!0,c==="fixed"),a=l.top+s.clientTop,f=l.left+s.clientLeft,h=bt(s)?pn(s):{x:1,y:1};return{width:s.clientWidth*h.x,height:s.clientHeight*h.y,x:f*h.x,y:a*h.y}}(t,n);else{const s={...t};if(si()){var i,o;const c=ot(e);s.x-=((i=c.visualViewport)==null?void 0:i.offsetLeft)||0,s.y-=((o=c.visualViewport)==null?void 0:o.offsetTop)||0}r=s}return Ar(r)}function Mo(e,t){const n=wn(e);return!(n===t||!st(n)||Kr(n))&&(gt(n).position==="fixed"||Mo(n,t))}function yo(e,t){return bt(e)&&gt(e).position!=="fixed"?t?t(e):e.offsetParent:null}function mo(e,t){const n=ot(e);if(!bt(e))return n;let r=yo(e,t);for(;r&&ga(r)&&gt(r).position==="static";)r=yo(r,t);return r&&(Kt(r)==="html"||Kt(r)==="body"&&gt(r).position==="static"&&!oi(r))?n:r||function(i){let o=wn(i);for(;bt(o)&&!Kr(o);){if(oi(o))return o;o=wn(o)}return null}(e)||n}function va(e,t,n){const r=bt(t),i=Lt(t),o=Zt(e,!0,n==="fixed",t);let s={scrollLeft:0,scrollTop:0};const c={x:0,y:0};if(r||!r&&n!=="fixed")if((Kt(t)!=="body"||Un(i))&&(s=Fr(t)),bt(t)){const l=Zt(t,!0);c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}else i&&(c.x=Fo(i));return{x:o.left+s.scrollLeft-c.x,y:o.top+s.scrollTop-c.y,width:o.width,height:o.height}}const ba={getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=n==="clippingAncestors"?function(a,f){const h=f.get(a);if(h)return h;let m=Bn(a).filter(S=>st(S)&&Kt(S)!=="body"),g=null;const w=gt(a).position==="fixed";let b=w?wn(a):a;for(;st(b)&&!Kr(b);){const S=gt(b),E=oi(b);E||S.position!=="fixed"||(g=null),(w?!E&&!g:!E&&S.position==="static"&&g&&["absolute","fixed"].includes(g.position)||Un(b)&&!E&&Mo(a,b))?m=m.filter(A=>A!==b):g=S,b=wn(b)}return f.set(a,m),m}(t,this._c):[].concat(n),s=[...o,r],c=s[0],l=s.reduce((a,f)=>{const h=po(t,f,i);return a.top=Nn(h.top,a.top),a.right=ho(h.right,a.right),a.bottom=ho(h.bottom,a.bottom),a.left=Nn(h.left,a.left),a},po(t,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=bt(n),o=Lt(n);if(n===o)return t;let s={scrollLeft:0,scrollTop:0},c={x:1,y:1};const l={x:0,y:0};if((i||!i&&r!=="fixed")&&((Kt(n)!=="body"||Un(o))&&(s=Fr(n)),bt(n))){const a=Zt(n);c=pn(n),l.x=a.x+n.clientLeft,l.y=a.y+n.clientTop}return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-s.scrollLeft*c.x+l.x,y:t.y*c.y-s.scrollTop*c.y+l.y}},isElement:st,getDimensions:function(e){return $o(e)},getOffsetParent:mo,getDocumentElement:Lt,getScale:pn,async getElementRects(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||mo,o=this.getDimensions;return{reference:va(t,await i(n),r),floating:{x:0,y:0,...await o(n)}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>gt(e).direction==="rtl"};function wa(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:c=!1}=r,l=i||o?[...st(e)?Bn(e):e.contextElement?Bn(e.contextElement):[],...Bn(t)]:[];l.forEach(m=>{const g=!st(m)&&m.toString().includes("V");!i||c&&!g||m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});let a,f=null;s&&(f=new ResizeObserver(()=>{n()}),st(e)&&!c&&f.observe(e),st(e)||!e.contextElement||c||f.observe(e.contextElement),f.observe(t));let h=c?Zt(e):null;return c&&function m(){const g=Zt(e);!h||g.x===h.x&&g.y===h.y&&g.width===h.width&&g.height===h.height||n(),h=g,a=requestAnimationFrame(m)}(),n(),()=>{var m;l.forEach(g=>{i&&g.removeEventListener("scroll",n),o&&g.removeEventListener("resize",n)}),(m=f)==null||m.disconnect(),f=null,c&&cancelAnimationFrame(a)}}const _a=(e,t,n)=>{const r=new Map,i={platform:ba,...n},o={...i.platform,_c:r};return oa(e,t,{...i,platform:o})};function qe(){}const Ur=e=>e;function Sa(e,t){for(const n in t)e[n]=t[n];return e}function qo(e){return e()}function go(){return Object.create(null)}function Nt(e){e.forEach(qo)}function nn(e){return typeof e=="function"}function xa(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let cr;function Fl(e,t){return cr||(cr=document.createElement("a")),cr.href=t,e===cr.href}function Ea(e){return Object.keys(e).length===0}function Ri(e,...t){if(e==null)return qe;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Wo(e){let t;return Ri(e,n=>t=n)(),t}function Ul(e,t,n){e.$$.on_destroy.push(Ri(t,n))}function Ml(e,t,n,r){if(e){const i=Vo(e,t,n,r);return e[0](i)}}function Vo(e,t,n,r){return e[1]&&r?Sa(n.ctx.slice(),e[1](r(t))):n.ctx}function ql(e,t,n,r){if(e[2]&&r){const i=e[2](r(n));if(t.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(t.dirty.length,i.length);for(let c=0;c<s;c+=1)o[c]=t.dirty[c]|i[c];return o}return t.dirty|i}return t.dirty}function Wl(e,t,n,r,i,o){if(i){const s=Vo(t,n,r,o);e.p(s,i)}}function Vl(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function Yl(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function zl(e,t){const n={};t=new Set(t);for(const r in e)!t.has(r)&&r[0]!=="$"&&(n[r]=e[r]);return n}function Jl(e){const t={};for(const n in e)t[n]=!0;return t}function Hl(e){return e??""}function Gl(e,t,n){return e.set(n),t}function Xl(e){return e&&nn(e.destroy)?e.destroy:qe}function Ql(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Yo=typeof window<"u";let Mr=Yo?()=>window.performance.now():()=>Date.now(),$i=Yo?e=>requestAnimationFrame(e):qe;const yn=new Set;function zo(e){yn.forEach(t=>{t.c(e)||(yn.delete(t),t.f())}),yn.size!==0&&$i(zo)}function qr(e){let t;return yn.size===0&&$i(zo),{promise:new Promise(n=>{yn.add(t={c:e,f:n})}),abort(){yn.delete(t)}}}const Zl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Aa(e,t){e.appendChild(t)}function Jo(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function Oa(e){const t=Ho("style");return Ta(Jo(e),t),t.sheet}function Ta(e,t){return Aa(e.head||e,t),t.sheet}function ka(e,t,n){e.insertBefore(t,n||null)}function Li(e){e.parentNode&&e.parentNode.removeChild(e)}function ef(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function Ho(e){return document.createElement(e)}function Pa(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Go(e){return document.createTextNode(e)}function tf(){return Go(" ")}function nf(){return Go("")}function rf(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function of(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ca(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Ia=["width","height"];function sf(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const r in t)t[r]==null?e.removeAttribute(r):r==="style"?e.style.cssText=t[r]:r==="__value"?e.value=e[r]=t[r]:n[r]&&n[r].set&&Ia.indexOf(r)===-1?e[r]=t[r]:Ca(e,r,t[r])}function af(e){let t;return{p(...n){t=n,t.forEach(r=>e.push(r))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function Na(e){return Array.from(e.childNodes)}function cf(e,t){t=""+t,e.data!==t&&(e.data=t)}function uf(e,t){e.value=t??""}function lf(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function ff(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function df(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];r.selected=~t.indexOf(r.__value)}}function hf(e){const t=e.querySelector(":checked");return t&&t.__value}function pf(e){return[].map.call(e.querySelectorAll(":checked"),t=>t.__value)}function yf(e,t,n){e.classList[n?"add":"remove"](t)}function Xo(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,r,t),i}class mf{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,r=null){this.e||(this.is_svg?this.e=Pa(n.nodeName):this.e=Ho(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(r)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)ka(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(Li)}}function gf(e,t){return new e(t)}const kr=new Map;let Pr=0;function Ba(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ja(e,t){const n={stylesheet:Oa(t),rules:{}};return kr.set(e,n),n}function Mn(e,t,n,r,i,o,s,c=0){const l=16.666/r;let a=`{
`;for(let S=0;S<=1;S+=l){const E=t+(n-t)*o(S);a+=S*100+`%{${s(E,1-E)}}
`}const f=a+`100% {${s(n,1-n)}}
}`,h=`__svelte_${Ba(f)}_${c}`,m=Jo(e),{stylesheet:g,rules:w}=kr.get(m)||ja(m,e);w[h]||(w[h]=!0,g.insertRule(`@keyframes ${h} ${f}`,g.cssRules.length));const b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${h} ${r}ms linear ${i}ms 1 both`,Pr+=1,h}function qn(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(e.style.animation=r.join(", "),Pr-=i,Pr||Da())}function Da(){$i(()=>{Pr||(kr.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&Li(t)}),kr.clear())})}function vf(e,t,n,r){if(!t)return qe;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return qe;const{delay:o=0,duration:s=300,easing:c=Ur,start:l=Mr()+o,end:a=l+s,tick:f=qe,css:h}=n(e,{from:t,to:i},r);let m=!0,g=!1,w;function b(){h&&(w=Mn(e,0,1,s,o,c,h)),o||(g=!0)}function S(){h&&qn(e,w),m=!1}return qr(E=>{if(!g&&E>=l&&(g=!0),g&&E>=a&&(f(1,0),S()),!m)return!1;if(g){const A=E-l,x=0+1*c(A/s);f(x,1-x)}return!0}),b(),f(0,1),S}function bf(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:r}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=r,Ra(e,i)}}function Ra(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const r=getComputedStyle(e),i=r.transform==="none"?"":r.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Wn;function jn(e){Wn=e}function Zn(){if(!Wn)throw new Error("Function called outside component initialization");return Wn}function wf(e){Zn().$$.on_mount.push(e)}function _f(e){Zn().$$.on_destroy.push(e)}function Sf(){const e=Zn();return(t,n,{cancelable:r=!1}={})=>{const i=e.$$.callbacks[t];if(i){const o=Xo(t,n,{cancelable:r});return i.slice().forEach(s=>{s.call(e,o)}),!o.defaultPrevented}return!0}}function xf(e,t){return Zn().$$.context.set(e,t),t}function Ef(e){return Zn().$$.context.get(e)}function Af(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const fn=[],vo=[];let mn=[];const ai=[],Qo=Promise.resolve();let ci=!1;function Zo(){ci||(ci=!0,Qo.then(es))}function Of(){return Zo(),Qo}function _n(e){mn.push(e)}function Tf(e){ai.push(e)}const Gr=new Set;let an=0;function es(){if(an!==0)return;const e=Wn;do{try{for(;an<fn.length;){const t=fn[an];an++,jn(t),$a(t.$$)}}catch(t){throw fn.length=0,an=0,t}for(jn(null),fn.length=0,an=0;vo.length;)vo.pop()();for(let t=0;t<mn.length;t+=1){const n=mn[t];Gr.has(n)||(Gr.add(n),n())}mn.length=0}while(fn.length);for(;ai.length;)ai.pop()();ci=!1,Gr.clear(),jn(e)}function $a(e){if(e.fragment!==null){e.update(),Nt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(_n)}}function La(e){const t=[],n=[];mn.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),mn=t}let Tn;function Ki(){return Tn||(Tn=Promise.resolve(),Tn.then(()=>{Tn=null})),Tn}function Gt(e,t,n){e.dispatchEvent(Xo(`${t?"intro":"outro"}${n}`))}const gr=new Set;let _t;function kf(){_t={r:0,c:[],p:_t}}function Pf(){_t.r||Nt(_t.c),_t=_t.p}function ts(e,t){e&&e.i&&(gr.delete(e),e.i(t))}function Ka(e,t,n,r){if(e&&e.o){if(gr.has(e))return;gr.add(e),_t.c.push(()=>{gr.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}const Fi={duration:0};function Cf(e,t,n){const r={direction:"in"};let i=t(e,n,r),o=!1,s,c,l=0;function a(){s&&qn(e,s)}function f(){const{delay:m=0,duration:g=300,easing:w=Ur,tick:b=qe,css:S}=i||Fi;S&&(s=Mn(e,0,1,g,m,w,S,l++)),b(0,1);const E=Mr()+m,A=E+g;c&&c.abort(),o=!0,_n(()=>Gt(e,!0,"start")),c=qr(x=>{if(o){if(x>=A)return b(1,0),Gt(e,!0,"end"),a(),o=!1;if(x>=E){const B=w((x-E)/g);b(B,1-B)}}return o})}let h=!1;return{start(){h||(h=!0,qn(e),nn(i)?(i=i(r),Ki().then(f)):f())},invalidate(){h=!1},end(){o&&(a(),o=!1)}}}function If(e,t,n){const r={direction:"out"};let i=t(e,n,r),o=!0,s;const c=_t;c.r+=1;function l(){const{delay:a=0,duration:f=300,easing:h=Ur,tick:m=qe,css:g}=i||Fi;g&&(s=Mn(e,1,0,f,a,h,g));const w=Mr()+a,b=w+f;_n(()=>Gt(e,!1,"start")),qr(S=>{if(o){if(S>=b)return m(0,1),Gt(e,!1,"end"),--c.r||Nt(c.c),!1;if(S>=w){const E=h((S-w)/f);m(1-E,E)}}return o})}return nn(i)?Ki().then(()=>{i=i(r),l()}):l(),{end(a){a&&i.tick&&i.tick(1,0),o&&(s&&qn(e,s),o=!1)}}}function Nf(e,t,n,r){const i={direction:"both"};let o=t(e,n,i),s=r?0:1,c=null,l=null,a=null;function f(){a&&qn(e,a)}function h(g,w){const b=g.b-s;return w*=Math.abs(b),{a:s,b:g.b,d:b,duration:w,start:g.start,end:g.start+w,group:g.group}}function m(g){const{delay:w=0,duration:b=300,easing:S=Ur,tick:E=qe,css:A}=o||Fi,x={start:Mr()+w,b:g};g||(x.group=_t,_t.r+=1),c||l?l=x:(A&&(f(),a=Mn(e,s,g,b,w,S,A)),g&&E(0,1),c=h(x,b),_n(()=>Gt(e,g,"start")),qr(B=>{if(l&&B>l.start&&(c=h(l,b),l=null,Gt(e,c.b,"start"),A&&(f(),a=Mn(e,s,c.b,c.duration,0,S,o.css))),c){if(B>=c.end)E(s=c.b,1-s),Gt(e,c.b,"end"),l||(c.b?f():--c.group.r||Nt(c.group.c)),c=null;else if(B>=c.start){const P=B-c.start;s=c.a+c.d*S(P/c.duration),E(s,1-s)}}return!!(c||l)}))}return{run(g){nn(o)?Ki().then(()=>{o=o(i),m(g)}):m(g)},end(){f(),c=l=null}}}function Fa(e,t){e.d(1),t.delete(e.key)}function Ua(e,t){Ka(e,1,1,()=>{t.delete(e.key)})}function Bf(e,t){e.f(),Fa(e,t)}function jf(e,t){e.f(),Ua(e,t)}function Df(e,t,n,r,i,o,s,c,l,a,f,h){let m=e.length,g=o.length,w=m;const b={};for(;w--;)b[e[w].key]=w;const S=[],E=new Map,A=new Map,x=[];for(w=g;w--;){const C=h(i,o,w),$=n(C);let v=s.get($);v?r&&x.push(()=>v.p(C,t)):(v=a($,C),v.c()),E.set($,S[w]=v),$ in b&&A.set($,Math.abs(w-b[$]))}const B=new Set,P=new Set;function N(C){ts(C,1),C.m(c,f),s.set(C.key,C),f=C.first,g--}for(;m&&g;){const C=S[g-1],$=e[m-1],v=C.key,d=$.key;C===$?(f=C.first,m--,g--):E.has(d)?!s.has(v)||B.has(v)?N(C):P.has(d)?m--:A.get(v)>A.get(d)?(P.add(v),N(C)):(B.add(d),m--):(l($,s),m--)}for(;m--;){const C=e[m];E.has(C.key)||l(C,s)}for(;g;)N(S[g-1]);return Nt(x),S}function Rf(e,t){const n={},r={},i={$$scope:1};let o=e.length;for(;o--;){const s=e[o],c=t[o];if(c){for(const l in s)l in c||(r[l]=1);for(const l in c)i[l]||(n[l]=c[l],i[l]=1);e[o]=c}else for(const l in s)i[l]=1}for(const s in r)s in n||(n[s]=void 0);return n}function $f(e){return typeof e=="object"&&e!==null?e:{}}function Lf(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Kf(e){e&&e.c()}function Ma(e,t,n,r){const{fragment:i,after_update:o}=e.$$;i&&i.m(t,n),r||_n(()=>{const s=e.$$.on_mount.map(qo).filter(nn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Nt(s),e.$$.on_mount=[]}),o.forEach(_n)}function qa(e,t){const n=e.$$;n.fragment!==null&&(La(n.after_update),Nt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Wa(e,t){e.$$.dirty[0]===-1&&(fn.push(e),Zo(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ff(e,t,n,r,i,o,s,c=[-1]){const l=Wn;jn(e);const a=e.$$={fragment:null,ctx:[],props:o,update:qe,not_equal:i,bound:go(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:go(),dirty:c,skip_bound:!1,root:t.target||l.$$.root};s&&s(a.root);let f=!1;if(a.ctx=n?n(e,t.props||{},(h,m,...g)=>{const w=g.length?g[0]:m;return a.ctx&&i(a.ctx[h],a.ctx[h]=w)&&(!a.skip_bound&&a.bound[h]&&a.bound[h](w),f&&Wa(e,h)),m}):[],a.update(),f=!0,Nt(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const h=Na(t.target);a.fragment&&a.fragment.l(h),h.forEach(Li)}else a.fragment&&a.fragment.c();t.intro&&ts(e.$$.fragment),Ma(e,t.target,t.anchor,t.customElement),es()}jn(l)}class Uf{$destroy(){qa(this,1),this.$destroy=qe}$on(t,n){if(!nn(n))return qe;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!Ea(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const cn=[];function Va(e,t){return{subscribe:xn(e,t).subscribe}}function xn(e,t=qe){let n;const r=new Set;function i(c){if(xa(e,c)&&(e=c,n)){const l=!cn.length;for(const a of r)a[1](),cn.push(a,e);if(l){for(let a=0;a<cn.length;a+=2)cn[a][0](cn[a+1]);cn.length=0}}}function o(c){i(c(e))}function s(c,l=qe){const a=[c,l];return r.add(a),r.size===1&&(n=t(i)||qe),c(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}function Mf(e,t,n){const r=!Array.isArray(e),i=r?[e]:e,o=t.length<2;return Va(n,s=>{let c=!1;const l=[];let a=0,f=qe;const h=()=>{if(a)return;f();const g=t(r?l[0]:l,s);o?s(g):f=nn(g)?g:qe},m=i.map((g,w)=>Ri(g,b=>{l[w]=b,a&=~(1<<w),c&&h()},()=>{a|=1<<w}));return c=!0,h(),function(){Nt(m),f(),c=!1}})}const ns=xn(void 0);function qf(e,t){const{computePosition:n,autoUpdate:r,offset:i,shift:o,flip:s,arrow:c,size:l,autoPlacement:a,hide:f,inline:h}=Wo(ns),m={open:!1,autoUpdateCleanup:()=>{}},g=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let w;const b="https://www.skeleton.dev/utilities/popups";let S,E;function A(){S=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),E=S.querySelector(".arrow")??document.createElement("div")}A();function x(){var d,k,T,Y,q,oe,re,ie;if(!S)throw new Error(`The data-popup="${t.target}" element was not found. ${b}`);if(!n)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${b}`);if(!i)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${b}`);if(!o)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${b}`);if(!s)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${b}`);if(!c)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${b}`);const v=[];l&&v.push(l((d=t.middleware)==null?void 0:d.size)),a&&v.push(a((k=t.middleware)==null?void 0:k.autoPlacement)),f&&v.push(f((T=t.middleware)==null?void 0:T.hide)),h&&v.push(h((Y=t.middleware)==null?void 0:Y.inline)),n(e,S,{placement:t.placement??"bottom",middleware:[i(((q=t.middleware)==null?void 0:q.offset)??8),o(((oe=t.middleware)==null?void 0:oe.shift)??{padding:8}),s((re=t.middleware)==null?void 0:re.flip),c(((ie=t.middleware)==null?void 0:ie.arrow)??{element:E||null}),...v]}).then(({x:se,y:ke,placement:Pe,middlewareData:Re})=>{if(Object.assign(S.style,{left:`${se}px`,top:`${ke}px`}),E){const{x:Ke,y:Ze}=Re.arrow,H={top:"bottom",right:"left",bottom:"top",left:"right"}[Pe.split("-")[0]];Object.assign(E.style,{left:Ke!=null?`${Ke}px`:"",top:Ze!=null?`${Ze}px`:"",right:"",bottom:"",[H]:"-4px"})}})}function B(){S&&(m.open=!0,t.state&&t.state({state:m.open}),x(),S.style.display="block",S.style.opacity="1",S.style.pointerEvents="auto",S.removeAttribute("inert"),m.autoUpdateCleanup=r(e,S,x),w=Array.from(S==null?void 0:S.querySelectorAll(g)))}function P(v){if(!S)return;const d=parseFloat(window.getComputedStyle(S).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{m.open=!1,t.state&&t.state({state:m.open}),S.style.opacity="0",S.setAttribute("inert",""),m.autoUpdateCleanup&&m.autoUpdateCleanup(),v&&v()},d)}function N(){m.open===!1?B():P()}function C(v){if(m.open===!1||e.contains(v.target))return;if(S&&S.contains(v.target)===!1){P();return}const d=t.closeQuery===void 0?"a[href], button":t.closeQuery,k=S==null?void 0:S.querySelectorAll(d);k==null||k.forEach(T=>{T.contains(v.target)&&P()})}const $=v=>{if(m.open===!1)return;const d=v.key;if(d==="Escape"){v.preventDefault(),e.focus(),P();return}w=Array.from(S==null?void 0:S.querySelectorAll(g)),m.open&&document.activeElement===e&&(d==="ArrowDown"||d==="Tab")&&g.length>0&&w.length>0&&(v.preventDefault(),w[0].focus())};switch(t.event){case"click":e.addEventListener("click",N,!0),window.addEventListener("click",C,!0);break;case"hover":e.addEventListener("mouseover",B,!0),e.addEventListener("mouseleave",()=>P(),!0);break;case"focus-blur":e.addEventListener("focus",N,!0),e.addEventListener("blur",()=>P(),!0);break;case"focus-click":e.addEventListener("focus",B,!0),window.addEventListener("click",C,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${b}`)}return window.addEventListener("keydown",$,!0),x(),{update(v){P(()=>{t=v,x(),A()})},destroy(){e.removeEventListener("click",N,!0),e.removeEventListener("mouseover",B,!0),e.removeEventListener("mouseleave",()=>P(),!0),e.removeEventListener("focus",N,!0),e.removeEventListener("focus",B,!0),e.removeEventListener("blur",()=>P(),!0),window.removeEventListener("click",C,!0),window.removeEventListener("keydown",$,!0)}}}const Ya={message:"Missing Toast Message",autohide:!0,timeout:5e3};function za(){const e=Math.random();return Number(e).toString(32)}function bo(e){if(e.autohide===!0)return setTimeout(()=>{Ui.close(e.id)},e.timeout)}function Ja(){const{subscribe:e,set:t,update:n}=xn([]);return{subscribe:e,trigger:r=>{const i=za();return n(o=>{r&&r.callback&&r.callback({id:i,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const s={...Ya,...r,id:i};return s.timeoutId=bo(s),o.push(s),o}),i},close:r=>n(i=>{if(i.length>0){const o=i.findIndex(c=>c.id===r),s=i[o];s&&(s.callback&&s.callback({id:r,status:"closed"}),s.timeoutId&&clearTimeout(s.timeoutId),i.splice(o,1))}return i}),freeze:r=>n(i=>(i.length>0&&clearTimeout(i[r].timeoutId),i)),unfreeze:r=>n(i=>(i.length>0&&(i[r].timeoutId=bo(i[r])),i)),clear:()=>t([])}}const Ui=Ja(),Xr={};function wo(e){return e==="local"?localStorage:sessionStorage}function Mi(e,t,n){const r=(n==null?void 0:n.serializer)??JSON,i=(n==null?void 0:n.storage)??"local";function o(s,c){wo(i).setItem(s,r.stringify(c))}if(!Xr[e]){const s=xn(t,a=>{const f=wo(i).getItem(e);f&&a(r.parse(f));{const h=m=>{m.key===e&&a(m.newValue?r.parse(m.newValue):null)};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)}}),{subscribe:c,set:l}=s;Xr[e]={set(a){o(e,a),l(a)},update(a){const f=a(Wo(s));o(e,f),l(f)},subscribe:c}}return Xr[e]}Mi("modeOsPrefers",!1);Mi("modeUserPrefers",void 0);Mi("modeCurrent",!1);const Oe=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,De=Object.keys,Ve=Array.isArray;function He(e,t){return typeof t!="object"||De(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||Oe.Promise||(Oe.Promise=Promise);const Vn=Object.getPrototypeOf,Ha={}.hasOwnProperty;function at(e,t){return Ha.call(e,t)}function Sn(e,t){typeof t=="function"&&(t=t(Vn(e))),(typeof Reflect>"u"?De:Reflect.ownKeys)(t).forEach(n=>{Pt(e,n,t[n])})}const rs=Object.defineProperty;function Pt(e,t,n,r){rs(e,t,He(n&&at(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function gn(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Pt(e.prototype,"constructor",e),{extend:Sn.bind(null,e.prototype)}}}}const Ga=Object.getOwnPropertyDescriptor;function qi(e,t){let n;return Ga(e,t)||(n=Vn(e))&&qi(n,t)}const Xa=[].slice;function Cr(e,t,n){return Xa.call(e,t,n)}function is(e,t){return t(e)}function Pn(e){if(!e)throw new Error("Assertion Failed")}function os(e){Oe.setImmediate?setImmediate(e):setTimeout(e,0)}function ss(e,t){return e.reduce((n,r,i)=>{var o=t(r,i);return o&&(n[o[0]]=o[1]),n},{})}function Ct(e,t){if(at(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var o=Ct(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(s!==-1){var c=e[t.substr(0,s)];return c===void 0?void 0:Ct(c,t.substr(s+1))}}function vt(e,t,n){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Pn(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)vt(e,t[r],n[r])}else{var o=t.indexOf(".");if(o!==-1){var s=t.substr(0,o),c=t.substr(o+1);if(c==="")n===void 0?Ve(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var l=e[s];l&&at(e,s)||(l=e[s]={}),vt(l,c,n)}}else n===void 0?Ve(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function as(e){var t={};for(var n in e)at(e,n)&&(t[n]=e[n]);return t}const Qa=[].concat;function cs(e){return Qa.apply([],e)}const us="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(cs([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>Oe[e]),Za=us.map(e=>Oe[e]);ss(us,e=>[e,!0]);let $t=null;function er(e){$t=typeof WeakMap<"u"&&new WeakMap;const t=ui(e);return $t=null,t}function ui(e){if(!e||typeof e!="object")return e;let t=$t&&$t.get(e);if(t)return t;if(Ve(e)){t=[],$t&&$t.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(ui(e[n]))}else if(Za.indexOf(e.constructor)>=0)t=e;else{const o=Vn(e);for(var i in t=o===Object.prototype?{}:Object.create(o),$t&&$t.set(e,t),e)at(e,i)&&(t[i]=ui(e[i]))}return t}const{toString:ec}={};function li(e){return ec.call(e).slice(8,-1)}const fi=typeof Symbol<"u"?Symbol.iterator:"@@iterator",tc=typeof fi=="symbol"?function(e){var t;return e!=null&&(t=e[fi])&&t.apply(e)}:function(){return null},dn={};function Tt(e){var t,n,r,i;if(arguments.length===1){if(Ve(e))return e.slice();if(this===dn&&typeof e=="string")return[e];if(i=tc(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const Wi=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var St=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ls(e,t){St=e,fs=t}var fs=()=>!0;const nc=!new Error("").stack;function rn(){if(nc)try{throw rn.arguments,new Error}catch(e){return e}return new Error}function di(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(fs).map(r=>`
`+r).join("")):""}var ds=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Vi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ds),rc={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vn(e,t){this._e=rn(),this.name=e,this.message=t}function hs(e,t){return e+". Errors: "+Object.keys(t).map(n=>t[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function Ir(e,t,n,r){this._e=rn(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=hs(e,t)}function Dn(e,t){this._e=rn(),this.name="BulkError",this.failures=Object.keys(t).map(n=>t[n]),this.failuresByPos=t,this.message=hs(e,t)}gn(vn).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+di(this._e,2))}},toString:function(){return this.name+": "+this.message}}),gn(Ir).from(vn),gn(Dn).from(vn);var Yi=Vi.reduce((e,t)=>(e[t]=t+"Error",e),{});const ic=vn;var ne=Vi.reduce((e,t)=>{var n=t+"Error";function r(i,o){this._e=rn(),this.name=n,i?typeof i=="string"?(this.message=`${i}${o?`
 `+o:""}`,this.inner=o||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=rc[t]||n,this.inner=null)}return gn(r).from(ic),e[t]=r,e},{});ne.Syntax=SyntaxError,ne.Type=TypeError,ne.Range=RangeError;var _o=ds.reduce((e,t)=>(e[t+"Error"]=ne[t],e),{}),vr=Vi.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=ne[t]),e),{});function Se(){}function Yn(e){return e}function oc(e,t){return e==null||e===Yn?t:function(n){return t(e(n))}}function en(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function sc(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?en(r,this.onsuccess):r),i&&(this.onerror=this.onerror?en(i,this.onerror):i),o!==void 0?o:n}}function ac(e,t){return e===Se?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?en(n,this.onsuccess):n),r&&(this.onerror=this.onerror?en(r,this.onerror):r)}}function cc(e,t){return e===Se?t:function(n){var r=e.apply(this,arguments);He(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?en(i,this.onsuccess):i),o&&(this.onerror=this.onerror?en(o,this.onerror):o),r===void 0?s===void 0?void 0:s:He(r,s)}}function uc(e,t){return e===Se?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function zi(e,t){return e===Se?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}vr.ModifyError=Ir,vr.DexieError=vn,vr.BulkError=Dn;var zn={};const[hi,Nr,pi]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,Vn(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,Vn(t),e]})(),ps=Nr&&Nr.then,br=hi&&hi.constructor,Ji=!!pi;var yi=!1,lc=pi?()=>{pi.then(ur)}:Oe.setImmediate?setImmediate.bind(null,ur):Oe.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{ur(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(ur,0)},Rn=function(e,t){Cn.push([e,t]),Br&&(lc(),Br=!1)},mi=!0,Br=!0,Xt=[],wr=[],gi=null,vi=Yn,bn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xo,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{xo(e[0],e[1])}catch{}})}},Q=bn,Cn=[],Qt=0,_r=[];function W(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Se,this._lib=!1;var t=this._PSD=Q;if(St&&(this._stackHolder=rn(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==zn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&wi(this,this._value))}this._state=null,this._value=null,++t.ref,ms(this,e)}const bi={get:function(){var e=Q,t=jr;function n(r,i){var o=!e.global&&(e!==Q||t!==jr);const s=o&&!It();var c=new W((l,a)=>{Hi(this,new ys(Dr(r,e,o,s),Dr(i,e,o,s),l,a,e))});return St&&bs(c,this),c}return n.prototype=zn,n},set:function(e){Pt(this,"then",e&&e.prototype===zn?bi:{get:function(){return e},set:bi.set})}};function ys(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}function ms(e,t){try{t(n=>{if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&tr();n&&typeof n.then=="function"?ms(e,(i,o)=>{n instanceof W?n._then(i,o):n.then(i,o)}):(e._state=!0,e._value=n,gs(e)),r&&nr()}},wi.bind(null,e))}catch(n){wi(e,n)}}function wi(e,t){if(wr.push(t),e._state===null){var n=e._lib&&tr();t=vi(t),e._state=!1,e._value=t,St&&t!==null&&typeof t=="object"&&!t._promise&&function(r,i,o){try{r.apply(null,o)}catch(s){i&&i(s)}}(()=>{var r=qi(t,"stack");t._promise=e,Pt(t,"stack",{get:()=>yi?r&&(r.get?r.get.apply(t):r.value):e.stack})}),function(r){Xt.some(i=>i._value===r._value)||Xt.push(r)}(e),gs(e),n&&nr()}}function gs(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Hi(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),Qt===0&&(++Qt,Rn(()=>{--Qt==0&&Gi()},[]))}function Hi(e,t){if(e._state!==null){var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Qt,Rn(fc,[n,e,t])}else e._listeners.push(t)}function fc(e,t,n){try{gi=t;var r,i=t._value;t._state?r=e(i):(wr.length&&(wr=[]),r=e(i),wr.indexOf(i)===-1&&function(o){for(var s=Xt.length;s;)if(Xt[--s]._value===o._value)return void Xt.splice(s,1)}(t)),n.resolve(r)}catch(o){n.reject(o)}finally{gi=null,--Qt==0&&Gi(),--n.psd.ref||n.psd.finalize()}}function vs(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var i,o,s=e._value;s!=null?(i=s.name||"Error",o=s.message||s,r=di(s,0)):(i=s,o=""),t.push(i+(o?": "+o:"")+r)}return St&&((r=di(e._stackHolder,2))&&t.indexOf(r)===-1&&t.push(r),e._prev&&vs(e._prev,t,n)),t}function bs(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function ur(){tr()&&nr()}function tr(){var e=mi;return mi=!1,Br=!1,e}function nr(){var e,t,n;do for(;Cn.length>0;)for(e=Cn,Cn=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Cn.length>0);mi=!0,Br=!0}function Gi(){var e=Xt;Xt=[],e.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var t=_r.slice(0),n=t.length;n;)t[--n]()}function lr(e){return new W(zn,!1,e)}function Te(e,t){var n=Q;return function(){var r=tr(),i=Q;try{return Ut(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ut(i,!1),r&&nr()}}}Sn(W.prototype,{then:bi,_then:function(e,t){Hi(this,new ys(null,null,e,t,Q))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,r=>r instanceof t?n(r):lr(r)):this.then(null,r=>r&&r.name===t?n(r):lr(r))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),lr(t)))},stack:{get:function(){if(this._stack)return this._stack;try{yi=!0;var e=vs(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{yi=!1}}},timeout:function(e,t){return e<1/0?new W((n,r)=>{var i=setTimeout(()=>r(new ne.Timeout(t)),e);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pt(W.prototype,Symbol.toStringTag,"Dexie.Promise"),bn.env=ws(),Sn(W,{all:function(){var e=Tt.apply(null,arguments).map(fr);return new W(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach((i,o)=>W.resolve(i).then(s=>{e[o]=s,--r||t(e)},n))})},resolve:e=>{if(e instanceof W)return e;if(e&&typeof e.then=="function")return new W((n,r)=>{e.then(n,r)});var t=new W(zn,!0,e);return bs(t,gi),t},reject:lr,race:function(){var e=Tt.apply(null,arguments).map(fr);return new W((t,n)=>{e.map(r=>W.resolve(r).then(t,n))})},PSD:{get:()=>Q,set:e=>Q=e},totalEchoes:{get:()=>jr},newPSD:Ft,usePSD:An,scheduler:{get:()=>Rn,set:e=>{Rn=e}},rejectionMapper:{get:()=>vi,set:e=>{vi=e}},follow:(e,t)=>new W((n,r)=>Ft((i,o)=>{var s=Q;s.unhandleds=[],s.onunhandled=o,s.finalize=en(function(){(function(c){function l(){c(),_r.splice(_r.indexOf(l),1)}_r.push(l),++Qt,Rn(()=>{--Qt==0&&Gi()},[])})(()=>{this.unhandleds.length===0?i():o(this.unhandleds[0])})},s.finalize),e()},t,n,r))}),br&&(br.allSettled&&Pt(W,"allSettled",function(){const e=Tt.apply(null,arguments).map(fr);return new W(t=>{e.length===0&&t([]);let n=e.length;const r=new Array(n);e.forEach((i,o)=>W.resolve(i).then(s=>r[o]={status:"fulfilled",value:s},s=>r[o]={status:"rejected",reason:s}).then(()=>--n||t(r)))})}),br.any&&typeof AggregateError<"u"&&Pt(W,"any",function(){const e=Tt.apply(null,arguments).map(fr);return new W((t,n)=>{e.length===0&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach((o,s)=>W.resolve(o).then(c=>t(c),c=>{i[s]=c,--r||n(new AggregateError(i))}))})}));const We={awaits:0,echoes:0,id:0};var dc=0,Sr=[],Qr=0,jr=0,hc=0;function Ft(e,t,n,r){var i=Q,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++hc;var s=bn.env;o.env=Ji?{Promise:W,PromiseProp:{value:W,configurable:!0,writable:!0},all:W.all,race:W.race,allSettled:W.allSettled,any:W.any,resolve:W.resolve,reject:W.reject,nthen:So(s.nthen,o),gthen:So(s.gthen,o)}:{},t&&He(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=An(o,e,n,r);return o.ref===0&&o.finalize(),c}function En(){return We.id||(We.id=++dc),++We.awaits,We.echoes+=100,We.id}function It(){return!!We.awaits&&(--We.awaits==0&&(We.id=0),We.echoes=100*We.awaits,!0)}function fr(e){return We.echoes&&e&&e.constructor===br?(En(),e.then(t=>(It(),t),t=>(It(),$e(t)))):e}function pc(e){++jr,We.echoes&&--We.echoes!=0||(We.echoes=We.id=0),Sr.push(Q),Ut(e,!0)}function yc(){var e=Sr[Sr.length-1];Sr.pop(),Ut(e,!1)}function Ut(e,t){var n=Q;if((t?!We.echoes||Qr++&&e===Q:!Qr||--Qr&&e===Q)||_s(t?pc.bind(null,e):yc),e!==Q&&(Q=e,n===bn&&(bn.env=ws()),Ji)){var r=bn.env.Promise,i=e.env;Nr.then=i.nthen,r.prototype.then=i.gthen,(n.global||e.global)&&(Object.defineProperty(Oe,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function ws(){var e=Oe.Promise;return Ji?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Oe,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Nr.then,gthen:e.prototype.then}:{}}function An(e,t,n,r,i){var o=Q;try{return Ut(e,!0),t(n,r,i)}finally{Ut(o,!1)}}function _s(e){ps.call(hi,e)}function Dr(e,t,n,r){return typeof e!="function"?e:function(){var i=Q;n&&En(),Ut(t,!0);try{return e.apply(this,arguments)}finally{Ut(i,!1),r&&_s(It)}}}function So(e,t){return function(n,r){return e.call(this,Dr(n,t),Dr(r,t))}}(""+ps).indexOf("[native code]")===-1&&(En=It=Se);function xo(e,t){var n;try{n=t.onuncatched(e)}catch{}if(n!==!1)try{var r,i={promise:t,reason:e};if(Oe.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),He(r,i)):Oe.CustomEvent&&He(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&Oe.dispatchEvent&&(dispatchEvent(r),!Oe.PromiseRejectionEvent&&Oe.onunhandledrejection))try{Oe.onunhandledrejection(r)}catch{}St&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var $e=W.reject;function _i(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Q.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Yi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>_i(e,t,n,r))):$e(o)}return i._promise(t,(o,s)=>Ft(()=>(Q.trans=i,r(o,s,i)))).then(o=>i._completion.then(()=>o))}if(e._state.openComplete)return $e(new ne.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return $e(new ne.DatabaseClosed);e.open().catch(Se)}return e._state.dbReadyPromise.then(()=>_i(e,t,n,r))}const Jt=String.fromCharCode(65535),At="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",$n=[],Wr=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),mc=Wr,gc=Wr,Ss=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function tn(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const xs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function dr(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=er(t))[e],t)}class vc{_trans(t,n,r){const i=this._tx||Q.trans,o=this.name;function s(l,a,f){if(!f.schema[o])throw new ne.NotFound("Table "+o+" not part of transaction");return n(f.idbtrans,f)}const c=tr();try{return i&&i.db===this.db?i===Q.trans?i._promise(t,s,r):Ft(()=>i._promise(t,s,r),{trans:i,transless:Q.transless||Q}):_i(this.db,t,[this.name],s)}finally{c&&nr()}}get(t,n){return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:t}).then(i=>this.hook.reading.fire(i))).then(n)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ve(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const n=De(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(a=>a.compound&&n.every(f=>a.keyPath.indexOf(f)>=0)&&a.keyPath.every(f=>n.indexOf(f)>=0))[0];if(r&&this.db._maxKey!==Jt)return this.where(r.name).equals(r.keyPath.map(a=>t[a]));!r&&St&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,o=this.db._deps.indexedDB;function s(a,f){try{return o.cmp(a,f)===0}catch{return!1}}const[c,l]=n.reduce(([a,f],h)=>{const m=i[h],g=t[h];return[a||m,a||!m?tn(f,m&&m.multi?w=>{const b=Ct(w,h);return Ve(b)&&b.some(S=>s(g,S))}:w=>s(g,Ct(w,h))):f]},[null,null]);return c?this.where(c.name).equals(t[c.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ve(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const n=r=>{if(!r)return r;const i=Object.create(t.prototype);for(var o in r)if(at(r,o))try{i[o]=r[o]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t}defineClass(){return this.mapToClass(function(t){He(this,t)})}add(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=dr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[o]})).then(s=>s.numFailures?W.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}update(t,n){if(typeof t!="object"||Ve(t))return this.where(":id").equals(t).modify(n);{const r=Ct(t,this.schema.primKey.keyPath);if(r===void 0)return $e(new ne.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?De(n).forEach(i=>{vt(t,i,n[i])}):n(t,{value:t,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(t,n){const{auto:r,keyPath:i}=this.schema.primKey;let o=t;return i&&r&&(o=dr(i)(t)),this._trans("readwrite",s=>this.core.mutate({trans:s,type:"put",values:[o],keys:n!=null?[n]:null})).then(s=>s.numFailures?W.reject(s.failures[0]):s.lastResult).then(s=>{if(i)try{vt(t,i,s)}catch{}return s})}delete(t){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[t]})).then(n=>n.numFailures?W.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:xs})).then(t=>t.numFailures?W.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",n=>this.core.getMany({keys:t,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(dr(l)):t;return this.core.mutate({trans:s,type:"add",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new Dn(`${this.name}.bulkAdd(): ${h} of ${a} operations failed`,w)})})}bulkPut(t,n,r){const i=Array.isArray(n)?n:void 0,o=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",s=>{const{auto:c,keyPath:l}=this.schema.primKey;if(l&&i)throw new ne.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new ne.InvalidArgument("Arguments objects and keys must have the same length");const a=t.length;let f=l&&c?t.map(dr(l)):t;return this.core.mutate({trans:s,type:"put",keys:i,values:f,wantResults:o}).then(({numFailures:h,results:m,lastResult:g,failures:w})=>{if(h===0)return o?m:g;throw new Dn(`${this.name}.bulkPut(): ${h} of ${a} operations failed`,w)})})}bulkDelete(t){const n=t.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:t})).then(({numFailures:r,lastResult:i,failures:o})=>{if(r===0)return i;throw new Dn(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,o)})}}function Ln(e){var t={},n=function(c,l){if(l){for(var a=arguments.length,f=new Array(a-1);--a;)f[a-1]=arguments[a];return t[c].subscribe.apply(null,f),e}if(typeof c=="string")return t[c]};n.addEventType=o;for(var r=1,i=arguments.length;r<i;++r)o(arguments[r]);return n;function o(c,l,a){if(typeof c=="object")return s(c);l||(l=uc),a||(a=Se);var f={subscribers:[],fire:a,subscribe:function(h){f.subscribers.indexOf(h)===-1&&(f.subscribers.push(h),f.fire=l(f.fire,h))},unsubscribe:function(h){f.subscribers=f.subscribers.filter(function(m){return m!==h}),f.fire=f.subscribers.reduce(l,a)}};return t[c]=n[c]=f,f}function s(c){De(c).forEach(function(l){var a=c[l];if(Ve(a))o(l,c[l][0],c[l][1]);else{if(a!=="asap")throw new ne.InvalidArgument("Invalid event config");var f=o(l,Yn,function(){for(var h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];f.subscribers.forEach(function(g){os(function(){g.apply(null,m)})})})}})}}function kn(e,t){return gn(t).from({prototype:e}),t}function un(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Zr(e,t){e.filter=tn(e.filter,t)}function ei(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>tn(r(),t()):t,e.justLimit=n&&!r}function xr(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ne.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Eo(e,t,n){const r=xr(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function hr(e,t,n,r){const i=e.replayFilter?tn(e.filter,e.replayFilter()):e.filter;if(e.or){const o={},s=(c,l,a)=>{if(!i||i(l,a,m=>l.stop(m),m=>l.fail(m))){var f=l.primaryKey,h=""+f;h==="[object ArrayBuffer]"&&(h=""+new Uint8Array(f)),at(o,h)||(o[h]=!0,t(c,l,a))}};return Promise.all([e.or._iterate(s,n),Ao(Eo(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Ao(Eo(e,r,n),tn(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Ao(e,t,n,r){var i=Te(r?(o,s,c)=>n(r(o),s,c):n);return e.then(o=>{if(o)return o.start(()=>{var s=()=>o.continue();t&&!t(o,c=>s=c,c=>{o.stop(c),s=Se},c=>{o.fail(c),s=Se})||i(o.value,o,c=>s=c),s()})})}function Je(e,t){try{const n=Oo(e),r=Oo(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a)if(i[a]!==o[a])return i[a]<o[a]?-1:1;return s===c?0:s<c?-1:1}(To(e),To(t));case"Array":return function(i,o){const s=i.length,c=o.length,l=s<c?s:c;for(let a=0;a<l;++a){const f=Je(i[a],o[a]);if(f!==0)return f}return s===c?0:s<c?-1:1}(e,t)}}catch{}return NaN}function Oo(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const n=li(e);return n==="ArrayBuffer"?"binary":n}function To(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class bc{_read(t,n){var r=this._ctx;return r.error?r.table._trans(null,$e.bind(null,r.error)):r.table._trans("readonly",t).then(n)}_write(t){var n=this._ctx;return n.error?n.table._trans(null,$e.bind(null,n.error)):n.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var n=this._ctx;n.algorithm=tn(n.algorithm,t)}_iterate(t,n){return hr(this._ctx,t,n,this._ctx.table.core)}clone(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&He(r,t),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(t){var n=this._ctx;return this._read(r=>hr(n,t,r,n.table.core))}count(t){return this._read(n=>{const r=this._ctx,i=r.table.core;if(un(r,!0))return i.count({trans:n,query:{index:xr(r,i.schema),range:r.range}}).then(s=>Math.min(s,r.limit));var o=0;return hr(r,()=>(++o,!1),n,i).then(()=>o)}).then(t)}sortBy(t,n){const r=t.split(".").reverse(),i=r[0],o=r.length-1;function s(a,f){return f?s(a[r[f]],f-1):a[i]}var c=this._ctx.dir==="next"?1:-1;function l(a,f){var h=s(a,o),m=s(f,o);return h<m?-c:h>m?c:0}return this.toArray(function(a){return a.sort(l)}).then(n)}toArray(t){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&un(r,!0)&&r.limit>0){const{valueMapper:i}=r,o=xr(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:o,range:r.range}}).then(({result:s})=>i?s.map(i):s)}{const i=[];return hr(r,o=>i.push(o),n,r.table.core).then(()=>i)}},t)}offset(t){var n=this._ctx;return t<=0||(n.offset+=t,un(n)?ei(n,()=>{var r=t;return(i,o)=>r===0||(r===1?(--r,!1):(o(()=>{i.advance(r),r=0}),!1))}):ei(n,()=>{var r=t;return()=>--r<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),ei(this._ctx,()=>{var n=t;return function(r,i,o){return--n<=0&&i(o),n>=0}},!0),this}until(t,n){return Zr(this._ctx,function(r,i,o){return!t(r.value)||(i(o),n)}),this}first(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var n,r;return Zr(this._ctx,function(i){return t(i.value)}),n=this._ctx,r=t,n.isMatch=tn(n.isMatch,r),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})}keys(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.key)}).then(function(){return r}).then(t)}primaryKeys(t){var n=this._ctx;if(n.dir==="next"&&un(n,!0)&&n.limit>0)return this._read(i=>{var o=xr(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:o,range:n.range}})}).then(({result:i})=>i).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,o){r.push(o.primaryKey)}).then(function(){return r}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(n){return n[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Zr(this._ctx,function(i){var o=i.primaryKey.toString(),s=at(r,o);return r[o]=!0,!s}),this}modify(t){var n=this._ctx;return this._write(r=>{var i;if(typeof t=="function")i=t;else{var o=De(t),s=o.length;i=function(b){for(var S=!1,E=0;E<s;++E){var A=o[E],x=t[A];Ct(b,A)!==x&&(vt(b,A,x),S=!0)}return S}}const c=n.table.core,{outbound:l,extractKey:a}=c.schema.primaryKey,f=this.db._options.modifyChunkSize||200,h=[];let m=0;const g=[],w=(b,S)=>{const{failures:E,numFailures:A}=S;m+=b-A;for(let x of De(E))h.push(E[x])};return this.clone().primaryKeys().then(b=>{const S=E=>{const A=Math.min(f,b.length-E);return c.getMany({trans:r,keys:b.slice(E,E+A),cache:"immutable"}).then(x=>{const B=[],P=[],N=l?[]:null,C=[];for(let v=0;v<A;++v){const d=x[v],k={value:er(d),primKey:b[E+v]};i.call(k,k.value,k)!==!1&&(k.value==null?C.push(b[E+v]):l||Je(a(d),a(k.value))===0?(P.push(k.value),l&&N.push(b[E+v])):(C.push(b[E+v]),B.push(k.value)))}const $=un(n)&&n.limit===1/0&&(typeof t!="function"||t===ti)&&{index:n.index,range:n.range};return Promise.resolve(B.length>0&&c.mutate({trans:r,type:"add",values:B}).then(v=>{for(let d in v.failures)C.splice(parseInt(d),1);w(B.length,v)})).then(()=>(P.length>0||$&&typeof t=="object")&&c.mutate({trans:r,type:"put",keys:N,values:P,criteria:$,changeSpec:typeof t!="function"&&t}).then(v=>w(P.length,v))).then(()=>(C.length>0||$&&t===ti)&&c.mutate({trans:r,type:"delete",keys:C,criteria:$}).then(v=>w(C.length,v))).then(()=>b.length>E+A&&S(E+f))})};return S(0).then(()=>{if(h.length>0)throw new Ir("Error modifying one or more objects",h,m,g);return b.length})})})}delete(){var t=this._ctx,n=t.range;return un(t)&&(t.isPrimKey&&!gc||n.type===3)?this._write(r=>{const{primaryKey:i}=t.table.core.schema,o=n;return t.table.core.count({trans:r,query:{index:i,range:o}}).then(s=>t.table.core.mutate({trans:r,type:"deleteRange",range:o}).then(({failures:c,lastResult:l,results:a,numFailures:f})=>{if(f)throw new Ir("Could not delete some values",Object.keys(c).map(h=>c[h]),s-f);return s-f}))}):this.modify(ti)}}const ti=(e,t)=>t.value=null;function wc(e,t){return e<t?-1:e===t?0:1}function _c(e,t){return e>t?-1:e===t?0:1}function it(e,t,n){var r=e instanceof As?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function ln(e){return new e.Collection(e,()=>Es("")).limit(0)}function Sc(e,t,n,r,i,o){for(var s=Math.min(e.length,r.length),c=-1,l=0;l<s;++l){var a=t[l];if(a!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):c>=0?e.substr(0,c)+t[c]+n.substr(c+1):null;i(e[l],a)<0&&(c=l)}return s<r.length&&o==="next"?e+n.substr(e.length):s<e.length&&o==="prev"?e.substr(0,n.length):c<0?null:e.substr(0,c)+r[c]+n.substr(c+1)}function pr(e,t,n,r){var i,o,s,c,l,a,f,h=n.length;if(!n.every(b=>typeof b=="string"))return it(e,"String expected.");function m(b){i=function(E){return E==="next"?A=>A.toUpperCase():A=>A.toLowerCase()}(b),o=function(E){return E==="next"?A=>A.toLowerCase():A=>A.toUpperCase()}(b),s=b==="next"?wc:_c;var S=n.map(function(E){return{lower:o(E),upper:i(E)}}).sort(function(E,A){return s(E.lower,A.lower)});c=S.map(function(E){return E.upper}),l=S.map(function(E){return E.lower}),a=b,f=b==="next"?"":r}m("next");var g=new e.Collection(e,()=>Rt(c[0],l[h-1]+r));g._ondirectionchange=function(b){m(b)};var w=0;return g._addAlgorithm(function(b,S,E){var A=b.key;if(typeof A!="string")return!1;var x=o(A);if(t(x,l,w))return!0;for(var B=null,P=w;P<h;++P){var N=Sc(A,x,c[P],l[P],s,a);N===null&&B===null?w=P+1:(B===null||s(B,N)>0)&&(B=N)}return S(B!==null?function(){b.continue(B+f)}:E),!1}),g}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Es(e){return{type:1,lower:e,upper:e}}class As{get Collection(){return this._ctx.table.db.Collection}between(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&(!r||!i)?ln(this):new this.Collection(this,()=>Rt(t,n,!r,!i))}catch{return it(this,At)}}equals(t){return t==null?it(this,At):new this.Collection(this,()=>Es(t))}above(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(t,void 0,!0))}aboveOrEqual(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(t,void 0,!1))}below(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(void 0,t,!1,!0))}belowOrEqual(t){return t==null?it(this,At):new this.Collection(this,()=>Rt(void 0,t))}startsWith(t){return typeof t!="string"?it(this,"String expected."):this.between(t,t+Jt,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):pr(this,(n,r)=>n.indexOf(r[0])===0,[t],Jt)}equalsIgnoreCase(t){return pr(this,(n,r)=>n===r[0],[t],"")}anyOfIgnoreCase(){var t=Tt.apply(dn,arguments);return t.length===0?ln(this):pr(this,(n,r)=>r.indexOf(n)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=Tt.apply(dn,arguments);return t.length===0?ln(this):pr(this,(n,r)=>r.some(i=>n.indexOf(i)===0),t,Jt)}anyOf(){const t=Tt.apply(dn,arguments);let n=this._cmp;try{t.sort(n)}catch{return it(this,At)}if(t.length===0)return ln(this);const r=new this.Collection(this,()=>Rt(t[0],t[t.length-1]));r._ondirectionchange=o=>{n=o==="next"?this._ascending:this._descending,t.sort(n)};let i=0;return r._addAlgorithm((o,s,c)=>{const l=o.key;for(;n(l,t[i])>0;)if(++i,i===t.length)return s(c),!1;return n(l,t[i])===0||(s(()=>{o.continue(t[i])}),!1)}),r}notEqual(t){return this.inAnyRange([[-(1/0),t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=Tt.apply(dn,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return it(this,At)}const n=t.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[-(1/0),i]],null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,n){const r=this._cmp,i=this._ascending,o=this._descending,s=this._min,c=this._max;if(t.length===0)return ln(this);if(!t.every(A=>A[0]!==void 0&&A[1]!==void 0&&i(A[0],A[1])<=0))return it(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ne.InvalidArgument);const l=!n||n.includeLowers!==!1,a=n&&n.includeUppers===!0;let f,h=i;function m(A,x){return h(A[0],x[0])}try{f=t.reduce(function(A,x){let B=0,P=A.length;for(;B<P;++B){const N=A[B];if(r(x[0],N[1])<0&&r(x[1],N[0])>0){N[0]=s(N[0],x[0]),N[1]=c(N[1],x[1]);break}}return B===P&&A.push(x),A},[]),f.sort(m)}catch{return it(this,At)}let g=0;const w=a?A=>i(A,f[g][1])>0:A=>i(A,f[g][1])>=0,b=l?A=>o(A,f[g][0])>0:A=>o(A,f[g][0])>=0;let S=w;const E=new this.Collection(this,()=>Rt(f[0][0],f[f.length-1][1],!l,!a));return E._ondirectionchange=A=>{A==="next"?(S=w,h=i):(S=b,h=o),f.sort(m)},E._addAlgorithm((A,x,B)=>{for(var P=A.key;S(P);)if(++g,g===f.length)return x(B),!1;return!!function(N){return!w(N)&&!b(N)}(P)||(this._cmp(P,f[g][1])===0||this._cmp(P,f[g][0])===0||x(()=>{h===i?A.continue(f[g][0]):A.continue(f[g][1])}),!1)}),E}startsWithAnyOf(){const t=Tt.apply(dn,arguments);return t.every(n=>typeof n=="string")?t.length===0?ln(this):this.inAnyRange(t.map(n=>[n,n+Jt])):it(this,"startsWithAnyOf() only works with strings")}}function wt(e){return Te(function(t){return Jn(t),e(t.target.error),!1})}function Jn(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Mt=Ln(null,"storagemutated");class xc{_lock(){return Pn(!Q.global),++this._reculock,this._reculock!==1||Q.global||(Q.lockOwnerFor=this),this}_unlock(){if(Pn(!Q.global),--this._reculock==0)for(Q.global||(Q.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{An(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&Q.lockOwnerFor!==this}create(t){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(Pn(!this.idbtrans),!t&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ne.DatabaseClosed(r);case"MissingAPIError":throw new ne.MissingAPI(r.message,r);default:throw new ne.OpenFailed(r)}if(!this.active)throw new ne.TransactionInactive;return Pn(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Te(i=>{Jn(i),this._reject(t.error)}),t.onabort=Te(i=>{Jn(i),this.active&&this._reject(new ne.Abort(t.error)),this.active=!1,this.on("abort").fire(i)}),t.oncomplete=Te(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&Mt.storagemutated.fire(t.mutatedParts)}),this}_promise(t,n,r){if(t==="readwrite"&&this.mode!=="readwrite")return $e(new ne.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new ne.TransactionInactive);if(this._locked())return new W((o,s)=>{this._blockedFuncs.push([()=>{this._promise(t,n,r).then(o,s)},Q])});if(r)return Ft(()=>{var o=new W((s,c)=>{this._lock();const l=n(s,c,this);l&&l.then&&l.then(s,c)});return o.finally(()=>this._unlock()),o._lib=!0,o});var i=new W((o,s)=>{var c=n(o,s,this);c&&c.then&&c.then(o,s)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(t){var n=this._root();const r=W.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function s(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=s)})()}var o=n._waitingFor;return new W((s,c)=>{r.then(l=>n._waitingQueue.push(Te(s.bind(null,l))),l=>n._waitingQueue.push(Te(c.bind(null,l)))).finally(()=>{n._waitingFor===o&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ne.Abort))}table(t){const n=this._memoizedTables||(this._memoizedTables={});if(at(n,t))return n[t];const r=this.schema[t];if(!r)throw new ne.NotFound("Table "+t+" not part of transaction");const i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i}}function Si(e,t,n,r,i,o,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+Os(t)}}function Os(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Ts(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:ss(n,r=>[r.name,r])}}let Hn=e=>{try{return e.only([[]]),Hn=()=>[[]],[[]]}catch{return Hn=()=>Jt,Jt}};function xi(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>Ct(n,t)}(e):t=>Ct(t,e)}function ko(e){return[].slice.call(e)}let Ec=0;function Kn(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function Ac(e,t,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:a,upper:f,lowerOpen:h,upperOpen:m}=l;return a===void 0?f===void 0?null:t.upperBound(f,!!m):f===void 0?t.lowerBound(a,!!h):t.bound(a,f,!!h,!!m)}const{schema:i,hasGetAll:o}=function(l,a){const f=ko(l.objectStoreNames);return{schema:{name:l.name,tables:f.map(h=>a.objectStore(h)).map(h=>{const{keyPath:m,autoIncrement:g}=h,w=Ve(m),b=m==null,S={},E={name:h.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:w,keyPath:m,autoIncrement:g,unique:!0,extractKey:xi(m)},indexes:ko(h.indexNames).map(A=>h.index(A)).map(A=>{const{name:x,unique:B,multiEntry:P,keyPath:N}=A,C={name:x,compound:Ve(N),keyPath:N,unique:B,multiEntry:P,extractKey:xi(N)};return S[Kn(N)]=C,C}),getIndexByKeyPath:A=>S[Kn(A)]};return S[":id"]=E.primaryKey,m!=null&&(S[Kn(m)]=E.primaryKey),E})},hasGetAll:f.length>0&&"getAll"in a.objectStore(f[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=i.tables.map(l=>function(a){const f=a.name;return{name:f,schema:a,mutate:function({trans:h,type:m,keys:g,values:w,range:b}){return new Promise((S,E)=>{S=Te(S);const A=h.objectStore(f),x=A.keyPath==null,B=m==="put"||m==="add";if(!B&&m!=="delete"&&m!=="deleteRange")throw new Error("Invalid operation type: "+m);const{length:P}=g||w||{length:1};if(g&&w&&g.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return S({numFailures:0,failures:{},results:[],lastResult:void 0});let N;const C=[],$=[];let v=0;const d=T=>{++v,Jn(T)};if(m==="deleteRange"){if(b.type===4)return S({numFailures:v,failures:$,results:[],lastResult:void 0});b.type===3?C.push(N=A.clear()):C.push(N=A.delete(r(b)))}else{const[T,Y]=B?x?[w,g]:[w,null]:[g,null];if(B)for(let q=0;q<P;++q)C.push(N=Y&&Y[q]!==void 0?A[m](T[q],Y[q]):A[m](T[q])),N.onerror=d;else for(let q=0;q<P;++q)C.push(N=A[m](T[q])),N.onerror=d}const k=T=>{const Y=T.target.result;C.forEach((q,oe)=>q.error!=null&&($[oe]=q.error)),S({numFailures:v,failures:$,results:m==="delete"?g:C.map(q=>q.result),lastResult:Y})};N.onerror=T=>{d(T),k(T)},N.onsuccess=k})},getMany:({trans:h,keys:m})=>new Promise((g,w)=>{g=Te(g);const b=h.objectStore(f),S=m.length,E=new Array(S);let A,x=0,B=0;const P=C=>{const $=C.target;E[$._pos]=$.result,++B===x&&g(E)},N=wt(w);for(let C=0;C<S;++C)m[C]!=null&&(A=b.get(m[C]),A._pos=C,A.onsuccess=P,A.onerror=N,++x);x===0&&g(E)}),get:({trans:h,key:m})=>new Promise((g,w)=>{g=Te(g);const b=h.objectStore(f).get(m);b.onsuccess=S=>g(S.target.result),b.onerror=wt(w)}),query:function(h){return m=>new Promise((g,w)=>{g=Te(g);const{trans:b,values:S,limit:E,query:A}=m,x=E===1/0?void 0:E,{index:B,range:P}=A,N=b.objectStore(f),C=B.isPrimaryKey?N:N.index(B.name),$=r(P);if(E===0)return g({result:[]});if(h){const v=S?C.getAll($,x):C.getAllKeys($,x);v.onsuccess=d=>g({result:d.target.result}),v.onerror=wt(w)}else{let v=0;const d=S||!("openKeyCursor"in C)?C.openCursor($):C.openKeyCursor($),k=[];d.onsuccess=T=>{const Y=d.result;return Y?(k.push(S?Y.value:Y.primaryKey),++v===E?g({result:k}):void Y.continue()):g({result:k})},d.onerror=wt(w)}})}(o),openCursor:function({trans:h,values:m,query:g,reverse:w,unique:b}){return new Promise((S,E)=>{S=Te(S);const{index:A,range:x}=g,B=h.objectStore(f),P=A.isPrimaryKey?B:B.index(A.name),N=w?b?"prevunique":"prev":b?"nextunique":"next",C=m||!("openKeyCursor"in P)?P.openCursor(r(x),N):P.openKeyCursor(r(x),N);C.onerror=wt(E),C.onsuccess=Te($=>{const v=C.result;if(!v)return void S(null);v.___id=++Ec,v.done=!1;const d=v.continue.bind(v);let k=v.continuePrimaryKey;k&&(k=k.bind(v));const T=v.advance.bind(v),Y=()=>{throw new Error("Cursor not stopped")};v.trans=h,v.stop=v.continue=v.continuePrimaryKey=v.advance=()=>{throw new Error("Cursor not started")},v.fail=Te(E),v.next=function(){let q=1;return this.start(()=>q--?this.continue():this.stop()).then(()=>this)},v.start=q=>{const oe=new Promise((ie,se)=>{ie=Te(ie),C.onerror=wt(se),v.fail=se,v.stop=ke=>{v.stop=v.continue=v.continuePrimaryKey=v.advance=Y,ie(ke)}}),re=()=>{if(C.result)try{q()}catch(ie){v.fail(ie)}else v.done=!0,v.start=()=>{throw new Error("Cursor behind last entry")},v.stop()};return C.onsuccess=Te(ie=>{C.onsuccess=re,re()}),v.continue=d,v.continuePrimaryKey=k,v.advance=T,re(),oe},S(v)},E)})},count({query:h,trans:m}){const{index:g,range:w}=h;return new Promise((b,S)=>{const E=m.objectStore(f),A=g.isPrimaryKey?E:E.index(g.name),x=r(w),B=x?A.count(x):A.count();B.onsuccess=Te(P=>b(P.target.result)),B.onerror=wt(S)})}}}(l)),c={};return s.forEach(l=>c[l.name]=l),{stack:"dbcore",transaction:e.transaction.bind(e),table(l){if(!c[l])throw new Error(`Table '${l}' not found`);return c[l]},MIN_KEY:-1/0,MAX_KEY:Hn(t),schema:i}}function Ei({_novip:e},t){const n=t.db,r=function(i,o,{IDBKeyRange:s,indexedDB:c},l){return{dbcore:function(f,h){return h.reduce((m,{create:g})=>({...m,...g(m)}),f)}(Ac(o,s,l),i.dbcore)}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(i=>{const o=i.name;e.core.schema.tables.some(s=>s.name===o)&&(i.core=e.core.table(o),e[o]instanceof e.Table&&(e[o].core=i.core))})}function Rr({_novip:e},t,n,r){n.forEach(i=>{const o=r[i];t.forEach(s=>{const c=qi(s,i);(!c||"value"in c&&c.value===void 0)&&(s===e.Transaction.prototype||s instanceof e.Transaction?Pt(s,i,{get(){return this.table(i)},set(l){rs(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):s[i]=new e.Table(i,o))})})}function Ai({_novip:e},t){t.forEach(n=>{for(let r in n)n[r]instanceof e.Table&&delete n[r]})}function Oc(e,t){return e._cfg.version-t._cfg.version}function Tc(e,t,n,r){const i=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);const s=o._reject.bind(o),c=Q.transless||Q;Ft(()=>{Q.trans=o,Q.transless=c,t===0?(De(i).forEach(l=>{ni(n,l,i[l].primKey,i[l].indexes)}),Ei(e,n),W.follow(()=>e.on.populate.fire(o)).catch(s)):function({_novip:l},a,f,h){const m=[],g=l._versions;let w=l._dbSchema=Ti(l,l.idbdb,h),b=!1;function S(){return m.length?W.resolve(m.shift()(f.idbtrans)).then(S):W.resolve()}return g.filter(E=>E._cfg.version>=a).forEach(E=>{m.push(()=>{const A=w,x=E._cfg.dbschema;ki(l,A,h),ki(l,x,h),w=l._dbSchema=x;const B=ks(A,x);B.add.forEach(N=>{ni(h,N[0],N[1].primKey,N[1].indexes)}),B.change.forEach(N=>{if(N.recreate)throw new ne.Upgrade("Not yet support for changing primary key");{const C=h.objectStore(N.name);N.add.forEach($=>Oi(C,$)),N.change.forEach($=>{C.deleteIndex($.name),Oi(C,$)}),N.del.forEach($=>C.deleteIndex($))}});const P=E._cfg.contentUpgrade;if(P&&E._cfg.version>a){Ei(l,h),f._memoizedTables={},b=!0;let N=as(x);B.del.forEach(d=>{N[d]=A[d]}),Ai(l,[l.Transaction.prototype]),Rr(l,[l.Transaction.prototype],De(N),N),f.schema=N;const C=Wi(P);let $;C&&En();const v=W.follow(()=>{if($=P(f),$&&C){var d=It.bind(null,null);$.then(d,d)}});return $&&typeof $.then=="function"?W.resolve($):v.then(()=>$)}}),m.push(A=>{(!b||!mc)&&function(x,B){[].slice.call(B.db.objectStoreNames).forEach(P=>x[P]==null&&B.db.deleteObjectStore(P))}(E._cfg.dbschema,A),Ai(l,[l.Transaction.prototype]),Rr(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),f.schema=l._dbSchema})}),S().then(()=>{var E,A;A=h,De(E=w).forEach(x=>{A.db.objectStoreNames.contains(x)||ni(A,x,E[x].primKey,E[x].indexes)})})}(e,t,o,n).catch(s)})}function ks(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],o=t[r];if(i){const s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto&&!Wr)s.recreate=!0,n.change.push(s);else{const c=i.idxByName,l=o.idxByName;let a;for(a in c)l[a]||s.del.push(a);for(a in l){const f=c[a],h=l[a];f?f.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}function ni(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(o=>Oi(i,o)),i}function Oi(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Ti(e,t,n){const r={};return Cr(t.objectStoreNames,0).forEach(i=>{const o=n.objectStore(i);let s=o.keyPath;const c=Si(Os(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),l=[];for(let f=0;f<o.indexNames.length;++f){const h=o.index(o.indexNames[f]);s=h.keyPath;var a=Si(h.name,s,!!h.unique,!!h.multiEntry,!1,s&&typeof s!="string",!1);l.push(a)}r[i]=Ts(i,c,l)}),r}function ki({_novip:e},t,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const o=r[i],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(let c=0;c<s.indexNames.length;++c){const l=s.indexNames[c],a=s.index(l).keyPath,f=typeof a=="string"?a:"["+Cr(a).join("+")+"]";if(t[o]){const h=t[o].idxByName[f];h&&(h.name=l,delete t[o].idxByName[f],t[o].idxByName[l]=h)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Oe.WorkerGlobalScope&&Oe instanceof Oe.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class kc{_parseStoresSpec(t,n){De(t).forEach(r=>{if(t[r]!==null){var i=t[r].split(",").map((s,c)=>{const l=(s=s.trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return Si(l,a||null,/\&/.test(s),/\*/.test(s),/\+\+/.test(s),Ve(a),c===0)}),o=i.shift();if(o.multi)throw new ne.Schema("Primary key cannot be multi-valued");i.forEach(s=>{if(s.auto)throw new ne.Schema("Only primary key can be marked as autoIncrement (++)");if(!s.keyPath)throw new ne.Schema("Index must have a name and cannot be an empty string")}),n[r]=Ts(r,o,i)}})}stores(t){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?He(this._cfg.storesSource,t):t;const r=n._versions,i={};let o={};return r.forEach(s=>{He(i,s._cfg.storesSource),o=s._cfg.dbschema={},s._parseStoresSpec(i,o)}),n._dbSchema=o,Ai(n,[n._allTables,n,n.Transaction.prototype]),Rr(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],De(o),o),n._storeNames=De(o),this}upgrade(t){return this._cfg.contentUpgrade=zi(this._cfg.contentUpgrade||Se,t),this}}function Xi(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ce("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Qi(e){return e&&typeof e.databases=="function"}function Pi(e){return Ft(function(){return Q.letThrough=!0,e()})}function Pc(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function Cc(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?$e(t.dbOpenError):e);St&&(t.openCanceller._stackHolder=rn()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function i(){if(t.openCanceller!==r)throw new ne.DatabaseClosed("db.open() was cancelled")}let o=t.dbReadyResolve,s=null,c=!1;return W.race([r,(typeof navigator>"u"?W.resolve():Pc()).then(()=>new W((l,a)=>{if(i(),!n)throw new ne.MissingAPI;const f=e.name,h=t.autoSchema?n.open(f):n.open(f,Math.round(10*e.verno));if(!h)throw new ne.MissingAPI;h.onerror=wt(a),h.onblocked=Te(e._fireOnBlocked),h.onupgradeneeded=Te(m=>{if(s=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Jn,s.abort(),h.result.close();const w=n.deleteDatabase(f);w.onsuccess=w.onerror=Te(()=>{a(new ne.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{s.onerror=wt(a);var g=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;c=g<1,e._novip.idbdb=h.result,Tc(e,g/10,s,a)}},a),h.onsuccess=Te(()=>{s=null;const m=e._novip.idbdb=h.result,g=Cr(m.objectStoreNames);if(g.length>0)try{const b=m.transaction((w=g).length===1?w[0]:w,"readonly");t.autoSchema?function({_novip:S},E,A){S.verno=E.version/10;const x=S._dbSchema=Ti(0,E,A);S._storeNames=Cr(E.objectStoreNames,0),Rr(S,[S._allTables],De(x),x)}(e,m,b):(ki(e,e._dbSchema,b),function(S,E){const A=ks(Ti(0,S.idbdb,E),S._dbSchema);return!(A.add.length||A.change.some(x=>x.add.length||x.change.length))}(e,b)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),Ei(e,b)}catch{}var w;$n.push(e),m.onversionchange=Te(b=>{t.vcFired=!0,e.on("versionchange").fire(b)}),m.onclose=Te(b=>{e.on("close").fire(b)}),c&&function({indexedDB:b,IDBKeyRange:S},E){!Qi(b)&&E!=="__dbnames"&&Xi(b,S).put({name:E}).catch(Se)}(e._deps,f),l()},a)}))]).then(()=>(i(),t.onReadyBeingFired=[],W.resolve(Pi(()=>e.on.ready.fire(e.vip))).then(function l(){if(t.onReadyBeingFired.length>0){let a=t.onReadyBeingFired.reduce(zi,Se);return t.onReadyBeingFired=[],W.resolve(Pi(()=>a(e.vip))).then(l)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(l=>{t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),$e(l)}).finally(()=>{t.openComplete=!0,o()})}function Ci(e){var t=o=>e.next(o),n=i(t),r=i(o=>e.throw(o));function i(o){return s=>{var c=o(s),l=c.value;return c.done?l:l&&typeof l.then=="function"?l.then(n,r):Ve(l)?Promise.all(l).then(n,r):n(l)}}return i(t)()}function Ic(e,t,n){var r=arguments.length;if(r<2)throw new ne.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=cs(i);return[e,o,n]}function Ps(e,t,n,r,i){return W.resolve().then(()=>{const o=Q.transless||Q,s=e._createTransaction(t,n,e._dbSchema,r),c={trans:s,transless:o};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(h){return h.name===Yi.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Ps(e,t,n,null,i))):$e(h)}const l=Wi(i);let a;l&&En();const f=W.follow(()=>{if(a=i.call(s,s),a)if(l){var h=It.bind(null,null);a.then(h,h)}else typeof a.next=="function"&&typeof a.throw=="function"&&(a=Ci(a))},c);return(a&&typeof a.then=="function"?W.resolve(a).then(h=>s.active?h:$e(new ne.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):f.then(()=>a)).then(h=>(r&&s._resolve(),s._completion.then(()=>h))).catch(h=>(s._reject(h),$e(h)))})}function yr(e,t,n){const r=Ve(e)?e.slice():[e];for(let i=0;i<n;++i)r.push(t);return r}const Nc={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},o=[];function s(f,h,m){const g=Kn(f),w=i[g]=i[g]||[],b=f==null?0:typeof f=="string"?1:f.length,S=h>0,E={...m,isVirtual:S,keyTail:h,keyLength:b,extractKey:xi(f),unique:!S&&m.unique};return w.push(E),E.isPrimaryKey||o.push(E),b>1&&s(b===2?f[0]:f.slice(0,b-1),h+1,m),w.sort((A,x)=>A.keyTail-x.keyTail),E}const c=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[c];for(const f of r.indexes)s(f.keyPath,0,f);function l(f){const h=f.query.index;return h.isVirtual?{...f,query:{index:h,range:(m=f.query.range,g=h.keyTail,{type:m.type===1?2:m.type,lower:yr(m.lower,m.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:yr(m.upper,m.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0})}}:f;var m,g}return{...n,schema:{...r,primaryKey:c,indexes:o,getIndexByKeyPath:function(f){const h=i[Kn(f)];return h&&h[0]}},count:f=>n.count(l(f)),query:f=>n.query(l(f)),openCursor(f){const{keyTail:h,isVirtual:m,keyLength:g}=f.query.index;return m?n.openCursor(l(f)).then(w=>w&&function(b){return Object.create(b,{continue:{value:function(E){E!=null?b.continue(yr(E,f.reverse?e.MAX_KEY:e.MIN_KEY,h)):f.unique?b.continue(b.key.slice(0,g).concat(f.reverse?e.MIN_KEY:e.MAX_KEY,h)):b.continue()}},continuePrimaryKey:{value(E,A){b.continuePrimaryKey(yr(E,e.MAX_KEY,h),A)}},primaryKey:{get:()=>b.primaryKey},key:{get(){const E=b.key;return g===1?E[0]:E.slice(0,g)}},value:{get:()=>b.value}})}(w)):n.openCursor(f)}}}}}};function Zi(e,t,n,r){return n=n||{},r=r||"",De(e).forEach(i=>{if(at(t,i)){var o=e[i],s=t[i];if(typeof o=="object"&&typeof s=="object"&&o&&s){const c=li(o);c!==li(s)?n[r+i]=t[i]:c==="Object"?Zi(o,s,n,r+i+"."):o!==s&&(n[r+i]=t[i])}else o!==s&&(n[r+i]=t[i])}else n[r+i]=void 0}),De(t).forEach(i=>{at(e,i)||(n[r+i]=t[i])}),n}const Bc={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema;return{...n,mutate(o){const s=Q.trans,{deleting:c,creating:l,updating:a}=s.table(t).hook;switch(o.type){case"add":if(l.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"put":if(l.fire===Se&&a.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"delete":if(c.fire===Se)break;return s._promise("readwrite",()=>f(o),!0);case"deleteRange":if(c.fire===Se)break;return s._promise("readwrite",()=>function(m){return h(m.trans,m.range,1e4)}(o),!0)}return n.mutate(o);function f(m){const g=Q.trans,w=m.keys||function(b,S){return S.type==="delete"?S.keys:S.keys||S.values.map(b.extractKey)}(r,m);if(!w)throw new Error("Keys missing");return(m=m.type==="add"||m.type==="put"?{...m,keys:w}:{...m}).type!=="delete"&&(m.values=[...m.values]),m.keys&&(m.keys=[...m.keys]),function(b,S,E){return S.type==="add"?Promise.resolve([]):b.getMany({trans:S.trans,keys:E,cache:"immutable"})}(n,m,w).then(b=>{const S=w.map((E,A)=>{const x=b[A],B={onerror:null,onsuccess:null};if(m.type==="delete")c.fire.call(B,E,x,g);else if(m.type==="add"||x===void 0){const P=l.fire.call(B,E,m.values[A],g);E==null&&P!=null&&(E=P,m.keys[A]=E,r.outbound||vt(m.values[A],r.keyPath,E))}else{const P=Zi(x,m.values[A]),N=a.fire.call(B,P,E,x,g);if(N){const C=m.values[A];Object.keys(N).forEach($=>{at(C,$)?C[$]=N[$]:vt(C,$,N[$])})}}return B});return n.mutate(m).then(({failures:E,results:A,numFailures:x,lastResult:B})=>{for(let P=0;P<w.length;++P){const N=A?A[P]:w[P],C=S[P];N==null?C.onerror&&C.onerror(E[P]):C.onsuccess&&C.onsuccess(m.type==="put"&&b[P]?m.values[P]:N)}return{failures:E,results:A,numFailures:x,lastResult:B}}).catch(E=>(S.forEach(A=>A.onerror&&A.onerror(E)),Promise.reject(E)))})}function h(m,g,w){return n.query({trans:m,values:!1,query:{index:r,range:g},limit:w}).then(({result:b})=>f({type:"delete",keys:b,trans:m}).then(S=>S.numFailures>0?Promise.reject(S.failures[0]):b.length<w?{failures:[],numFailures:0,lastResult:void 0}:h(m,{...g,lower:b[b.length-1],lowerOpen:!0},w)))}}}}})};function Cs(e,t,n){try{if(!t||t.keys.length<e.length)return null;const r=[];for(let i=0,o=0;i<t.keys.length&&o<e.length;++i)Je(t.keys[i],e[o])===0&&(r.push(n?er(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch{return null}}const jc={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=Cs(r.keys,r.trans._cache,r.cache==="clone");return i?W.resolve(i):n.getMany(r).then(o=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?er(o):o},o))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function eo(e){return!("from"in e)}const Ot=function(e,t){if(!this){const n=new Ot;return e&&"d"in e&&He(n,e),n}He(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Gn(e,t,n){const r=Je(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(eo(e))return He(e,{from:t,to:n,d:1});const i=e.l,o=e.r;if(Je(n,e.from)<0)return i?Gn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Po(e);if(Je(t,e.to)>0)return o?Gn(o,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Po(e);Je(t,e.from)<0&&(e.from=t,e.l=null,e.d=o?o.d+1:1),Je(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;i&&!e.l&&$r(e,i),o&&s&&$r(e,o)}function $r(e,t){eo(t)||function n(r,{from:i,to:o,l:s,r:c}){Gn(r,i,o),s&&n(r,s),c&&n(r,c)}(e,t)}function Dc(e,t){const n=Ii(t);let r=n.next();if(r.done)return!1;let i=r.value;const o=Ii(e);let s=o.next(i.from),c=s.value;for(;!r.done&&!s.done;){if(Je(c.from,i.to)<=0&&Je(c.to,i.from)>=0)return!0;Je(i.from,c.from)<0?i=(r=n.next(c.from)).value:c=(s=o.next(i.from)).value}return!1}function Ii(e){let t=eo(e)?null:{s:0,n:e};return{next(n){const r=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&Je(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||Je(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Po(e){var t,n;const r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const o=i==="r"?"l":"r",s={...e},c=e[i];e.from=c.from,e.to=c.to,e[i]=c[i],s[i]=c[o],e[o]=s,s.d=Co(s)}e.d=Co(e)}function Co({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}Sn(Ot.prototype,{add(e){return $r(this,e),this},addKey(e){return Gn(this,e,e),this},addKeys(e){return e.forEach(t=>Gn(this,t,t)),this},[fi](){return Ii(this)}});const Rc={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Ot(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:o}=i,{primaryKey:s}=o,{extractKey:c,outbound:l}=s,a={...i,mutate:m=>{const g=m.trans,w=g.mutatedParts||(g.mutatedParts={}),b=N=>{const C=`idb://${t}/${r}/${N}`;return w[C]||(w[C]=new Ot)},S=b(""),E=b(":dels"),{type:A}=m;let[x,B]=m.type==="deleteRange"?[m.range]:m.type==="delete"?[m.keys]:m.values.length<50?[[],m.values]:[];const P=m.trans._cache;return i.mutate(m).then(N=>{if(Ve(x)){A!=="delete"&&(x=N.results),S.addKeys(x);const C=Cs(x,P);C||A==="add"||E.addKeys(x),(C||B)&&function($,v,d,k){function T(Y){const q=$(Y.name||"");function oe(ie){return ie!=null?Y.extractKey(ie):null}const re=ie=>Y.multiEntry&&Ve(ie)?ie.forEach(se=>q.addKey(se)):q.addKey(ie);(d||k).forEach((ie,se)=>{const ke=d&&oe(d[se]),Pe=k&&oe(k[se]);Je(ke,Pe)!==0&&(ke!=null&&re(ke),Pe!=null&&re(Pe))})}v.indexes.forEach(T)}(b,o,C,B)}else if(x){const C={from:x.lower,to:x.upper};E.add(C),S.add(C)}else S.add(n),E.add(n),o.indexes.forEach(C=>b(C.name).add(n));return N})}},f=({query:{index:m,range:g}})=>{var w,b;return[m,new Ot((w=g.lower)!==null&&w!==void 0?w:e.MIN_KEY,(b=g.upper)!==null&&b!==void 0?b:e.MAX_KEY)]},h={get:m=>[s,new Ot(m.key)],getMany:m=>[s,new Ot().addKeys(m.keys)],count:f,query:f,openCursor:f};return De(h).forEach(m=>{a[m]=function(g){const{subscr:w}=Q;if(w){const b=B=>{const P=`idb://${t}/${r}/${B}`;return w[P]||(w[P]=new Ot)},S=b(""),E=b(":dels"),[A,x]=h[m](g);if(b(A.name||"").add(x),!A.isPrimaryKey){if(m!=="count"){const B=m==="query"&&l&&g.values&&i.query({...g,values:!1});return i[m].apply(this,arguments).then(P=>{if(m==="query"){if(l&&g.values)return B.then(({result:C})=>(S.addKeys(C),P));const N=g.values?P.result.map(c):P.result;g.values?S.addKeys(N):E.addKeys(N)}else if(m==="openCursor"){const N=P,C=g.values;return N&&Object.create(N,{key:{get:()=>(E.addKey(N.primaryKey),N.key)},primaryKey:{get(){const $=N.primaryKey;return E.addKey($),$}},value:{get:()=>(C&&S.addKey(N.primaryKey),N.value)}})}return P})}E.add(n)}}return i[m].apply(this,arguments)}}),a}}}};class Ce{constructor(t,n){this._middlewares={},this.verno=0;const r=Ce.dependencies;this._options=n={addons:Ce.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var s;o.dbReadyPromise=new W(c=>{o.dbReadyResolve=c}),o.openCanceller=new W((c,l)=>{o.cancelOpen=l}),this._state=o,this.name=t,this.on=Ln(this,"populate","blocked","versionchange","close",{ready:[zi,Se]}),this.on.ready.subscribe=is(this.on.ready.subscribe,c=>(l,a)=>{Ce.vip(()=>{const f=this._state;if(f.openComplete)f.dbOpenError||W.resolve().then(l),a&&c(l);else if(f.onReadyBeingFired)f.onReadyBeingFired.push(l),a&&c(l);else{c(l);const h=this;a||c(function m(){h.on.ready.unsubscribe(l),h.on.ready.unsubscribe(m)})}})}),this.Collection=(s=this,kn(bc.prototype,function(c,l){this.db=s;let a=xs,f=null;if(l)try{a=l()}catch(w){f=w}const h=c._ctx,m=h.table,g=m.hook.reading.fire;this._ctx={table:m,index:h.index,isPrimKey:!h.index||m.schema.primKey.keyPath&&h.index===m.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:f,or:h.or,valueMapper:g!==Yn?g:null}})),this.Table=function(c){return kn(vc.prototype,function(l,a,f){this.db=c,this._tx=f,this.name=l,this.schema=a,this.hook=c._allTables[l]?c._allTables[l].hook:Ln(null,{creating:[sc,Se],reading:[oc,Yn],updating:[cc,Se],deleting:[ac,Se]})})}(this),this.Transaction=function(c){return kn(xc.prototype,function(l,a,f,h,m){this.db=c,this.mode=l,this.storeNames=a,this.schema=f,this.chromeTransactionDurability=h,this.idbtrans=null,this.on=Ln(this,"complete","error","abort"),this.parent=m||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new W((g,w)=>{this._resolve=g,this._reject=w}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},g=>{var w=this.active;return this.active=!1,this.on.error.fire(g),this.parent?this.parent._reject(g):w&&this.idbtrans&&this.idbtrans.abort(),$e(g)})})}(this),this.Version=function(c){return kn(kc.prototype,function(l){this.db=c,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(c){return kn(As.prototype,function(l,a,f){this.db=c,this._ctx={table:l,index:a===":id"?null:a,or:f};const h=c._deps.indexedDB;if(!h)throw new ne.MissingAPI;this._cmp=this._ascending=h.cmp.bind(h),this._descending=(m,g)=>h.cmp(g,m),this._max=(m,g)=>h.cmp(m,g)>0?m:g,this._min=(m,g)=>h.cmp(m,g)<0?m:g,this._IDBKeyRange=c._deps.IDBKeyRange})}(this),this.on("versionchange",c=>{c.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",c=>{!c.newVersion||c.newVersion<c.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${c.oldVersion/10}`)}),this._maxKey=Hn(n.IDBKeyRange),this._createTransaction=(c,l,a,f)=>new this.Transaction(c,l,a,this._options.chromeTransactionDurability,f),this._fireOnBlocked=c=>{this.on("blocked").fire(c),$n.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(c))},this.use(Nc),this.use(Bc),this.use(Rc),this.use(jc),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(c=>c(this))}version(t){if(isNaN(t)||t<.1)throw new ne.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new ne.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const n=this._versions;var r=n.filter(i=>i._cfg.version===t)[0];return r||(r=new this.Version(t),n.push(r),n.sort(Oc),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(t){return this.idbdb&&(this._state.openComplete||Q.letThrough||this._vip)?t():new W((n,r)=>{if(this._state.openComplete)return r(new ne.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new ne.DatabaseClosed);this.open().catch(Se)}this._state.dbReadyPromise.then(n,r)}).then(t)}use({stack:t,create:n,level:r,name:i}){i&&this.unuse({stack:t,name:i});const o=this._middlewares[t]||(this._middlewares[t]=[]);return o.push({stack:t,create:n,level:r??10,name:i}),o.sort((s,c)=>s.level-c.level),this}unuse({stack:t,name:n,create:r}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Cc(this)}_close(){const t=this._state,n=$n.indexOf(this);if(n>=0&&$n.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new W(r=>{t.dbReadyResolve=r}),t.openCanceller=new W((r,i)=>{t.cancelOpen=i})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new ne.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,n=this._state;return new W((r,i)=>{const o=()=>{this.close();var s=this._deps.indexedDB.deleteDatabase(this.name);s.onsuccess=Te(()=>{(function({indexedDB:c,IDBKeyRange:l},a){!Qi(c)&&a!=="__dbnames"&&Xi(c,l).delete(a).catch(Se)})(this._deps,this.name),r()}),s.onerror=wt(i),s.onblocked=this._fireOnBlocked};if(t)throw new ne.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return De(this._allTables).map(t=>this._allTables[t])}transaction(){const t=Ic.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,n,r){let i=Q.trans;i&&i.db===this&&t.indexOf("!")===-1||(i=null);const o=t.indexOf("?")!==-1;let s,c;t=t.replace("!","").replace("?","");try{if(c=n.map(a=>{var f=a instanceof this.Table?a.name:a;if(typeof f!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return f}),t=="r"||t==="readonly")s="readonly";else{if(t!="rw"&&t!="readwrite")throw new ne.InvalidArgument("Invalid transaction mode: "+t);s="readwrite"}if(i){if(i.mode==="readonly"&&s==="readwrite"){if(!o)throw new ne.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&c.forEach(a=>{if(i&&i.storeNames.indexOf(a)===-1){if(!o)throw new ne.SubTransaction("Table "+a+" not included in parent transaction.");i=null}}),o&&i&&!i.active&&(i=null)}}catch(a){return i?i._promise(null,(f,h)=>{h(a)}):$e(a)}const l=Ps.bind(null,this,s,c,i,r);return i?i._promise(s,l,"lock"):Q.trans?An(Q.transless,()=>this._whenReady(l)):this._whenReady(l)}table(t){if(!at(this._allTables,t))throw new ne.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const $c=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Lc{constructor(t){this._subscribe=t}subscribe(t,n,r){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:n,complete:r})}[$c](){return this}}function Is(e,t){return De(t).forEach(n=>{$r(e[n]||(e[n]=new Ot),t[n])}),e}function Kc(e){return new Lc(t=>{const n=Wi(e);let r=!1,i={},o={};const s={get closed(){return r},unsubscribe:()=>{r=!0,Mt.storagemutated.unsubscribe(f)}};t.start&&t.start(s);let c=!1,l=!1;function a(){return De(o).some(m=>i[m]&&Dc(i[m],o[m]))}const f=m=>{Is(i,m),a()&&h()},h=()=>{if(c||r)return;i={};const m={},g=function(w){n&&En();const b=()=>Ft(e,{subscr:w,trans:null}),S=Q.trans?An(Q.transless,b):b();return n&&S.then(It,It),S}(m);l||(Mt("storagemutated",f),l=!0),c=!0,Promise.resolve(g).then(w=>{c=!1,r||(a()?h():(i={},o=m,t.next&&t.next(w)))},w=>{c=!1,t.error&&t.error(w),s.unsubscribe()})};return h(),s})}let Ni;try{Ni={indexedDB:Oe.indexedDB||Oe.mozIndexedDB||Oe.webkitIndexedDB||Oe.msIndexedDB,IDBKeyRange:Oe.IDBKeyRange||Oe.webkitIDBKeyRange}}catch{Ni={indexedDB:null,IDBKeyRange:null}}const zt=Ce;function Er(e){let t=kt;try{kt=!0,Mt.storagemutated.fire(e)}finally{kt=t}}Sn(zt,{...vr,delete:e=>new zt(e,{addons:[]}).delete(),exists:e=>new zt(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:n}){return Qi(t)?Promise.resolve(t.databases()).then(r=>r.map(i=>i.name).filter(i=>i!=="__dbnames")):Xi(t,n).toCollection().primaryKeys()}(zt.dependencies).then(e)}catch{return $e(new ne.MissingAPI)}},defineClass:()=>function(e){He(this,e)},ignoreTransaction:e=>Q.trans?An(Q.transless,e):e(),vip:Pi,async:function(e){return function(){try{var t=Ci(e.apply(this,arguments));return t&&typeof t.then=="function"?t:W.resolve(t)}catch(n){return $e(n)}}},spawn:function(e,t,n){try{var r=Ci(e.apply(n,t||[]));return r&&typeof r.then=="function"?r:W.resolve(r)}catch(i){return $e(i)}},currentTransaction:{get:()=>Q.trans||null},waitFor:function(e,t){const n=W.resolve(typeof e=="function"?zt.ignoreTransaction(e):e).timeout(t||6e4);return Q.trans?Q.trans.waitFor(n):n},Promise:W,debug:{get:()=>St,set:e=>{ls(e,e==="dexie"?()=>!0:Ss)}},derive:gn,extend:He,props:Sn,override:is,Events:Ln,on:Mt,liveQuery:Kc,extendObservabilitySet:Is,getByKeyPath:Ct,setByKeyPath:vt,delByKeyPath:function(e,t){typeof t=="string"?vt(e,t,void 0):"length"in t&&[].map.call(t,function(n){vt(e,n,void 0)})},shallowClone:as,deepClone:er,getObjectDiff:Zi,cmp:Je,asap:os,minKey:-(1/0),addons:[],connections:$n,errnames:Yi,dependencies:Ni,semVer:"3.2.3",version:"3.2.3".split(".").map(e=>parseInt(e)).reduce((e,t,n)=>e+t/Math.pow(10,2*n))}),zt.maxKey=Hn(zt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Mt("storagemutated",e=>{if(!kt){let t;Wr?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),kt=!0,dispatchEvent(t),kt=!1}}),addEventListener("x-storagemutated-1",({detail:e})=>{kt||Er(e)}));let kt=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel("x-storagemutated-1");typeof e.unref=="function"&&e.unref(),Mt("storagemutated",t=>{kt||e.postMessage(t)}),e.onmessage=t=>{t.data&&Er(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Mt("storagemutated",t=>{try{kt||(typeof localStorage<"u"&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:"x-storagemutated-1",changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key==="x-storagemutated-1"){const n=JSON.parse(t.newValue);n&&Er(n.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type==="x-storagemutated-1"&&Er(t.changedParts)})}W.rejectionMapper=function(e,t){if(!e||e instanceof vn||e instanceof TypeError||e instanceof SyntaxError||!e.name||!_o[e.name])return e;var n=new _o[e.name](t||e.message,e);return"stack"in e&&Pt(n,"stack",{get:function(){return this.inner.stack}}),n},ls(St,Ss);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function qt(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{a(r.next(f))}catch(h){s(h)}}function l(f){try{a(r.throw(f))}catch(h){s(h)}}function a(f){f.done?o(f.value):i(f.value).then(c,l)}a((r=r.apply(e,t||[])).next())})}function mt(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function c(a){return function(f){return l([a,f])}}function l(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(f){a=[6,f],i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Fc(e){var t=[e.schema.primKey].concat(e.schema.indexes);return t.map(function(n){return n.src}).join(",")}function Uc(e){for(var t={},n=0,r=e.tables;n<r.length;n++){var i=r[n];t[i.name]=i.schema}return t}function Ns(e,t){return new Promise(function(n,r){var i=new FileReader;i.onabort=function(o){return r(new Error("file read aborted"))},i.onerror=function(o){return r(o.target.error)},i.onload=function(o){return n(o.target.result)},t==="binary"?i.readAsArrayBuffer(e):i.readAsText(e)})}function Bs(e,t){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var n=new FileReaderSync,r=t==="binary"?n.readAsArrayBuffer(e):n.readAsText(e);return r}var Bi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function to(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Vr=to(function(e,t){(function(n,r){e.exports=r()})(Bi,function(){function n(I){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?n=function(j){return typeof j}:n=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},n(I)}function r(I,j,D,R,U,de,ye){try{var fe=I[de](ye),G=fe.value}catch(Ue){D(Ue);return}fe.done?j(G):Promise.resolve(G).then(R,U)}function i(I){return function(){var j=this,D=arguments;return new Promise(function(R,U){var de=I.apply(j,D);function ye(G){r(de,R,U,ye,fe,"next",G)}function fe(G){r(de,R,U,ye,fe,"throw",G)}ye(void 0)})}}function o(I,j){if(!(I instanceof j))throw new TypeError("Cannot call a class as a function")}function s(I,j){for(var D=0;D<j.length;D++){var R=j[D];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(I,R.key,R)}}function c(I,j,D){return j&&s(I.prototype,j),D&&s(I,D),I}function l(I,j,D){return j in I?Object.defineProperty(I,j,{value:D,enumerable:!0,configurable:!0,writable:!0}):I[j]=D,I}function a(I,j){var D=Object.keys(I);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(I);j&&(R=R.filter(function(U){return Object.getOwnPropertyDescriptor(I,U).enumerable})),D.push.apply(D,R)}return D}function f(I){for(var j=1;j<arguments.length;j++){var D=arguments[j]!=null?arguments[j]:{};j%2?a(Object(D),!0).forEach(function(R){l(I,R,D[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(I,Object.getOwnPropertyDescriptors(D)):a(Object(D)).forEach(function(R){Object.defineProperty(I,R,Object.getOwnPropertyDescriptor(D,R))})}return I}function h(I,j){return w(I)||S(I,j)||A()}function m(I){return g(I)||b(I)||E()}function g(I){if(Array.isArray(I)){for(var j=0,D=new Array(I.length);j<I.length;j++)D[j]=I[j];return D}}function w(I){if(Array.isArray(I))return I}function b(I){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]")return Array.from(I)}function S(I,j){if(Symbol.iterator in Object(I)||Object.prototype.toString.call(I)==="[object Arguments]"){var D=[],R=!0,U=!1,de=void 0;try{for(var ye=I[Symbol.iterator](),fe;!(R=(fe=ye.next()).done)&&(D.push(fe.value),!(j&&D.length===j));R=!0);}catch(G){U=!0,de=G}finally{try{!R&&ye.return!=null&&ye.return()}finally{if(U)throw de}}return D}}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var x=function I(j){o(this,I),this.p=new Promise(j)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(I,j){var D=this;return new x(function(R,U){D.p.then(function(de){R(I?I(de):de)}).catch(function(de){return j?j(de):Promise.reject(de)}).then(R,U)})},x.prototype.catch=function(I){return this.then(null,I)},x.resolve=function(I){return new x(function(j){j(I)})},x.reject=function(I){return new x(function(j,D){D(I)})},["all","race"].forEach(function(I){x[I]=function(j){return new x(function(D,R){Promise[I](j.map(function(U){return U&&U.constructor&&U.constructor.__typeson__type__==="TypesonPromise"?U.p:U})).then(D,R)})}});var B={},P=B.toString,N={}.hasOwnProperty,C=Object.getPrototypeOf,$=N.toString;function v(I,j){return q(I)&&typeof I.then=="function"&&(!j||typeof I.catch=="function")}function d(I){return P.call(I).slice(8,-1)}function k(I,j){if(!I||n(I)!=="object")return!1;var D=C(I);if(!D)return j===null;var R=N.call(D,"constructor")&&D.constructor;return typeof R!="function"?j===null:j===R||j!==null&&$.call(R)===$.call(j)||typeof j=="function"&&typeof R.__typeson__type__=="string"&&R.__typeson__type__===j.__typeson__type__}function T(I){if(!I||d(I)!=="Object")return!1;var j=C(I);return j?k(I,Object):!0}function Y(I){if(!I||d(I)!=="Object")return!1;var j=C(I);return j?k(I,Object)||Y(j):!0}function q(I){return I&&n(I)==="object"}function oe(I){return I.replace(/~/g,"~0").replace(/\./g,"~1")}function re(I){return I.replace(/~1/g,".").replace(/~0/g,"~")}function ie(I,j){if(j==="")return I;var D=j.indexOf(".");if(D>-1){var R=I[re(j.slice(0,D))];return R===void 0?void 0:ie(R,j.slice(D+1))}return I[re(j)]}function se(I,j,D){if(j==="")return D;var R=j.indexOf(".");if(R>-1){var U=I[re(j.slice(0,R))];return se(U,j.slice(R+1),D)}return I[re(j)]=D,I}function ke(I){return I===null?"null":Array.isArray(I)?"array":n(I)}var Pe=Object.keys,Re=Array.isArray,Ke={}.hasOwnProperty,Ze=["type","replaced","iterateIn","iterateUnsetNumeric"];function H(I,j){if(I.keypath==="")return-1;var D=I.keypath.match(/\./g)||0,R=j.keypath.match(/\./g)||0;return D&&(D=D.length),R&&(R=R.length),D>R?-1:D<R?1:I.keypath<j.keypath?-1:I.keypath>j.keypath}var ve=function(){function I(j){o(this,I),this.options=j,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return c(I,[{key:"stringify",value:function(D,R,U,de){de=f({},this.options,{},de,{stringification:!0});var ye=this.encapsulate(D,null,de);return Re(ye)?JSON.stringify(ye[0],R,U):ye.then(function(fe){return JSON.stringify(fe,R,U)})}},{key:"stringifySync",value:function(D,R,U,de){return this.stringify(D,R,U,f({throwOnBadSyncType:!0},de,{sync:!0}))}},{key:"stringifyAsync",value:function(D,R,U,de){return this.stringify(D,R,U,f({throwOnBadSyncType:!0},de,{sync:!1}))}},{key:"parse",value:function(D,R,U){return U=f({},this.options,{},U,{parse:!0}),this.revive(JSON.parse(D,R),U)}},{key:"parseSync",value:function(D,R,U){return this.parse(D,R,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"parseAsync",value:function(D,R,U){return this.parse(D,R,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"specialTypeNames",value:function(D,R){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.returnTypeNames=!0,this.encapsulate(D,R,U)}},{key:"rootTypeName",value:function(D,R){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U.iterateNone=!0,this.encapsulate(D,R,U)}},{key:"encapsulate",value:function(D,R,U){U=f({sync:!0},this.options,{},U);var de=U,ye=de.sync,fe=this,G={},Ue=[],Ge=[],et=[],ft="cyclic"in U?U.cyclic:!0,dt=U,xt=dt.encapsulateObserver,tt=we("",D,ft,R||{},et);function ht(z){var y=Object.values(G);if(U.iterateNone)return y.length?y[0]:I.getJSONType(z);if(y.length){if(U.returnTypeNames)return m(new Set(y));!z||!T(z)||Ke.call(z,"$types")?z={$:z,$types:{$:G}}:z.$types=G}else q(z)&&Ke.call(z,"$types")&&(z={$:z,$types:!0});return U.returnTypeNames?!1:z}function Ie(z,y){return be.apply(this,arguments)}function be(){return be=i(regeneratorRuntime.mark(function z(y,u){var p;return regeneratorRuntime.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Promise.all(u.map(function(L){return L[1].p}));case 2:return p=O.sent,O.next=5,Promise.all(p.map(function(){var L=i(regeneratorRuntime.mark(function F(J){var M,ee,ce,ue,ge,pe,he,xe,Ee,ae,Me,V,K,Z;return regeneratorRuntime.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:if(M=[],ee=u.splice(0,1),ce=h(ee,1),ue=ce[0],ge=h(ue,7),pe=ge[0],he=ge[2],xe=ge[3],Ee=ge[4],ae=ge[5],Me=ge[6],V=we(pe,J,he,xe,M,!0,Me),K=k(V,x),!(pe&&K)){te.next=11;break}return te.next=8,V.p;case 8:return Z=te.sent,Ee[ae]=Z,te.abrupt("return",Ie(y,M));case 11:return pe?Ee[ae]=V:K?y=V.p:y=V,te.abrupt("return",Ie(y,M));case 13:case"end":return te.stop()}},F)}));return function(F){return L.apply(this,arguments)}}()));case 5:return O.abrupt("return",y);case 6:case"end":return O.stop()}},z)})),be.apply(this,arguments)}function me(z,y,u){Object.assign(z,y);var p=Ze.map(function(_){var O=z[_];return delete z[_],O});u(),Ze.forEach(function(_,O){z[_]=p[O]})}function we(z,y,u,p,_,O,L){var F,J={},M=n(y),ee=xt?function(K){var Z=L||p.type||I.getJSONType(y);xt(Object.assign(K||J,{keypath:z,value:y,cyclic:u,stateObj:p,promisesData:_,resolvingTypesonPromise:O,awaitingTypesonPromise:k(y,x)},{type:Z}))}:null;if(["string","boolean","number","undefined"].includes(M))return y===void 0||M==="number"&&(isNaN(y)||y===-1/0||y===1/0)?(p.replaced?F=y:F=Ne(z,y,p,_,!1,O,ee),F!==y&&(J={replaced:F})):F=y,ee&&ee(),F;if(y===null)return ee&&ee(),y;if(u&&!p.iterateIn&&!p.iterateUnsetNumeric&&y&&n(y)==="object"){var ce=Ue.indexOf(y);if(ce<0)u===!0&&(Ue.push(y),Ge.push(z));else return G[z]="#",ee&&ee({cyclicKeypath:Ge[ce]}),"#"+Ge[ce]}var ue=T(y),ge=Re(y),pe=(ue||ge)&&(!fe.plainObjectReplacers.length||p.replaced)||p.iterateIn?y:Ne(z,y,p,_,ue||ge,null,ee),he;if(pe!==y?(F=pe,J={replaced:pe}):z===""&&k(y,x)?(_.push([z,y,u,p,void 0,void 0,p.type]),F=y):ge&&p.iterateIn!=="object"||p.iterateIn==="array"?(he=new Array(y.length),J={clone:he}):!["function","symbol"].includes(n(y))&&!("toJSON"in y)&&!k(y,x)&&!k(y,Promise)&&!k(y,ArrayBuffer)||ue||p.iterateIn==="object"?(he={},p.addLength&&(he.length=y.length),J={clone:he}):F=y,ee&&ee(),U.iterateNone)return he||F;if(!he)return F;if(p.iterateIn){var xe=function(Z){var X={ownKeys:Ke.call(y,Z)};me(p,X,function(){var te=z+(z?".":"")+oe(Z),le=we(te,y[Z],!!u,p,_,O);k(le,x)?_.push([te,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})};for(var Ee in y)xe(Ee);ee&&ee({endIterateIn:!0,end:!0})}else Pe(y).forEach(function(K){var Z=z+(z?".":"")+oe(K),X={ownKeys:!0};me(p,X,function(){var te=we(Z,y[K],!!u,p,_,O);k(te,x)?_.push([Z,te,!!u,p,he,K,p.type]):te!==void 0&&(he[K]=te)})}),ee&&ee({endIterateOwn:!0,end:!0});if(p.iterateUnsetNumeric){for(var ae=y.length,Me=function(Z){if(!(Z in y)){var X=z+(z?".":"")+Z,te={ownKeys:!1};me(p,te,function(){var le=we(X,void 0,!!u,p,_,O);k(le,x)?_.push([X,le,!!u,p,he,Z,p.type]):le!==void 0&&(he[Z]=le)})}},V=0;V<ae;V++)Me(V);ee&&ee({endIterateUnsetNumeric:!0,end:!0})}return he}function Ne(z,y,u,p,_,O,L){for(var F=_?fe.plainObjectReplacers:fe.nonplainObjectReplacers,J=F.length;J--;){var M=F[J];if(M.test(y,u)){var ee=M.type;if(fe.revivers[ee]){var ce=G[z];G[z]=ce?[ee].concat(ce):ee}if(Object.assign(u,{type:ee,replaced:!0}),(ye||!M.replaceAsync)&&!M.replace)return L&&L({typeDetected:!0}),we(z,y,ft&&"readonly",u,p,O,ee);L&&L({replacing:!0});var ue=ye||!M.replaceAsync?"replace":"replaceAsync";return we(z,M[ue](y,u),ft&&"readonly",u,p,O,ee)}}return y}return et.length?ye&&U.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(Ie(tt,et)).then(ht):!ye&&U.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():U.stringification&&ye?[ht(tt)]:ye?ht(tt):Promise.resolve(ht(tt))}},{key:"encapsulateSync",value:function(D,R,U){return this.encapsulate(D,R,f({throwOnBadSyncType:!0},U,{sync:!0}))}},{key:"encapsulateAsync",value:function(D,R,U){return this.encapsulate(D,R,f({throwOnBadSyncType:!0},U,{sync:!1}))}},{key:"revive",value:function(D,R){var U=D&&D.$types;if(!U)return D;if(U===!0)return D.$;R=f({sync:!0},this.options,{},R);var de=R,ye=de.sync,fe=[],G={},Ue=!0;U.$&&T(U.$)&&(D=D.$,U=U.$,Ue=!1);var Ge=this;function et(be,me){var we=Ge.revivers[be]||[],Ne=h(we,1),z=Ne[0];if(!z)throw new Error("Unregistered type: "+be);return ye&&!("revive"in z)?me:z[ye&&z.revive?"revive":!ye&&z.reviveAsync?"reviveAsync":"revive"](me,G)}function ft(){var be=[];if(Object.entries(U).forEach(function(me){var we=h(me,2),Ne=we[0],z=we[1];z!=="#"&&[].concat(z).forEach(function(y){var u=Ge.revivers[y]||[null,{}],p=h(u,2),_=p[1].plain;_&&(be.push({keypath:Ne,type:y}),delete U[Ne])})}),!!be.length)return be.sort(H).reduce(function me(we,Ne){var z=Ne.keypath,y=Ne.type;if(v(we))return we.then(function(_){return me(_,{keypath:z,type:y})});var u=ie(D,z);if(u=et(y,u),k(u,x))return u.then(function(_){var O=se(D,z,_);O===_&&(D=O)});var p=se(D,z,u);p===u&&(D=p)},void 0)}var dt=[];function xt(be,me,we,Ne,z){if(!(Ue&&be==="$types")){var y=U[be],u=Re(me);if(u||T(me)){var p=u?new Array(me.length):{};for(Pe(me).forEach(function(ce){var ue=xt(be+(be?".":"")+oe(ce),me[ce],we||p,p,ce),ge=function(he){return k(he,Fe)?p[ce]=void 0:he!==void 0&&(p[ce]=he),he};k(ue,x)?dt.push(ue.then(function(pe){return ge(pe)})):ge(ue)}),me=p;fe.length;){var _=h(fe[0],4),O=_[0],L=_[1],F=_[2],J=_[3],M=ie(O,L);if(M!==void 0)F[J]=M;else break;fe.splice(0,1)}}if(!y)return me;if(y==="#"){var ee=ie(we,me.slice(1));return ee===void 0&&fe.push([we,me.slice(1),Ne,z]),ee}return[].concat(y).reduce(function ce(ue,ge){return k(ue,x)?ue.then(function(pe){return ce(pe,ge)}):et(ge,ue)},me)}}function tt(be){return k(be,Fe)?void 0:be}var ht=ft(),Ie;return k(ht,x)?Ie=ht.then(function(){return D}):(Ie=xt("",D,null),dt.length&&(Ie=x.resolve(Ie).then(function(be){return x.all([be].concat(dt))}).then(function(be){var me=h(be,1),we=me[0];return we}))),v(Ie)?ye&&R.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():k(Ie,x)?Ie.p.then(tt):Ie:!ye&&R.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ye?tt(Ie):Promise.resolve(tt(Ie))}},{key:"reviveSync",value:function(D,R){return this.revive(D,f({throwOnBadSyncType:!0},R,{sync:!0}))}},{key:"reviveAsync",value:function(D,R){return this.revive(D,f({throwOnBadSyncType:!0},R,{sync:!1}))}},{key:"register",value:function(D,R){return R=R||{},[].concat(D).forEach(function U(de){var ye=this;if(Re(de))return de.map(function(fe){return U.call(ye,fe)});de&&Pe(de).forEach(function(fe){if(fe==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(I.JSON_TYPES.includes(fe))throw new TypeError("Plain JSON object types are reserved as type names");var G=de[fe],Ue=G&&G.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ge=Ue.filter(function(we){return we.type===fe});if(Ge.length&&(Ue.splice(Ue.indexOf(Ge[0]),1),delete this.revivers[fe],delete this.types[fe]),typeof G=="function"){var et=G;G={test:function(Ne){return Ne&&Ne.constructor===et},replace:function(Ne){return f({},Ne)},revive:function(Ne){return Object.assign(Object.create(et.prototype),Ne)}}}else if(Re(G)){var ft=G,dt=h(ft,3),xt=dt[0],tt=dt[1],ht=dt[2];G={test:xt,replace:tt,revive:ht}}if(!(!G||!G.test)){var Ie={type:fe,test:G.test.bind(G)};G.replace&&(Ie.replace=G.replace.bind(G)),G.replaceAsync&&(Ie.replaceAsync=G.replaceAsync.bind(G));var be=typeof R.fallback=="number"?R.fallback:R.fallback?0:1/0;if(G.testPlainObjects?this.plainObjectReplacers.splice(be,0,Ie):this.nonplainObjectReplacers.splice(be,0,Ie),G.revive||G.reviveAsync){var me={};G.revive&&(me.revive=G.revive.bind(G)),G.reviveAsync&&(me.reviveAsync=G.reviveAsync.bind(G)),this.revivers[fe]=[me,{plain:G.testPlainObjects}]}this.types[fe]=G}},this)},this),this}}]),I}(),Fe=function I(){o(this,I)};return Fe.__typeson__type__="TypesonUndefined",ve.Undefined=Fe,ve.Promise=x,ve.isThenable=v,ve.toStringTag=d,ve.hasConstructorOf=k,ve.isObject=q,ve.isPlainObject=T,ve.isUserObject=Y,ve.escapeKeyPathComponent=oe,ve.unescapeKeyPathComponent=re,ve.getByKeyPath=ie,ve.getJSONType=ke,ve.JSON_TYPES=["null","boolean","number","string","array","object"],ve})}),Mc=to(function(e,t){(function(n,r){e.exports=r()})(Bi,function(){function n(y){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u})(y)}function r(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function i(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function o(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function s(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function c(y){return function(p){if(Array.isArray(p))return l(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||function(p,_){if(p){if(typeof p=="string")return l(p,_);var O=Object.prototype.toString.call(p).slice(8,-1);if(O==="Object"&&p.constructor&&(O=p.constructor.name),O==="Map"||O==="Set")return Array.from(p);if(O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return l(p,_)}}(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}function a(y){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p})(y)}function f(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function h(y,u){for(var p=0;p<u.length;p++){var _=u[p];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(y,_.key,_)}}function m(y,u,p){return u in y?Object.defineProperty(y,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[u]=p,y}function g(y,u){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(y);u&&(_=_.filter(function(O){return Object.getOwnPropertyDescriptor(y,O).enumerable})),p.push.apply(p,_)}return p}function w(y){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?g(Object(p),!0).forEach(function(_){m(y,_,p[_])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(p)):g(Object(p)).forEach(function(_){Object.defineProperty(y,_,Object.getOwnPropertyDescriptor(p,_))})}return y}function b(y,u){return function(_){if(Array.isArray(_))return _}(y)||function(_,O){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_)))){var L=[],F=!0,J=!1,M=void 0;try{for(var ee,ce=_[Symbol.iterator]();!(F=(ee=ce.next()).done)&&(L.push(ee.value),!O||L.length!==O);F=!0);}catch(ue){J=!0,M=ue}finally{try{F||ce.return==null||ce.return()}finally{if(J)throw M}}return L}}(y,u)||E(y,u)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function S(y){return function(p){if(Array.isArray(p))return A(p)}(y)||function(p){if(typeof Symbol<"u"&&Symbol.iterator in Object(p))return Array.from(p)}(y)||E(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(y,u){if(y){if(typeof y=="string")return A(y,u);var p=Object.prototype.toString.call(y).slice(8,-1);return p==="Object"&&y.constructor&&(p=y.constructor.name),p==="Map"||p==="Set"?Array.from(y):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?A(y,u):void 0}}function A(y,u){(u==null||u>y.length)&&(u=y.length);for(var p=0,_=new Array(u);p<u;p++)_[p]=y[p];return _}var x=function y(u){f(this,y),this.p=new Promise(u)};x.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(x.prototype[Symbol.toStringTag]="TypesonPromise"),x.prototype.then=function(y,u){var p=this;return new x(function(_,O){p.p.then(function(L){_(y?y(L):L)}).catch(function(L){return u?u(L):Promise.reject(L)}).then(_,O)})},x.prototype.catch=function(y){return this.then(null,y)},x.resolve=function(y){return new x(function(u){u(y)})},x.reject=function(y){return new x(function(u,p){p(y)})},["all","race"].forEach(function(y){x[y]=function(u){return new x(function(p,_){Promise[y](u.map(function(O){return O&&O.constructor&&O.constructor.__typeson__type__==="TypesonPromise"?O.p:O})).then(p,_)})}});var B={}.toString,P={}.hasOwnProperty,N=Object.getPrototypeOf,C=P.toString;function $(y,u){return T(y)&&typeof y.then=="function"&&(!u||typeof y.catch=="function")}function v(y){return B.call(y).slice(8,-1)}function d(y,u){if(!y||a(y)!=="object")return!1;var p=N(y);if(!p)return u===null;var _=P.call(p,"constructor")&&p.constructor;return typeof _!="function"?u===null:u===_||u!==null&&C.call(_)===C.call(u)||typeof u=="function"&&typeof _.__typeson__type__=="string"&&_.__typeson__type__===u.__typeson__type__}function k(y){return!(!y||v(y)!=="Object")&&(!N(y)||d(y,Object))}function T(y){return y&&a(y)==="object"}function Y(y){return y.replace(/~/g,"~0").replace(/\./g,"~1")}function q(y){return y.replace(/~1/g,".").replace(/~0/g,"~")}function oe(y,u){if(u==="")return y;var p=u.indexOf(".");if(p>-1){var _=y[q(u.slice(0,p))];return _===void 0?void 0:oe(_,u.slice(p+1))}return y[q(u)]}function re(y,u,p){if(u==="")return p;var _=u.indexOf(".");return _>-1?re(y[q(u.slice(0,_))],u.slice(_+1),p):(y[q(u)]=p,y)}function ie(y,u,p){return p?u?u(y):y:(y&&y.then||(y=Promise.resolve(y)),u?y.then(u):y)}var se=Object.keys,ke=Array.isArray,Pe={}.hasOwnProperty,Re=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ke(y){return function(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];try{return Promise.resolve(y.apply(this,u))}catch(_){return Promise.reject(_)}}}function Ze(y,u){if(y.keypath==="")return-1;var p=y.keypath.match(/\./g)||0,_=u.keypath.match(/\./g)||0;return p&&(p=p.length),_&&(_=_.length),p>_?-1:p<_?1:y.keypath<u.keypath?-1:y.keypath>u.keypath}var H=function(){function y(u){f(this,y),this.options=u,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function(p,_,O){return _&&h(p.prototype,_),O&&h(p,O),p}(y,[{key:"stringify",value:function(p,_,O,L){L=w(w(w({},this.options),L),{},{stringification:!0});var F=this.encapsulate(p,null,L);return ke(F)?JSON.stringify(F[0],_,O):F.then(function(J){return JSON.stringify(J,_,O)})}},{key:"stringifySync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!0}))}},{key:"stringifyAsync",value:function(p,_,O,L){return this.stringify(p,_,O,w(w({throwOnBadSyncType:!0},L),{},{sync:!1}))}},{key:"parse",value:function(p,_,O){return O=w(w(w({},this.options),O),{},{parse:!0}),this.revive(JSON.parse(p,_),O)}},{key:"parseSync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"parseAsync",value:function(p,_,O){return this.parse(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"specialTypeNames",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.returnTypeNames=!0,this.encapsulate(p,_,O)}},{key:"rootTypeName",value:function(p,_){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.iterateNone=!0,this.encapsulate(p,_,O)}},{key:"encapsulate",value:function(p,_,O){var L=Ke(function(V,K){return ie(Promise.all(K.map(function(Z){return Z[1].p})),function(Z){return ie(Promise.all(Z.map(Ke(function(X){var te=!1,le=[],nt=b(K.splice(0,1),1),Be=b(nt[0],7),Xe=Be[0],ct=Be[2],_e=Be[3],ut=Be[4],Ae=Be[5],rt=Be[6],Ye=ae(Xe,X,ct,_e,le,!0,rt),pt=d(Ye,x);return function(zr,or){var sn=zr();return sn&&sn.then?sn.then(or):or(sn)}(function(){if(Xe&&pt)return ie(Ye.p,function(yt){return ut[Ae]=yt,te=!0,L(V,le)})},function(yt){return te?yt:(Xe?ut[Ae]=Ye:V=pt?Ye.p:Ye,L(V,le))})}))),function(){return V})})}),F=(O=w(w({sync:!0},this.options),O)).sync,J=this,M={},ee=[],ce=[],ue=[],ge=!("cyclic"in O)||O.cyclic,pe=O.encapsulateObserver,he=ae("",p,ge,_||{},ue);function xe(V){var K=Object.values(M);if(O.iterateNone)return K.length?K[0]:y.getJSONType(V);if(K.length){if(O.returnTypeNames)return S(new Set(K));V&&k(V)&&!Pe.call(V,"$types")?V.$types=M:V={$:V,$types:{$:M}}}else T(V)&&Pe.call(V,"$types")&&(V={$:V,$types:!0});return!O.returnTypeNames&&V}function Ee(V,K,Z){Object.assign(V,K);var X=Re.map(function(te){var le=V[te];return delete V[te],le});Z(),Re.forEach(function(te,le){V[te]=X[le]})}function ae(V,K,Z,X,te,le,nt){var Be,Xe={},ct=a(K),_e=pe?function(Dt){var ze=nt||X.type||y.getJSONType(K);pe(Object.assign(Dt||Xe,{keypath:V,value:K,cyclic:Z,stateObj:X,promisesData:te,resolvingTypesonPromise:le,awaitingTypesonPromise:d(K,x)},{type:ze}))}:null;if(["string","boolean","number","undefined"].includes(ct))return K===void 0||Number.isNaN(K)||K===Number.NEGATIVE_INFINITY||K===Number.POSITIVE_INFINITY?(Be=X.replaced?K:Me(V,K,X,te,!1,le,_e))!==K&&(Xe={replaced:Be}):Be=K,_e&&_e(),Be;if(K===null)return _e&&_e(),K;if(Z&&!X.iterateIn&&!X.iterateUnsetNumeric&&K&&a(K)==="object"){var ut=ee.indexOf(K);if(!(ut<0))return M[V]="#",_e&&_e({cyclicKeypath:ce[ut]}),"#"+ce[ut];Z===!0&&(ee.push(K),ce.push(V))}var Ae,rt=k(K),Ye=ke(K),pt=(rt||Ye)&&(!J.plainObjectReplacers.length||X.replaced)||X.iterateIn?K:Me(V,K,X,te,rt||Ye,null,_e);if(pt!==K?(Be=pt,Xe={replaced:pt}):V===""&&d(K,x)?(te.push([V,K,Z,X,void 0,void 0,X.type]),Be=K):Ye&&X.iterateIn!=="object"||X.iterateIn==="array"?(Ae=new Array(K.length),Xe={clone:Ae}):(["function","symbol"].includes(a(K))||"toJSON"in K||d(K,x)||d(K,Promise)||d(K,ArrayBuffer))&&!rt&&X.iterateIn!=="object"?Be=K:(Ae={},X.addLength&&(Ae.length=K.length),Xe={clone:Ae}),_e&&_e(),O.iterateNone)return Ae||Be;if(!Ae)return Be;if(X.iterateIn){var yt=function(ze){var Et={ownKeys:Pe.call(K,ze)};Ee(X,Et,function(){var Yt=V+(V?".":"")+Y(ze),sr=ae(Yt,K[ze],!!Z,X,te,le);d(sr,x)?te.push([Yt,sr,!!Z,X,Ae,ze,X.type]):sr!==void 0&&(Ae[ze]=sr)})};for(var zr in K)yt(zr);_e&&_e({endIterateIn:!0,end:!0})}else se(K).forEach(function(Dt){var ze=V+(V?".":"")+Y(Dt);Ee(X,{ownKeys:!0},function(){var Et=ae(ze,K[Dt],!!Z,X,te,le);d(Et,x)?te.push([ze,Et,!!Z,X,Ae,Dt,X.type]):Et!==void 0&&(Ae[Dt]=Et)})}),_e&&_e({endIterateOwn:!0,end:!0});if(X.iterateUnsetNumeric){for(var or=K.length,sn=function(ze){if(!(ze in K)){var Et=V+(V?".":"")+ze;Ee(X,{ownKeys:!1},function(){var Yt=ae(Et,void 0,!!Z,X,te,le);d(Yt,x)?te.push([Et,Yt,!!Z,X,Ae,ze,X.type]):Yt!==void 0&&(Ae[ze]=Yt)})}},Jr=0;Jr<or;Jr++)sn(Jr);_e&&_e({endIterateUnsetNumeric:!0,end:!0})}return Ae}function Me(V,K,Z,X,te,le,nt){for(var Be=te?J.plainObjectReplacers:J.nonplainObjectReplacers,Xe=Be.length;Xe--;){var ct=Be[Xe];if(ct.test(K,Z)){var _e=ct.type;if(J.revivers[_e]){var ut=M[V];M[V]=ut?[_e].concat(ut):_e}return Object.assign(Z,{type:_e,replaced:!0}),!F&&ct.replaceAsync||ct.replace?(nt&&nt({replacing:!0}),ae(V,ct[F||!ct.replaceAsync?"replace":"replaceAsync"](K,Z),ge&&"readonly",Z,X,le,_e)):(nt&&nt({typeDetected:!0}),ae(V,K,ge&&"readonly",Z,X,le,_e))}}return K}return ue.length?F&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(L(he,ue)).then(xe):!F&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():O.stringification&&F?[xe(he)]:F?xe(he):Promise.resolve(xe(he))}},{key:"encapsulateSync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(p,_,O){return this.encapsulate(p,_,w(w({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"revive",value:function(p,_){var O=p&&p.$types;if(!O)return p;if(O===!0)return p.$;var L=(_=w(w({sync:!0},this.options),_)).sync,F=[],J={},M=!0;O.$&&k(O.$)&&(p=p.$,O=O.$,M=!1);var ee=this;function ce(xe,Ee){var ae=b(ee.revivers[xe]||[],1)[0];if(!ae)throw new Error("Unregistered type: "+xe);return L&&!("revive"in ae)?Ee:ae[L&&ae.revive?"revive":!L&&ae.reviveAsync?"reviveAsync":"revive"](Ee,J)}var ue=[];function ge(xe){return d(xe,ve)?void 0:xe}var pe,he=function(){var Ee=[];if(Object.entries(O).forEach(function(ae){var Me=b(ae,2),V=Me[0],K=Me[1];K!=="#"&&[].concat(K).forEach(function(Z){b(ee.revivers[Z]||[null,{}],2)[1].plain&&(Ee.push({keypath:V,type:Z}),delete O[V])})}),Ee.length)return Ee.sort(Ze).reduce(function ae(Me,V){var K=V.keypath,Z=V.type;if($(Me))return Me.then(function(le){return ae(le,{keypath:K,type:Z})});var X=oe(p,K);if(d(X=ce(Z,X),x))return X.then(function(le){var nt=re(p,K,le);nt===le&&(p=nt)});var te=re(p,K,X);te===X&&(p=te)},void 0)}();return d(he,x)?pe=he.then(function(){return p}):(pe=function xe(Ee,ae,Me,V,K){if(!M||Ee!=="$types"){var Z=O[Ee],X=ke(ae);if(X||k(ae)){var te=X?new Array(ae.length):{};for(se(ae).forEach(function(Ae){var rt=xe(Ee+(Ee?".":"")+Y(Ae),ae[Ae],Me||te,te,Ae),Ye=function(yt){return d(yt,ve)?te[Ae]=void 0:yt!==void 0&&(te[Ae]=yt),yt};d(rt,x)?ue.push(rt.then(function(pt){return Ye(pt)})):Ye(rt)}),ae=te;F.length;){var le=b(F[0],4),nt=le[0],Be=le[1],Xe=le[2],ct=le[3],_e=oe(nt,Be);if(_e===void 0)break;Xe[ct]=_e,F.splice(0,1)}}if(!Z)return ae;if(Z==="#"){var ut=oe(Me,ae.slice(1));return ut===void 0&&F.push([Me,ae.slice(1),V,K]),ut}return[].concat(Z).reduce(function Ae(rt,Ye){return d(rt,x)?rt.then(function(pt){return Ae(pt,Ye)}):ce(Ye,rt)},ae)}}("",p,null),ue.length&&(pe=x.resolve(pe).then(function(xe){return x.all([xe].concat(ue))}).then(function(xe){return b(xe,1)[0]}))),$(pe)?L&&_.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():d(pe,x)?pe.p.then(ge):pe:!L&&_.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():L?ge(pe):Promise.resolve(ge(pe))}},{key:"reviveSync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!0}))}},{key:"reviveAsync",value:function(p,_){return this.revive(p,w(w({throwOnBadSyncType:!0},_),{},{sync:!1}))}},{key:"register",value:function(p,_){return _=_||{},[].concat(p).forEach(function O(L){var F=this;if(ke(L))return L.map(function(J){return O.call(F,J)});L&&se(L).forEach(function(J){if(J==="#")throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(y.JSON_TYPES.includes(J))throw new TypeError("Plain JSON object types are reserved as type names");var M=L[J],ee=M&&M.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,ce=ee.filter(function(Ee){return Ee.type===J});if(ce.length&&(ee.splice(ee.indexOf(ce[0]),1),delete this.revivers[J],delete this.types[J]),typeof M=="function"){var ue=M;M={test:function(ae){return ae&&ae.constructor===ue},replace:function(ae){return w({},ae)},revive:function(ae){return Object.assign(Object.create(ue.prototype),ae)}}}else if(ke(M)){var ge=b(M,3);M={test:ge[0],replace:ge[1],revive:ge[2]}}if(M&&M.test){var pe={type:J,test:M.test.bind(M)};M.replace&&(pe.replace=M.replace.bind(M)),M.replaceAsync&&(pe.replaceAsync=M.replaceAsync.bind(M));var he=typeof _.fallback=="number"?_.fallback:_.fallback?0:Number.POSITIVE_INFINITY;if(M.testPlainObjects?this.plainObjectReplacers.splice(he,0,pe):this.nonplainObjectReplacers.splice(he,0,pe),M.revive||M.reviveAsync){var xe={};M.revive&&(xe.revive=M.revive.bind(M)),M.reviveAsync&&(xe.reviveAsync=M.reviveAsync.bind(M)),this.revivers[J]=[xe,{plain:M.testPlainObjects}]}this.types[J]=M}},this)},this),this}}]),y}(),ve=function y(){f(this,y)};ve.__typeson__type__="TypesonUndefined",H.Undefined=ve,H.Promise=x,H.isThenable=$,H.toStringTag=v,H.hasConstructorOf=d,H.isObject=T,H.isPlainObject=k,H.isUserObject=function y(u){if(!u||v(u)!=="Object")return!1;var p=N(u);return!p||d(u,Object)||y(p)},H.escapeKeyPathComponent=Y,H.unescapeKeyPathComponent=q,H.getByKeyPath=oe,H.getJSONType=function(u){return u===null?"null":Array.isArray(u)?"array":a(u)},H.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Fe={userObject:{test:function(u,p){return H.isUserObject(u)},replace:function(u){return function(_){for(var O=1;O<arguments.length;O++){var L=arguments[O]!=null?arguments[O]:{};O%2?s(Object(L),!0).forEach(function(F){o(_,F,L[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(L)):s(Object(L)).forEach(function(F){Object.defineProperty(_,F,Object.getOwnPropertyDescriptor(L,F))})}return _}({},u)},revive:function(u){return u}}},I=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(u,p){return!!Array.isArray(u)&&(Object.keys(u).some(function(_){return String(Number.parseInt(_))!==_})&&(p.iterateIn="object",p.addLength=!0),!0)},replace:function(u,p){return p.iterateUnsetNumeric=!0,u},revive:function(u){if(Array.isArray(u))return u;var p=[];return Object.keys(u).forEach(function(_){var O=u[_];p[_]=O}),p}}},{sparseUndefined:{test:function(u,p){return u===void 0&&p.ownKeys===!1},replace:function(u){return 0},revive:function(u){}}}],j={undef:{test:function(u,p){return u===void 0&&(p.ownKeys||!("ownKeys"in p))},replace:function(u){return 0},revive:function(u){return new H.Undefined}}},D={StringObject:{test:function(u){return H.toStringTag(u)==="String"&&n(u)==="object"},replace:function(u){return String(u)},revive:function(u){return new String(u)}},BooleanObject:{test:function(u){return H.toStringTag(u)==="Boolean"&&n(u)==="object"},replace:function(u){return!!u},revive:function(u){return new Boolean(u)}},NumberObject:{test:function(u){return H.toStringTag(u)==="Number"&&n(u)==="object"},replace:function(u){return Number(u)},revive:function(u){return new Number(u)}}},R=[{nan:{test:function(u){return Number.isNaN(u)},replace:function(u){return"NaN"},revive:function(u){return Number.NaN}}},{infinity:{test:function(u){return u===Number.POSITIVE_INFINITY},replace:function(u){return"Infinity"},revive:function(u){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(u){return u===Number.NEGATIVE_INFINITY},replace:function(u){return"-Infinity"},revive:function(u){return Number.NEGATIVE_INFINITY}}}],U={date:{test:function(u){return H.toStringTag(u)==="Date"},replace:function(u){var p=u.getTime();return Number.isNaN(p)?"NaN":p},revive:function(u){return u==="NaN"?new Date(Number.NaN):new Date(u)}}},de={regexp:{test:function(u){return H.toStringTag(u)==="RegExp"},replace:function(u){return{source:u.source,flags:(u.global?"g":"")+(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.sticky?"y":"")+(u.unicode?"u":"")}},revive:function(u){var p=u.source,_=u.flags;return new RegExp(p,_)}}},ye={map:{test:function(u){return H.toStringTag(u)==="Map"},replace:function(u){return c(u.entries())},revive:function(u){return new Map(u)}}},fe={set:{test:function(u){return H.toStringTag(u)==="Set"},replace:function(u){return c(u.values())},revive:function(u){return new Set(u)}}},G="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ue=new Uint8Array(256),Ge=0;Ge<G.length;Ge++)Ue[G.charCodeAt(Ge)]=Ge;var et=function(u,p,_){_==null&&(_=u.byteLength);for(var O=new Uint8Array(u,p||0,_),L=O.length,F="",J=0;J<L;J+=3)F+=G[O[J]>>2],F+=G[(3&O[J])<<4|O[J+1]>>4],F+=G[(15&O[J+1])<<2|O[J+2]>>6],F+=G[63&O[J+2]];return L%3==2?F=F.slice(0,-1)+"=":L%3==1&&(F=F.slice(0,-2)+"=="),F},ft=function(u){var p,_,O,L,F=u.length,J=.75*u.length,M=0;u[u.length-1]==="="&&(J--,u[u.length-2]==="="&&J--);for(var ee=new ArrayBuffer(J),ce=new Uint8Array(ee),ue=0;ue<F;ue+=4)p=Ue[u.charCodeAt(ue)],_=Ue[u.charCodeAt(ue+1)],O=Ue[u.charCodeAt(ue+2)],L=Ue[u.charCodeAt(ue+3)],ce[M++]=p<<2|_>>4,ce[M++]=(15&_)<<4|O>>2,ce[M++]=(3&O)<<6|63&L;return ee},dt={arraybuffer:{test:function(u){return H.toStringTag(u)==="ArrayBuffer"},replace:function(u,p){p.buffers||(p.buffers=[]);var _=p.buffers.indexOf(u);return _>-1?{index:_}:(p.buffers.push(u),et(u))},revive:function(u,p){if(p.buffers||(p.buffers=[]),n(u)==="object")return p.buffers[u.index];var _=ft(u);return p.buffers.push(_),_}}},xt=typeof self>"u"?Bi:self,tt={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(y){var u=y,p=xt[u];p&&(tt[y.toLowerCase()]={test:function(O){return H.toStringTag(O)===u},replace:function(O,L){var F=O.buffer,J=O.byteOffset,M=O.length;L.buffers||(L.buffers=[]);var ee=L.buffers.indexOf(F);return ee>-1?{index:ee,byteOffset:J,length:M}:(L.buffers.push(F),{encoded:et(F),byteOffset:J,length:M})},revive:function(O,L){L.buffers||(L.buffers=[]);var F,J=O.byteOffset,M=O.length,ee=O.encoded,ce=O.index;return"index"in O?F=L.buffers[ce]:(F=ft(ee),L.buffers.push(F)),new p(F,J,M)}})});var ht={dataview:{test:function(u){return H.toStringTag(u)==="DataView"},replace:function(u,p){var _=u.buffer,O=u.byteOffset,L=u.byteLength;p.buffers||(p.buffers=[]);var F=p.buffers.indexOf(_);return F>-1?{index:F,byteOffset:O,byteLength:L}:(p.buffers.push(_),{encoded:et(_),byteOffset:O,byteLength:L})},revive:function(u,p){p.buffers||(p.buffers=[]);var _,O=u.byteOffset,L=u.byteLength,F=u.encoded,J=u.index;return"index"in u?_=p.buffers[J]:(_=ft(F),p.buffers.push(_)),new DataView(_,O,L)}}},Ie={IntlCollator:{test:function(u){return H.hasConstructorOf(u,Intl.Collator)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.Collator(u.locale,u)}},IntlDateTimeFormat:{test:function(u){return H.hasConstructorOf(u,Intl.DateTimeFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.DateTimeFormat(u.locale,u)}},IntlNumberFormat:{test:function(u){return H.hasConstructorOf(u,Intl.NumberFormat)},replace:function(u){return u.resolvedOptions()},revive:function(u){return new Intl.NumberFormat(u.locale,u)}}};function be(y){for(var u=new Uint8Array(y.length),p=0;p<y.length;p++)u[p]=y.charCodeAt(p);return u.buffer}var me={file:{test:function(u){return H.toStringTag(u)==="File"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad File access: "+p.status);return{type:u.type,stringContents:p.responseText,name:u.name,lastModified:u.lastModified}},revive:function(u){var p=u.name,_=u.type,O=u.stringContents,L=u.lastModified;return new File([be(O)],p,{type:_,lastModified:L})},replaceAsync:function(u){return new H.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result,name:u.name,lastModified:u.lastModified})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}},we={bigint:{test:function(u){return typeof u=="bigint"},replace:function(u){return String(u)},revive:function(u){return BigInt(u)}}},Ne={bigintObject:{test:function(u){return n(u)==="object"&&H.hasConstructorOf(u,BigInt)},replace:function(u){return String(u)},revive:function(u){return new Object(BigInt(u))}}},z={cryptokey:{test:function(u){return H.toStringTag(u)==="CryptoKey"&&u.extractable},replaceAsync:function(u){return new H.Promise(function(p,_){crypto.subtle.exportKey("jwk",u).catch(function(O){_(O)}).then(function(O){p({jwk:O,algorithm:u.algorithm,usages:u.usages})})})},revive:function(u){var p=u.jwk,_=u.algorithm,O=u.usages;return crypto.subtle.importKey("jwk",p,_,!0,O)}}};return[Fe,j,I,D,R,U,de,{imagedata:{test:function(u){return H.toStringTag(u)==="ImageData"},replace:function(u){return{array:c(u.data),width:u.width,height:u.height}},revive:function(u){return new ImageData(new Uint8ClampedArray(u.array),u.width,u.height)}}},{imagebitmap:{test:function(u){return H.toStringTag(u)==="ImageBitmap"||u&&u.dataset&&u.dataset.toStringTag==="ImageBitmap"},replace:function(u){var p=document.createElement("canvas");return p.getContext("2d").drawImage(u,0,0),p.toDataURL()},revive:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,p},reviveAsync:function(u){var p=document.createElement("canvas"),_=p.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){_.drawImage(O,0,0)}),O.src=u,createImageBitmap(p)}}},me,{file:me.file,filelist:{test:function(u){return H.toStringTag(u)==="FileList"},replace:function(u){for(var p=[],_=0;_<u.length;_++)p[_]=u.item(_);return p},revive:function(u){return new(function(){function p(){r(this,p),this._files=arguments[0],this.length=this._files.length}return function(O,L,F){return L&&i(O.prototype,L),F&&i(O,F),O}(p,[{key:"item",value:function(O){return this._files[O]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}]),p}())(u)}}},{blob:{test:function(u){return H.toStringTag(u)==="Blob"},replace:function(u){var p=new XMLHttpRequest;if(p.overrideMimeType("text/plain; charset=x-user-defined"),p.open("GET",URL.createObjectURL(u),!1),p.send(),p.status!==200&&p.status!==0)throw new Error("Bad Blob access: "+p.status);return{type:u.type,stringContents:p.responseText}},revive:function(u){var p=u.type,_=u.stringContents;return new Blob([be(_)],{type:p})},replaceAsync:function(u){return new H.Promise(function(p,_){var O=new FileReader;O.addEventListener("load",function(){p({type:u.type,stringContents:O.result})}),O.addEventListener("error",function(){_(O.error)}),O.readAsBinaryString(u)})}}}].concat(typeof Map=="function"?ye:[],typeof Set=="function"?fe:[],typeof ArrayBuffer=="function"?dt:[],typeof Uint8Array=="function"?tt:[],typeof DataView=="function"?ht:[],typeof Intl<"u"?Ie:[],typeof crypto<"u"?z:[],typeof BigInt<"u"?[we,Ne]:[])})}),hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",In=new Uint8Array(256);for(var mr=0;mr<hn.length;mr++)In[hn.codePointAt(mr)]=mr;var ji=function(t,n,r){r==null&&(r=t.byteLength);for(var i=new Uint8Array(t,n||0,r),o=i.length,s="",c=0;c<o;c+=3)s+=hn[i[c]>>2],s+=hn[(i[c]&3)<<4|i[c+1]>>4],s+=hn[(i[c+1]&15)<<2|i[c+2]>>6],s+=hn[i[c+2]&63];return o%3===2?s=s.slice(0,-1)+"=":o%3===1&&(s=s.slice(0,-2)+"=="),s},js=function(t){var n=t.length,r=t.length*.75,i=0,o,s,c,l;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);for(var a=new ArrayBuffer(r),f=new Uint8Array(a),h=0;h<n;h+=4)o=In[t.codePointAt(h)],s=In[t.codePointAt(h+1)],c=In[t.codePointAt(h+2)],l=In[t.codePointAt(h+3)],f[i++]=o<<2|s>>4,f[i++]=(s&15)<<4|c>>2,f[i++]=(c&3)<<6|l&63;return a},qc=typeof self>"u"?global:self,Ds={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(e){var t=e,n=qc[t];n&&(Ds[e.toLowerCase()+"2"]={test:function(r){return Vr.toStringTag(r)===t},replace:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return{buffer:i,byteOffset:o,length:s}},revive:function(r){var i=r.buffer,o=r.byteOffset,s=r.length;return new n(i,o,s)}})});var Wc={arraybuffer:{test:function(e){return Vr.toStringTag(e)==="ArrayBuffer"},replace:function(e){return ji(e,0,e.byteLength)},revive:function(e){var t=js(e);return t}}},lt=new Vr().register(Mc),Vc="FileReaderSync"in self,Lr=[],ri=0;lt.register([Wc,Ds,{blob2:{test:function(e){return Vr.toStringTag(e)==="Blob"},replace:function(e){if(e.isClosed)throw new Error("The Blob is closed");if(Vc){var t=Bs(e,"binary"),n=ji(t,0,t.byteLength);return{type:e.type,data:n}}else{Lr.push(e);var r={type:e.type,data:{start:ri,end:ri+e.size}};return ri+=e.size,r}},finalize:function(e,t){e.data=ji(t,0,t.byteLength)},revive:function(e){var t=e.type,n=e.data;return new Blob([js(n)],{type:t})}}}]);lt.mustFinalize=function(){return Lr.length>0};lt.finalize=function(e){return qt(void 0,void 0,void 0,function(){var t,n,r,i,o,s,c,l,a,f;return mt(this,function(h){switch(h.label){case 0:return[4,Ns(new Blob(Lr),"binary")];case 1:if(t=h.sent(),e){for(n=0,r=e;n<r.length;n++)if(i=r[n],i.$types){o=i.$types,s=o.$,s&&(o=o.$);for(c in o)l=o[c],a=lt.types[l],a&&a.finalize&&(f=Ce.getByKeyPath(i,s?"$."+c:c),a.finalize(f,t.slice(f.start,f.end)))}}return Lr=[],[2]}})})};var Yc=2e3;function Rs(e,t){return qt(this,void 0,void 0,function(){function n(){return qt(this,void 0,void 0,function(){var a,f,h,m,g,w,b,S,E;return mt(this,function(A){switch(A.label){case 0:return[4,Promise.all(e.tables.map(function(x){return x.count()}))];case 1:a=A.sent(),a.forEach(function(x,B){return i[B].rowCount=x}),l.totalRows=a.reduce(function(x,B){return x+B}),f=JSON.stringify(s,void 0,o?2:void 0),h=f.lastIndexOf("]"),m=f.substring(0,h),r.push(m),g=t.filter,w=function(x){var B,P,N,C,$,v,d,k,T,Y,q,oe;return mt(this,function(re){switch(re.label){case 0:B=e.table(x),P=B.schema.primKey,N=!!P.keyPath,C=t.numRowsPerChunk||Yc,$=N?{tableName:B.name,inbound:!0,rows:[]}:{tableName:B.name,inbound:!1,rows:[]},v=JSON.stringify($,void 0,o?2:void 0),o&&(v=v.split(`
`).join(`
    `)),d=v.lastIndexOf("]"),r.push(v.substring(0,d)),k=null,T=0,Y=!0,q=function(){var ie,se,ke,Pe,H,Re,Ke,Ze,H;return mt(this,function(ve){switch(ve.label){case 0:return c&&Ce.ignoreTransaction(function(){return c(l)}),ie=k==null?B.limit(C):B.where(":id").above(k).limit(C),[4,ie.toArray()];case 1:return se=ve.sent(),se.length===0?[2,"break"]:(k!=null&&T>0&&(r.push(","),o&&r.push(`
      `)),Y=se.length===C,N?(ke=g?se.filter(function(Fe){return g(x,Fe)}):se,Pe=ke.map(function(Fe){return lt.encapsulate(Fe)}),lt.mustFinalize()?[4,Ce.waitFor(lt.finalize(Pe))]:[3,3]):[3,4]);case 2:ve.sent(),ve.label=3;case 3:return H=JSON.stringify(Pe,void 0,o?2:void 0),o&&(H=H.split(`
`).join(`
      `)),r.push(new Blob([H.substring(1,H.length-1)])),T=ke.length,k=se.length>0?Ce.getByKeyPath(se[se.length-1],P.keyPath):null,[3,8];case 4:return[4,ie.primaryKeys()];case 5:return Re=ve.sent(),Ke=Re.map(function(Fe,I){return[Fe,se[I]]}),g&&(Ke=Ke.filter(function(Fe){var I=Fe[0],j=Fe[1];return g(x,j,I)})),Ze=Ke.map(function(Fe){return lt.encapsulate(Fe)}),lt.mustFinalize()?[4,Ce.waitFor(lt.finalize(Ze))]:[3,7];case 6:ve.sent(),ve.label=7;case 7:H=JSON.stringify(Ze,void 0,o?2:void 0),o&&(H=H.split(`
`).join(`
      `)),r.push(new Blob([H.substring(1,H.length-1)])),T=Ke.length,k=Re.length>0?Re[Re.length-1]:null,ve.label=8;case 8:return l.completedRows+=se.length,[2]}})},re.label=1;case 1:return Y?[5,q()]:[3,3];case 2:return oe=re.sent(),oe==="break"?[3,3]:[3,1];case 3:return r.push(v.substr(d)),l.completedTables+=1,l.completedTables<l.totalTables&&r.push(","),[2]}})},b=0,S=i,A.label=2;case 2:return b<S.length?(E=S[b].name,[5,w(E)]):[3,5];case 3:A.sent(),A.label=4;case 4:return b++,[3,2];case 5:return r.push(f.substr(h)),l.done=!0,c&&Ce.ignoreTransaction(function(){return c(l)}),[2]}})})}var r,i,o,s,c,l;return mt(this,function(a){switch(a.label){case 0:t=t||{},r=[],i=e.tables.map(function(f){return{name:f.name,schema:Fc(f),rowCount:0}}),o=t.prettyJson,s={formatName:"dexie",formatVersion:1,data:{databaseName:e.name,databaseVersion:e.verno,tables:i,data:[]}},c=t.progressCallback,l={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:e.tables.length},a.label=1;case 1:return a.trys.push([1,,6,7]),t.noTransaction?[4,n()]:[3,3];case 2:return a.sent(),[3,5];case 3:return[4,e.transaction("r",e.tables,n)];case 4:a.sent(),a.label=5;case 5:return[3,7];case 6:return lt.finalize(),[7];case 7:return[2,new Blob(r,{type:"text/json"})]}})})}var zc=1,Jc={Stream:function(){}},Hc=to(function(e,t){(function(n){var r=typeof process=="object"&&process.env?process.env:self;n.parser=function(v){return new g(v)},n.CParser=g,n.CStream=b,n.createStream=w,n.MAX_BUFFER_LENGTH=10*1024*1024,n.DEBUG=r.CDEBUG==="debug",n.INFO=r.CDEBUG==="debug"||r.CDEBUG==="info",n.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var i={textNode:void 0,numberNode:""},o=n.EVENTS.filter(function(v){return v!=="error"&&v!=="end"}),s=0,c;n.STATE={BEGIN:s++,VALUE:s++,OPEN_OBJECT:s++,CLOSE_OBJECT:s++,OPEN_ARRAY:s++,CLOSE_ARRAY:s++,TEXT_ESCAPE:s++,STRING:s++,BACKSLASH:s++,END:s++,OPEN_KEY:s++,CLOSE_KEY:s++,TRUE:s++,TRUE2:s++,TRUE3:s++,FALSE:s++,FALSE2:s++,FALSE3:s++,FALSE4:s++,NULL:s++,NULL2:s++,NULL3:s++,NUMBER_DECIMAL_POINT:s++,NUMBER_DIGIT:s++};for(var l in n.STATE)n.STATE[n.STATE[l]]=l;s=n.STATE;const a={tab:9,lineFeed:10,carriageReturn:13,space:32,doubleQuote:34,plus:43,comma:44,minus:45,period:46,_0:48,_9:57,colon:58,E:69,openBracket:91,backslash:92,closeBracket:93,a:97,b:98,e:101,f:102,l:108,n:110,r:114,s:115,t:116,u:117,openBrace:123,closeBrace:125};Object.create||(Object.create=function(v){function d(){this.__proto__=v}return d.prototype=v,new d}),Object.getPrototypeOf||(Object.getPrototypeOf=function(v){return v.__proto__}),Object.keys||(Object.keys=function(v){var d=[];for(var k in v)v.hasOwnProperty(k)&&d.push(k);return d});function f(v){var d=Math.max(n.MAX_BUFFER_LENGTH,10),k=0;for(var T in i){var Y=v[T]===void 0?0:v[T].length;if(Y>d)switch(T){case"text":closeText(v);break;default:P(v,"Max buffer length exceeded: "+T)}k=Math.max(k,Y)}v.bufferCheckPosition=n.MAX_BUFFER_LENGTH-k+v.position}function h(v){for(var d in i)v[d]=i[d]}var m=/[\\"\n]/g;function g(v){if(!(this instanceof g))return new g(v);var d=this;h(d),d.bufferCheckPosition=n.MAX_BUFFER_LENGTH,d.q=d.c=d.p="",d.opt=v||{},d.closed=d.closedRoot=d.sawRoot=!1,d.tag=d.error=null,d.state=s.BEGIN,d.stack=new Array,d.position=d.column=0,d.line=1,d.slashed=!1,d.unicodeI=0,d.unicodeS=null,d.depth=0,S(d,"onready")}g.prototype={end:function(){N(this)},write:$,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{c=Jc.Stream}catch{c=function(){}}function w(v){return new b(v)}function b(v){if(!(this instanceof b))return new b(v);this._parser=new g(v),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var d=this;c.apply(d),this._parser.onend=function(){d.emit("end")},this._parser.onerror=function(k){d.emit("error",k),d._parser.error=null},o.forEach(function(k){Object.defineProperty(d,"on"+k,{get:function(){return d._parser["on"+k]},set:function(T){if(!T)return d.removeAllListeners(k),d._parser["on"+k]=T,T;d.on(k,T)},enumerable:!0,configurable:!1})})}b.prototype=Object.create(c.prototype,{constructor:{value:b}}),b.prototype.write=function(v){v=new Buffer(v);for(var d=0;d<v.length;d++){var k=v[d];if(this.bytes_remaining>0){for(var T=0;T<this.bytes_remaining;T++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+T]=v[T];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,d=d+T-1,this._parser.write(this.string),this.emit("data",this.string);continue}if(this.bytes_remaining===0&&k>=128)if(k>=194&&k<=223&&(this.bytes_in_sequence=2),k>=224&&k<=239&&(this.bytes_in_sequence=3),k>=240&&k<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+d>v.length){for(var Y=0;Y<=v.length-1-d;Y++)this.temp_buffs[this.bytes_in_sequence][Y]=v[d+Y];return this.bytes_remaining=d+this.bytes_in_sequence-v.length,!0}else{this.string=v.slice(d,d+this.bytes_in_sequence).toString(),d=d+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string);continue}for(var q=d;q<v.length&&!(v[q]>=128);q++);this.string=v.slice(d,q).toString(),this._parser.write(this.string),this.emit("data",this.string),d=q-1}},b.prototype.end=function(v){return v&&v.length&&this._parser.write(v.toString()),this._parser.end(),!0},b.prototype.on=function(v,d){var k=this;return!k._parser["on"+v]&&o.indexOf(v)!==-1&&(k._parser["on"+v]=function(){var T=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);T.splice(0,0,v),k.emit.apply(k,T)}),c.prototype.on.call(k,v,d)},b.prototype.destroy=function(){h(this._parser),this.emit("close")};function S(v,d,k){n.INFO&&console.log("-- emit",d,k),v[d]&&v[d](k)}function E(v,d,k){A(v),S(v,d,k)}function A(v,d){v.textNode=B(v.opt,v.textNode),v.textNode!==void 0&&S(v,d||"onvalue",v.textNode),v.textNode=void 0}function x(v){v.numberNode&&S(v,"onvalue",parseFloat(v.numberNode)),v.numberNode=""}function B(v,d){return d===void 0||(v.trim&&(d=d.trim()),v.normalize&&(d=d.replace(/\s+/g," "))),d}function P(v,d){return A(v),d+=`
Line: `+v.line+`
Column: `+v.column+`
Char: `+v.c,d=new Error(d),v.error=d,S(v,"onerror",d),v}function N(v){return(v.state!==s.VALUE||v.depth!==0)&&P(v,"Unexpected end"),A(v),v.c="",v.closed=!0,S(v,"onend"),g.call(v,v.opt),v}function C(v){return v===a.carriageReturn||v===a.lineFeed||v===a.space||v===a.tab}function $(v){var d=this;if(this.error)throw this.error;if(d.closed)return P(d,"Cannot write after close. Assign an onready handler.");if(v===null)return N(d);var k=0,T=v.charCodeAt(0),Y=d.p;for(n.DEBUG&&console.log("write -> ["+v+"]");T&&(Y=T,d.c=T=v.charCodeAt(k++),Y!==T?d.p=Y:Y=d.p,!!T);)switch(n.DEBUG&&console.log(k,T,n.STATE[d.state]),d.position++,T===a.lineFeed?(d.line++,d.column=0):d.column++,d.state){case s.BEGIN:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:C(T)||P(d,"Non-whitespace before {[.");continue;case s.OPEN_KEY:case s.OPEN_OBJECT:if(C(T))continue;if(d.state===s.OPEN_KEY)d.stack.push(s.CLOSE_KEY);else if(T===a.closeBrace){S(d,"onopenobject"),this.depth++,S(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_OBJECT);T===a.doubleQuote?d.state=s.STRING:P(d,'Malformed object key should start with "');continue;case s.CLOSE_KEY:case s.CLOSE_OBJECT:if(C(T))continue;d.state,s.CLOSE_KEY,T===a.colon?(d.state===s.CLOSE_OBJECT?(d.stack.push(s.CLOSE_OBJECT),A(d,"onopenobject"),this.depth++):A(d,"onkey"),d.state=s.VALUE):T===a.closeBrace?(E(d,"oncloseobject"),this.depth--,d.state=d.stack.pop()||s.VALUE):T===a.comma?(d.state===s.CLOSE_OBJECT&&d.stack.push(s.CLOSE_OBJECT),A(d),d.state=s.OPEN_KEY):P(d,"Bad object");continue;case s.OPEN_ARRAY:case s.VALUE:if(C(T))continue;if(d.state===s.OPEN_ARRAY)if(S(d,"onopenarray"),this.depth++,d.state=s.VALUE,T===a.closeBracket){S(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;continue}else d.stack.push(s.CLOSE_ARRAY);T===a.doubleQuote?d.state=s.STRING:T===a.openBrace?d.state=s.OPEN_OBJECT:T===a.openBracket?d.state=s.OPEN_ARRAY:T===a.t?d.state=s.TRUE:T===a.f?d.state=s.FALSE:T===a.n?d.state=s.NULL:T===a.minus?d.numberNode+="-":a._0<=T&&T<=a._9?(d.numberNode+=String.fromCharCode(T),d.state=s.NUMBER_DIGIT):P(d,"Bad value");continue;case s.CLOSE_ARRAY:if(T===a.comma)d.stack.push(s.CLOSE_ARRAY),A(d,"onvalue"),d.state=s.VALUE;else if(T===a.closeBracket)E(d,"onclosearray"),this.depth--,d.state=d.stack.pop()||s.VALUE;else{if(C(T))continue;P(d,"Bad array")}continue;case s.STRING:d.textNode===void 0&&(d.textNode="");var q=k-1,oe=d.slashed,re=d.unicodeI;e:for(;;){for(n.DEBUG&&console.log(k,T,n.STATE[d.state],oe);re>0;)if(d.unicodeS+=String.fromCharCode(T),T=v.charCodeAt(k++),d.position++,re===4?(d.textNode+=String.fromCharCode(parseInt(d.unicodeS,16)),re=0,q=k-1):re++,!T)break e;if(T===a.doubleQuote&&!oe){d.state=d.stack.pop()||s.VALUE,d.textNode+=v.substring(q,k-1),d.position+=k-1-q;break}if(T===a.backslash&&!oe&&(oe=!0,d.textNode+=v.substring(q,k-1),d.position+=k-1-q,T=v.charCodeAt(k++),d.position++,!T))break;if(oe){if(oe=!1,T===a.n?d.textNode+=`
`:T===a.r?d.textNode+="\r":T===a.t?d.textNode+="	":T===a.f?d.textNode+="\f":T===a.b?d.textNode+="\b":T===a.u?(re=1,d.unicodeS=""):d.textNode+=String.fromCharCode(T),T=v.charCodeAt(k++),d.position++,q=k-1,T)continue;break}m.lastIndex=k;var ie=m.exec(v);if(ie===null){k=v.length+1,d.textNode+=v.substring(q,k-1),d.position+=k-1-q;break}if(k=ie.index+1,T=v.charCodeAt(ie.index),!T){d.textNode+=v.substring(q,k-1),d.position+=k-1-q;break}}d.slashed=oe,d.unicodeI=re;continue;case s.TRUE:T===a.r?d.state=s.TRUE2:P(d,"Invalid true started with t"+T);continue;case s.TRUE2:T===a.u?d.state=s.TRUE3:P(d,"Invalid true started with tr"+T);continue;case s.TRUE3:T===a.e?(S(d,"onvalue",!0),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid true started with tru"+T);continue;case s.FALSE:T===a.a?d.state=s.FALSE2:P(d,"Invalid false started with f"+T);continue;case s.FALSE2:T===a.l?d.state=s.FALSE3:P(d,"Invalid false started with fa"+T);continue;case s.FALSE3:T===a.s?d.state=s.FALSE4:P(d,"Invalid false started with fal"+T);continue;case s.FALSE4:T===a.e?(S(d,"onvalue",!1),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid false started with fals"+T);continue;case s.NULL:T===a.u?d.state=s.NULL2:P(d,"Invalid null started with n"+T);continue;case s.NULL2:T===a.l?d.state=s.NULL3:P(d,"Invalid null started with nu"+T);continue;case s.NULL3:T===a.l?(S(d,"onvalue",null),d.state=d.stack.pop()||s.VALUE):P(d,"Invalid null started with nul"+T);continue;case s.NUMBER_DECIMAL_POINT:T===a.period?(d.numberNode+=".",d.state=s.NUMBER_DIGIT):P(d,"Leading zero not followed by .");continue;case s.NUMBER_DIGIT:a._0<=T&&T<=a._9?d.numberNode+=String.fromCharCode(T):T===a.period?(d.numberNode.indexOf(".")!==-1&&P(d,"Invalid number has two dots"),d.numberNode+="."):T===a.e||T===a.E?((d.numberNode.indexOf("e")!==-1||d.numberNode.indexOf("E")!==-1)&&P(d,"Invalid number has two exponential"),d.numberNode+="e"):T===a.plus||T===a.minus?(Y===a.e||Y===a.E||P(d,"Invalid symbol in number"),d.numberNode+=String.fromCharCode(T)):(x(d),k--,d.state=d.stack.pop()||s.VALUE);continue;default:P(d,"Unknown state: "+d.state)}return d.position>=d.bufferCheckPosition&&f(d),d}})(t)});function Gc(e){var t=0,n=Xc(!0),r={pullAsync:function(i){return qt(this,void 0,void 0,function(){var o,s,c;return mt(this,function(l){switch(l.label){case 0:return o=e.slice(t,t+i),t+=i,[4,Ns(o,"text")];case 1:return s=l.sent(),c=n.write(s),r.result=c||{},[2,c]}})})},pullSync:function(i){var o=e.slice(t,t+i);t+=i;var s=Bs(o,"text"),c=n.write(s);return r.result=c||{},c},done:function(){return n.done()},eof:function(){return t>=e.size},result:{}};return r}function Xc(e){var t=Hc.parser(),n=0,r,i=[],o,s,c=!1,l=!1;return t.onopenobject=function(a){var f={};f.incomplete=!0,r||(r=f),o&&(i.push([s,o,l]),e&&(l?o.push(f):o[s]=f)),o=f,s=a,l=!1,++n},t.onkey=function(a){return s=a},t.onvalue=function(a){return l?o.push(a):o[s]=a},t.oncloseobject=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},t.onopenarray=function(){var a=[];a.incomplete=!0,r||(r=a),o&&(i.push([s,o,l]),e&&(l?o.push(a):o[s]=a)),o=a,l=!0,s=null,++n},t.onclosearray=function(){var a;if(delete o.incomplete,s=null,--n===0)c=!0;else{var f=o;a=i.pop(),s=a[0],o=a[1],l=a[2],e||(l?o.push(f):o[s]=f)}},{write:function(a){return t.write(a),r},done:function(){return c}}}var $s=1024;function Qc(e,t){return qt(this,void 0,void 0,function(){var n,r,i,o;return mt(this,function(s){switch(s.label){case 0:return t=t||{},n=t.chunkSizeBytes||$s*1024,[4,Ks(e,n)];case 1:return r=s.sent(),i=r.result.data,o=new Ce(i.databaseName),o.version(i.databaseVersion).stores(Uc(i)),[4,Ls(o,r,t)];case 2:return s.sent(),[2,o]}})})}function Ls(e,t,n){return qt(this,void 0,void 0,function(){function r(){return qt(this,void 0,void 0,function(){var w,b,S,E,A;return mt(this,function(x){switch(x.label){case 0:w=function(B){var P,N,C,$,v,d,k,T,Y,q,oe,re;return mt(this,function(ie){switch(ie.label){case 0:if(!B.rows)return[2,"break"];if(!B.rows.incomplete&&B.rows.length===0)return[2,"continue"];if(a&&Ce.ignoreTransaction(function(){return a(f)}),P=B.tableName,N=e.table(P),C=l.tables.filter(function(se){return se.name===P})[0].schema,!N){if(n.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(B.tableName," is missing in installed database"))}if(!n.acceptChangedPrimaryKey&&C.split(",")[0]!=N.schema.primKey.src)throw new Error("Primary key differs for table ".concat(B.tableName,". "));for($=B.rows,v=[],d=0;d<$.length&&(k=$[d],!k.incomplete);d++)v.push(lt.revive(k));return T=n.filter,Y=T?B.inbound?v.filter(function(se){return T(P,se)}):v.filter(function(se){var ke=se[0],Pe=se[1];return T(P,Pe,ke)}):v,q=B.inbound?[void 0,Y]:[Y.map(function(se){return se[0]}),v.map(function(se){return se[1]})],oe=q[0],re=q[1],n.overwriteValues?[4,N.bulkPut(re,oe)]:[3,2];case 1:return ie.sent(),[3,4];case 2:return[4,N.bulkAdd(re,oe)];case 3:ie.sent(),ie.label=4;case 4:return f.completedRows+=v.length,v.incomplete||(f.completedTables+=1),$.splice(0,v.length),[2]}})},b=0,S=l.data,x.label=1;case 1:return b<S.length?(E=S[b],[5,w(E)]):[3,4];case 2:if(A=x.sent(),A==="break")return[3,4];x.label=3;case 3:return b++,[3,1];case 4:for(;l.data.length>0&&l.data[0].rows&&!l.data[0].rows.incomplete;)l.data.splice(0,1);return!o.done()&&!o.eof()?c?(o.pullSync(i),[3,7]):[3,5]:[3,8];case 5:return[4,Ce.waitFor(o.pullAsync(i))];case 6:x.sent(),x.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var i,o,s,c,l,a,f,h,m,g;return mt(this,function(w){switch(w.label){case 0:return n=n||{},i=n.chunkSizeBytes||$s*1024,[4,Ks(t,i)];case 1:if(o=w.sent(),s=o.result,c="FileReaderSync"in self,l=s.data,!n.acceptNameDiff&&e.name!==l.databaseName)throw new Error("Name differs. Current database name is ".concat(e.name," but export is ").concat(l.databaseName));if(!n.acceptVersionDiff&&e.verno!==l.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(e.verno," but export is ").concat(l.databaseVersion));if(a=n.progressCallback,f={done:!1,completedRows:0,completedTables:0,totalRows:l.tables.reduce(function(b,S){return b+S.rowCount},0),totalTables:l.tables.length},a&&Ce.ignoreTransaction(function(){return a(f)}),!n.clearTablesBeforeImport)return[3,5];h=0,m=e.tables,w.label=2;case 2:return h<m.length?(g=m[h],[4,g.clear()]):[3,5];case 3:w.sent(),w.label=4;case 4:return h++,[3,2];case 5:return n.noTransaction?[4,r()]:[3,7];case 6:return w.sent(),[3,9];case 7:return[4,e.transaction("rw",e.tables,r)];case 8:w.sent(),w.label=9;case 9:return f.done=!0,a&&Ce.ignoreTransaction(function(){return a(f)}),[2]}})})}function Ks(e,t){return qt(this,void 0,void 0,function(){var n,r;return mt(this,function(i){switch(i.label){case 0:n="slice"in e?Gc(e):e,i.label=1;case 1:return n.eof()?[3,3]:[4,n.pullAsync(t)];case 2:return i.sent(),n.result.data&&n.result.data.data?[3,3]:[3,1];case 3:if(r=n.result,!r||r.formatName!="dexie")throw new Error("Given file is not a dexie export");if(r.formatVersion>zc)throw new Error("Format version ".concat(r.formatVersion," not supported"));if(!r.data)throw new Error("No data in export file");if(!r.data.databaseName)throw new Error("Missing databaseName in export file");if(!r.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!r.data.tables)throw new Error("Missing tables in export file");return[2,n]}})})}Ce.prototype.export=function(e){return Rs(this,e)};Ce.prototype.import=function(e,t){return Ls(this,e,t)};Ce.import=function(e,t){return Qc(e,t)};class Fs extends Ce{constructor(){super("AppDB");je(this,"dictionary");je(this,"practiceSettings");je(this,"statistic");je(this,"appSettings");this.version(1).stores({dictionary:"id",practiceSettings:"",statistic:"year",appSettings:""})}static recreateFromImport(n){Le=n}}let Le=new Fs;const Zc=e=>Le.dictionary.add({...e}),eu=e=>Le.dictionary.put(e),tu=e=>Le.dictionary.delete(e),nu=()=>Le.dictionary.toArray(),ru=()=>Le.dictionary.clear(),no=0,iu=()=>Le.practiceSettings.get(no),ou=e=>Le.practiceSettings.add({...e},no),su=e=>Le.practiceSettings.update(no,e),au=e=>Le.statistic.put(e),cu=()=>Le.statistic.toArray(),uu=async e=>Le.statistic.add({...e}),lu=()=>Le.statistic.clear(),fu=async()=>Rs(Le),du=async e=>{await Le.delete(),Fs.recreateFromImport(await Ce.import(e))},ro=0,hu=()=>Le.appSettings.get(ro),pu=e=>Le.appSettings.put({...e},ro),yu=e=>Le.appSettings.update(ro,e),Qe={onAddWord:Zc,onEditWord:eu,onDeleteWord:tu,getDictionaryDataAsArray:nu,onDictionaryClear:ru,getPracticeData:iu,initPracticeData:ou,updatePracticeData:su,updateStatistic:au,getStatisticDataAsArray:cu,initStatisticData:uu,onStatisticClear:lu,exportAppDBData:fu,importAppDBData:du,getAppSettings:hu,initAppSettingsData:pu,updateAppSettingsData:yu},mu=""+new URL("octopus-white-14148693.svg",import.meta.url).href;class gu{constructor(t){je(this,"prevValue");je(this,"checker");je(this,"resolveCallback");je(this,"rejectCallback");this.prevValue=t.prevValue||"",this.checker=t.checker,this.resolveCallback=t.resolveCallback,this.rejectCallback=t.rejectCallback}handleEvent(t){const n=String(t.target.value);this.checker(n)?this.onResolveInput(n,t):this.onRejectInput(n,t)}onResolveInput(t,n){var r;this.updatePrevValue(t),(r=this.resolveCallback)==null||r.call(this,{event:n,curValue:t,prevValue:this.prevValue})}onRejectInput(t,n){var i;const r=n.target.selectionStart||0;this.restore(n.target,t,r),(i=this.rejectCallback)==null||i.call(this,{event:n,curValue:t,prevValue:this.prevValue})}restore(t,n,r){this.restorePrevValue(t),this.restorePrevCaretPos(t,n,r)}restorePrevValue(t){t.value=this.prevValue}restorePrevCaretPos(t,n,r){const i=n.length,o=r-(i-this.prevValue.length);t.setSelectionRange(o,o)}updatePrevValue(t){this.prevValue=t}getPrevValue(){return this.prevValue}}const Wf=(e,t)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}},Us=`<img class='h-8' src='${mu}' alt='octa icon'/>`,vu="break-all bg-red-400 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",bu="break-all bg-yellow-500 text-white cursor-default !rounded-md [&_.text-base]:flex [&_.text-base]:gap-4 [&_.text-base]:items-center",Vf=e=>`-webkit-mask: url(${e}) no-repeat center / contain; mask: url(${e}) no-repeat center / contain;`,Ms=e=>JSON.parse(JSON.stringify(e)),Yf=e=>[...e].sort(()=>Math.random()-.5);function*zf(e){const t=e.length;for(let n=0;n<t;n+=1)yield e[n]}const Jf=e=>new gu(e),Hf=e=>e===0?"bg-slate-400":e<40?"bg-orange-400":e<75?"bg-amber-400":"bg-green-400",Gf=e=>e===0?"bg-slate-300 hover:bg-slate-400 focus:bg-slate-400":e<40?"bg-orange-300 hover:bg-orange-400 focus:bg-orange-400":e<75?"bg-amber-300 hover:bg-amber-400 focus:bg-amber-400":"bg-green-300 hover:bg-green-400 focus:bg-green-400",qs=["January","February","March","April","May","June","July","August","September","October","November","December"],wu=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Xf={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday"},Qf=wu.map(e=>e.slice(0,3)),Io={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6},Zf=e=>{e.sort((t,n)=>Io[t]-Io[n])},ed=(e,t)=>{let n=e.indexOf(t);for(;n!==-1;)e.splice(n,1),n=e.indexOf(t,n+1)},td=e=>{e.sort(({from:t},{from:n})=>Number(t.replace(":",""))-Number(n.replace(":","")))},Ws=e=>{e.code==="Escape"&&e.stopPropagation()},nd=()=>{document.addEventListener("keydown",Ws)},rd=()=>{document.removeEventListener("keydown",Ws)},_u=e=>{e.preventDefault()},Su=()=>{document.addEventListener("contextmenu",_u)},Vs=e=>{Ui.trigger({message:Us+`<div>${e}</div>`,background:vu,autohide:!1})},id=e=>{Ui.trigger({message:Us+`<div>${e}</div>`,background:bu})},xu=async e=>{Vs("UnexpectedException: "+e),(await Fn(()=>import("./ipcUtils-0ca568d4.js"),[],import.meta.url)).sendToIpcMain("mainWinErr",e)},Eu=async({reason:e})=>{const t=`Unhandledrejection: ${e}`;Vs(t),(await Fn(()=>import("./ipcUtils-0ca568d4.js"),[],import.meta.url)).sendToIpcMain("mainWinErr",t)},Au=()=>{window.onerror=xu,window.onunhandledrejection=Eu},Ou=()=>{if(window.electron===void 0)throw"electron API is missing in window"},Tu={startWithSystem:!0,openAppWindowAtStart:!0},ku={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},Pu={enabled:!1,soundNotification:!0,daySettings:{general:{interval:"02:00",timeFrames:[]}}},Cu={basic:Tu,practice:{passive:ku,active:Pu}},Iu=()=>Ms(Cu),Nu={practiceTarget:"original",practiceType:"section",sectionLastWordId:null,sectionSize:10},Bu=()=>Ms(Nu);class Ys{constructor(){je(this,"totalWordsAmount");je(this,"addedWordsAmount");je(this,"deletedWordsAmount");je(this,"wordTotalPracticeAmount");je(this,"wordOriginPracticeAmount");je(this,"wordTranslationPracticeAmount");je(this,"averagePracticeSuccess");je(this,"successfulPracticeCount");je(this,"unsuccessfulPracticeCount");this.totalWordsAmount=0,this.addedWordsAmount=0,this.deletedWordsAmount=0,this.wordTotalPracticeAmount=0,this.wordOriginPracticeAmount=0,this.wordTranslationPracticeAmount=0,this.averagePracticeSuccess=0,this.successfulPracticeCount=0,this.unsuccessfulPracticeCount=0}}const ju=()=>{const e=String(new Date().getFullYear()),t={};return qs.forEach(n=>{t[n]=new Ys}),t.year=e,[t]},Du=async()=>{(await Fn(()=>import("./DBUtilsFacadeDesktopBuild-08d1432d.js"),["./DBUtilsFacadeDesktopBuild-08d1432d.js","./ipcUtils-0ca568d4.js"],import.meta.url)).initDBUtilsFacadeDesktopBuild()},Ru=async()=>{let[e,t,n,r]=await Promise.all([Qe.getDictionaryDataAsArray(),Qe.getPracticeData(),Qe.getStatisticDataAsArray(),Qe.getAppSettings()]);return t===void 0&&(t=Bu(),Qe.initPracticeData(t)),n.length===0&&(n=ju(),Qe.initStatisticData(n[0])),r===void 0&&(r=Iu(),Qe.initAppSettingsData(r)),[e,t,n,r]};class zs{constructor(t){je(this,"value");je(this,"subscriptions",[]);this.value=t}subscribe(t){return t(this.value),this.subscriptions.push(t),()=>this.unsubscribe(t)}update(t){this.set(t(this.value))}set(t){this.value=t,this.broadcast()}get(){return this.value}broadcast(){this.subscriptions.forEach(t=>t(this.value))}unsubscribe(t){this.subscriptions=this.subscriptions.filter(n=>n!==t)}}const on=(e,t)=>{const n=new zs(e);return Object.assign(n,t),n},$u=on(),Lu=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},Ku=(e,t)=>{Bt.update(n=>(n.daySettings[e].interval=t,n))},Fu=(e,t)=>{Bt.update(n=>(n.daySettings[e].enabled=t,n))},Uu=e=>{Bt.update(t=>(Lu(e,t),t))},Mu=e=>{Bt.update(t=>(delete t.daySettings[e],t))},qu=(e,t)=>{Bt.update(n=>(n.daySettings[e].timeFrames=t,n))},Wu=(e,t)=>{Bt.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},$u.set(e),n})},Vu=e=>{Bt.set(e)},Yu=e=>{Bt=on(e,{updateSettingKeyIntervalProp:Ku,updateSettingKeyEnabledProp:Fu,addSettingKey:Uu,removeSettingKey:Mu,updateTimeFrames:qu,copySettingsForDay:Wu,reInit:Vu})};let Bt,Js;const zu=e=>{Js=xn(e)},Ju=on(),Hu=(e,t)=>{t.daySettings[e]={enabled:!1,interval:"00:05",timeFrames:[]}},Gu=(e,t)=>{jt.update(n=>(n.daySettings[e].interval=t,n))},Xu=(e,t)=>{jt.update(n=>(n.daySettings[e].enabled=t,n))},Qu=e=>{jt.update(t=>(Hu(e,t),t))},Zu=e=>{jt.update(t=>(delete t.daySettings[e],t))},el=(e,t)=>{jt.update(n=>(n.daySettings[e].timeFrames=t,n))},tl=(e,t)=>{jt.update(n=>{const{enabled:r,interval:i,timeFrames:o}=n.daySettings[t];return n.daySettings[e]={enabled:r,interval:i,timeFrames:o.map(({from:s,to:c})=>({from:s,to:c}))},Ju.set(e),n})},nl=e=>{jt.set(e)},rl=e=>{jt=on(e,{updateSettingKeyIntervalProp:Gu,updateSettingKeyEnabledProp:Xu,addSettingKey:Qu,removeSettingKey:Zu,updateTimeFrames:el,copySettingsForDay:tl,reInit:nl})};let jt;const il=e=>{On.update(t=>(t.practice.passive={...e},t))},ol=e=>{On.update(t=>(t.practice.active={...e},t))},sl=e=>{On.update(t=>({...t,basic:{...e}}))},al=()=>{jt.subscribe(il),Bt.subscribe(ol),Js.subscribe(sl)};let On;const cl=e=>{On.value=e},ul=e=>{On=on(e,{reInit:cl}),al()},ll=e=>{Qe.updateAppSettingsData(e)},fl=()=>{On.subscribe(ll)},dl=e=>{io=xn({...e})};let io;const hl=e=>{Qe.updatePracticeData(e)},pl=()=>{io.subscribe(hl)};class yl extends zs{subscribe(t){return this.subscriptions.push(t),()=>this.unsubscribe(t)}}const oo=(e,t)=>{const n=new yl(e);return Object.assign(n,t),n},Yr=oo(),ml=e=>{Qe.updateStatistic(e)},gl=()=>{Yr.subscribe(ml)},Wt=oo();let Hs;const vl=()=>{Hs={add:Qe.onAddWord,edit:Qe.onEditWord,delete:Qe.onDeleteWord}},bl=([e,t])=>{Hs[e](t)},wl=()=>{vl(),Wt.subscribe(bl)},_l=e=>{const t={...e,learnSuccess:0,practiceCount:0,successfulPracticeCount:0};rr(t),Wt.set(["edit",t])},rr=e=>{Vt.update(t=>t.set(e.id,e))},so=e=>Vt.value.get(e),Sl=e=>{const n={id:String(new Date().getTime()),learnSuccess:0,practiceCount:0,successfulPracticeCount:0,...e};rr(n),Wt.set(["add",n])},xl=(e,t)=>{const{learnSuccess:n,practiceCount:r,successfulPracticeCount:i}=e,o={id:e.id,learnSuccess:n,practiceCount:r,successfulPracticeCount:i,...t};rr(o),Wt.set(["edit",o])},El=e=>{Vt.update(t=>(t.delete(e),t)),Wt.set(["delete",e])},Gs=2,Al=e=>{const t=so(e),n=t.practiceCount+1,r=t.successfulPracticeCount*100/n,i=Number(r.toFixed(Gs)),o={...t,practiceCount:n,learnSuccess:i};rr(o),Wt.set(["edit",o])},Ol=e=>{const t=so(e),n=t.practiceCount+1,r=t.successfulPracticeCount+1,i=r*100/n,o=Number(i.toFixed(Gs)),s={...t,practiceCount:n,successfulPracticeCount:r,learnSuccess:o};rr(s),Wt.set(["edit",s])},Tl=()=>{Vt.value.clear()},od=async()=>{const e=await Qe.getDictionaryDataAsArray();Vt.value=Xs(e)},Xs=e=>{const t=new Map;return e.forEach(({id:n,...r})=>{t.set(n,{id:n,...r})}),t},kl=e=>{Vt=on(Xs(e),{getById:so,removeWord:El,resetWordPractice:_l,editWord:xl,addWord:Sl,onUnsuccessfulPractice:Al,onSuccessfulPractice:Ol,clear:Tl})};let Vt;const Pl=oo();let Qs;const Cl=({practiceTarget:e})=>{Qs=e},Il=e=>{const t={};return qs.forEach(n=>{t[n]=new Ys}),t.year=e,t},ao=(e,t)=>e.has(t)?e.get(t):Il(t),co=()=>new Date().toLocaleString("en-US",{month:"long",year:"numeric"}).split(" "),Nl=([e,t])=>{e in No&&No[e](t)},Bl=()=>{ir.update(e=>{const[t,n]=co(),r=ao(e,n);return r[t].totalWordsAmount=Vt.value.size,r[t].deletedWordsAmount+=1,e.set(n,r),Yr.set(r),e})},jl=()=>{ir.update(e=>{const[t,n]=co(),r=ao(e,n);return r[t].totalWordsAmount=Vt.value.size,r[t].addedWordsAmount+=1,e.set(n,r),Yr.set(r),e})},No={add:jl,delete:Bl},Zs=(e,t)=>{ir.update(n=>{const[r,i]=co(),o=ao(n,i);return e==="successful"?o[r].successfulPracticeCount+=1:o[r].unsuccessfulPracticeCount+=1,t==="original"?o[r].wordOriginPracticeAmount+=1:o[r].wordTranslationPracticeAmount+=1,o[r].wordTotalPracticeAmount+=1,o[r].averagePracticeSuccess=Number((o[r].successfulPracticeCount/o[r].wordTotalPracticeAmount).toFixed(2))*100,n.set(i,o),Yr.set(o),n})},Dl=e=>{Zs(e,Qs)},Rl=()=>{io.subscribe(Cl),Wt.subscribe(Nl),Pl.subscribe(Dl)},sd=(e,t)=>{Zs(e,t)};let ir;const ea=e=>{const t=new Map;return e.forEach(n=>{t.set(n.year,n)}),t},$l=e=>{ir.value=ea(e)},Ll=e=>{ir=on(ea(e),{reInit:$l}),Rl()};ns.set({computePosition:_a,autoUpdate:wa,offset:pa,shift:ma,flip:ha,arrow:ca});Au();Du().then(Ru).then(async([e,t,n,r])=>{kl(e),dl(t),Ll(n),rl(r.practice.passive),Yu(r.practice.active),zu(r.basic),ul(r),wl(),pl(),gl(),fl(),Su(),(await Fn(()=>import("./ipcUtils-0ca568d4.js"),[],import.meta.url)).initDesktopActionListeners();const i=(await Fn(()=>import("./App-f2236ad2.js"),["./App-f2236ad2.js","./ipcUtils-0ca568d4.js","./App-42d5c252.css"],import.meta.url)).default;new i({target:document.getElementById("app")}),Ou()});export{hf as $,Jl as A,Sf as B,Ef as C,_n as D,Nf as E,qe as F,Ri as G,Af as H,Go as I,sf as J,yf as K,Rf as L,zl as M,df as N,uf as O,ef as P,wf as Q,cf as R,Uf as S,Df as T,jf as U,bf as V,vf as W,vo as X,pf as Y,af as Z,ff as _,Ca as a,ru as a$,nf as a0,Ul as a1,Xl as a2,gf as a3,Kf as a4,Ma as a5,$f as a6,qa as a7,Fl as a8,mf as a9,Qe as aA,ju as aB,ir as aC,Iu as aD,On as aE,jt as aF,Bt as aG,od as aH,Qf as aI,Bf as aJ,Xf as aK,lf as aL,Ua as aM,Of as aN,Hl as aO,td as aP,qf as aQ,ed as aR,Zf as aS,Ju as aT,$u as aU,qs as aV,mu as aW,Hf as aX,Zc as aY,eu as aZ,tu as a_,Zl as aa,Cf as ab,If as ac,Ui as ad,Ra as ae,Vf as af,of as ag,_f as ah,Lf as ai,Tf as aj,Vt as ak,Gl as al,Wf as am,Mf as an,Gf as ao,io as ap,Jf as aq,Fa as ar,zf as as,Yf as at,Wo as au,Pl as av,id as aw,Js as ax,nd as ay,rd as az,ka as b,uu as b0,ou as b1,su as b2,au as b3,pu as b4,yu as b5,du as b6,sd as b7,Ml as c,ql as d,Ho as e,Ka as f,Vl as g,Li as h,Ff as i,xf as j,Sa as k,Yl as l,Ur as m,Ql as n,nn as o,tf as p,Pa as q,Aa as r,xa as s,ts as t,Wl as u,rf as v,xn as w,kf as x,Pf as y,Nt as z};
